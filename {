Script started on 2025-06-23 03:47:57+00:00 [TERM="xterm" TTY="/dev/pts/0" COLUMNS="80" LINES="24"]
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ C[Kcat j[KJenkinsfile 
[?2004lpipeline {
    agent any
    
    environment {
        MAVEN_OPTS = '-Xmx3072m -XX:+UseG1GC'
        JAVA_HOME = '/usr/lib/jvm/java-17-openjdk-17.0.15.0.6-2.el9.x86_64'
        M2_HOME = '/usr/share/maven'
        PATH = "${env.PATH}:/usr/bin"
        
        ENV_NAME = 'PRODUCTION'
        DEPLOY_TARGET = 'prod-server'
        BUILD_PROFILE = 'prod'
    }
    
    parameters {
        choice(
            name: 'RELEASE_BRANCH',
            choices: ['master', 'release/*'],
            description: 'Select release branch for production build'
        )
        string(
            name: 'VERSION_TAG',
            defaultValue: '',
            description: 'Version tag for this production release (e.g., v1.2.3)'
        )
        booleanParam(
            name: 'FORCE_FULL_BUILD',
            defaultValue: false,
            description: 'Force full build instead of incremental?'
        )
        booleanParam(
            name: 'CREATE_BACKUP',
            defaultValue: true,
            description: 'Create backup before production deployment?'
        )
        booleanParam(
            name: 'DEPLOY_TO_PROD',
            defaultValue: false,
            description: 'Deploy to production? (Requires approval)'
        )
    }
    
    stages {
        stage('Production Checkout') {
            steps {
                echo "ðŸ”’ Checking out source code for PRODUCTION build..."
                script {
                    if (params.VERSION_TAG) {
                        checkout([$class: 'GitSCM',
                                branches: [[name: "refs/tags/${params.VERSION_TAG}"]],
                                userRemoteConfigs: scm.userRemoteConfigs])
                    } else {
                        checkout([$class: 'GitSCM',
                                branches: [[name: "*/${params.RELEASE_BRANCH}"]],
                                userRemoteConfigs: scm.userRemoteConfigs])
                    }
                }
            }
        }
        
        stage('Detect Changed Modules') {
            steps {
                echo 'ðŸ” Detecting changed modules since last build...'
                script {
                    def changedModules = []
                    def allModules = []
                    
                    // Get all Maven modules
                    def pomFiles = sh(
                        script: "find . -name 'pom.xml' -not -path './target/*' | head -20",
                        returnStdout: true
                    ).trim().split('\n')
                    
                    // Extract module names from pom files
                    for (pomFile in pomFiles) {
                        if (pomFile != './pom.xml') {
                            def moduleName = pomFile.replaceAll('./([^/]+)/pom.xml', '$1')
                            allModules.add(moduleName)
                        }
                    }
                    
                    // Get changed files since last successful build
                    def lastBuildCommit = ""
                    try {
                        // Try to get last successful build commit
                        def lastBuild = currentBuild.getPreviousSuccessfulBuild()
                        if (lastBuild) {
                            lastBuildCommit = sh(
                                script: "git log --format='%H' -n 1 --before='${lastBuild.getTime()}'",
                                returnStdout: true
                            ).trim()
                        }
                    } catch (Exception e) {
                        echo "No previous successful build found, will check last 5 commits"
                    }
                    
                    // If no previous build, check recent commits
                    if (!lastBuildCommit) {
                        lastBuildCommit = sh(
                            script: "git log --format='%H' -n 1 HEAD~5",
                            returnStdout: true
                        ).trim()
                    }
                    
                    // Get changed files
                    def changedFiles = ""
                    if (lastBuildCommit) {
                        changedFiles = sh(
                            script: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",
                            returnStdout: true
                        ).trim()
                    } else {
                        changedFiles = sh(
                            script: "git diff --name-only HEAD~1 HEAD",
                            returnStdout: true
                        ).trim()
                    }
                    
                    echo "Changed files: ${changedFiles}"
                    
                    // Determine which modules are affected
                    if (changedFiles) {
                        def files = changedFiles.split('\n')
                        def affectedModules = [] as Set
                        
                        for (file in files) {
                            // Check if file belongs to a module
                            for (module in allModules) {
                                if (file.startsWith("${module}/") || 
                                    file.startsWith("${module}\\") ||
                                    file.contains("/${module}/") ||
                                    file.contains("\\${module}\\")) {
                                    affectedModules.add(module)
                                }
                            }
                            
                            // Also check for common files that affect all modules
                            if (file.equals('pom.xml') || 
                                file.startsWith('common/') ||
                                file.startsWith('shared/') ||
                                file.contains('parent') ||
                                file.contains('config')) {
                                echo "Core file changed: ${file} - will trigger full build"
                                affectedModules.addAll(allModules)
                                break
                            }
                        }
                        
                        changedModules = affectedModules.toList()
                    }
                    
                    // Force full build if requested or if no changes detected
                    if (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {
                        echo "ðŸ”„ Full build requested or no specific changes detected"
                        changedModules = allModules
                    }
                    
                    echo "ðŸ“‹ Modules to build: ${changedModules.join(', ')}"
                    echo "ðŸ“Š Total modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"
                    
                    // Store in environment for later stages
                    env.CHANGED_MODULES = changedModules.join(',')
                    env.ALL_MODULES = allModules.join(',')
                    env.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'
                }
            }
        }
        
        stage('Production Build Info') {
            steps {
                echo "ðŸ­ PRODUCTION Build Information:"
                echo "Environment: ${ENV_NAME}"
                echo "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"
                echo "Build number: ${env.BUILD_NUMBER}"
                echo "Build Type: ${env.BUILD_TYPE}"
                echo "Modules to build: ${env.CHANGED_MODULES}"
                echo "Create backup: ${params.CREATE_BACKUP}"
                echo "Deploy to prod: ${params.DEPLOY_TO_PROD}"
                sh 'java -version'
                sh 'mvn -version'
                sh 'git log --oneline -3'
            }
        }
        
        stage('Production Security Check') {
            steps {
                echo 'ðŸ” Running production security validations...'
                script {
                    def allowedBranches = ['master', 'main']
                    def currentBranch = params.RELEASE_BRANCH
                    
                    if (params.VERSION_TAG) {
                        echo "âœ… Building from version tag: ${params.VERSION_TAG}"
                    } else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {
                        echo "âœ… Building from approved branch: ${currentBranch}"
                    } else {
                        error("âŒ Production builds only allowed from master, main, or release/* branches")
                    }
                }
            }
        }
        
        stage('Production Clean & Prepare') {
            steps {
                echo 'ðŸ§¹ Cleaning workspace for production build...'
                script {
                    if (env.BUILD_TYPE == 'FULL') {
                        sh 'mvn clean -q -T 2C'
                    } else {
                        // Clean only changed modules
                        def modules = env.CHANGED_MODULES.split(',')
                        for (module in modules) {
                            sh "mvn clean -q -f ${module}/pom.xml || true"
                        }
                    }
                }
            }
        }
        
        stage('Incremental Production Build') {
            steps {
                echo "ðŸ“¦ Building ${env.BUILD_TYPE} - ${env.CHANGED_MODULES.split(',').length} modules..."
                timeout(time: 60, unit: 'MINUTES') {
                    script {
                        if (env.BUILD_TYPE == 'FULL') {
                            // Full build
                            sh '''
                                echo "=== FULL PRODUCTION Build ==="
                                mvn package \
                                    -P${BUILD_PROFILE} \
                                    -DskipTests \
                                    -Dmaven.test.skip=true \
                                    -Dmaven.javadoc.skip=true \
                                    -Dmaven.source.skip=true \
                                    -Dcheckstyle.skip=false \
                                    -Dspotbugs.skip=false \
                                    -Denforcer.skip=false \
                                    -Dmaven.compiler.optimize=true \
                                    -Dmaven.compiler.debug=false \
                                    -T 2C
                            '''
                        } else {
                            // Incremental build
                            echo "=== INCREMENTAL PRODUCTION Build ==="
                            def modules = env.CHANGED_MODULES.split(',')
                            
                            // Build modules with dependencies
                            def moduleList = modules.join(',')
                            sh """
                                echo "Building modules: ${moduleList}"
                                
                                # Build changed modules and their dependents
                                mvn package \
                                    -P${BUILD_PROFILE} \
                                    -pl ${moduleList} \
                                    -am \
                                    -DskipTests \
                                    -Dmaven.test.skip=true \
                                    -Dmaven.javadoc.skip=true \
                                    -Dmaven.source.skip=true \
                                    -Dcheckstyle.skip=false \
                                    -Dspotbugs.skip=false \
                                    -Denforcer.skip=false \
                                    -Dmaven.compiler.optimize=true \
                                    -Dmaven.compiler.debug=false \
                                    -T 2C
                            """
                        }
                        
                        sh '''
                            echo "=== Build Process Completed ==="
                            echo "Packages created:"
                            find . -name "*.jar" -newer pom.xml 2>/dev/null | head -15
                        '''
                    }
                }
            }
        }
        
        stage('Production Package Validation') {
            steps {
                echo 'âœ… Validating built packages...'
                sh '''
                    echo "=== Production Package Validation ==="
                    
                    # Check if packages exist for changed modules
                    CHANGED_MODULES="${CHANGED_MODULES}"
                    if [ -n "$CHANGED_MODULES" ]; then
                        for module in ${CHANGED_MODULES//,/ }; do
                            echo "Checking module: $module"
                            MODULE_JARS=$(find "$module" -name "*.jar" 2>/dev/null | wc -l)
                            if [ "$MODULE_JARS" -gt 0 ]; then
                                echo "  âœ… $module: $MODULE_JARS packages found"
                                find "$module" -name "*.jar" -exec ls -lh {} \\; 2>/dev/null | head -3
                            else
                                echo "  âš ï¸ $module: No packages found (might be parent module)"
                            fi
                        done
                    fi
                    
                    # Overall validation
                    TOTAL_JARS=$(find . -name "*.jar" -newer pom.xml 2>/dev/null | wc -l)
                    echo "Total packages created: $TOTAL_JARS"
                    
                    if [ "$TOTAL_JARS" -eq 0 ]; then
                        echo "âŒ WARNING: No packages found!"
                        echo "This might be normal for parent modules or configuration changes"
                    else
                        echo "âœ… Package validation completed"
                    fi
                '''
            }
        }
        
        stage('Create Production Backup') {
            when {
                expression { params.CREATE_BACKUP == true }
            }
            steps {
                echo 'ðŸ’¾ Creating production backup...'
                sh '''
                    BACKUP_DIR="production-backup-${BUILD_NUMBER}-$(date +%Y%m%d_%H%M%S)"
                    mkdir -p "$BACKUP_DIR"
                    
                    # Copy packages for changed modules
                    if [ -n "${CHANGED_MODULES}" ]; then
                        for module in ${CHANGED_MODULES//,/ }; do
                            if [ -d "$module/target" ]; then
                                mkdir -p "$BACKUP_DIR/$module"
                                find "$module/target" -name "*.jar" -exec cp {} "$BACKUP_DIR/$module/" \\; 2>/dev/null || true
                            fi
                        done
                    fi
                    
                    # Create backup archive
                    if [ -n "$(ls -A $BACKUP_DIR 2>/dev/null)" ]; then
                        tar -czf "${BACKUP_DIR}.tar.gz" "$BACKUP_DIR"
                        echo "âœ… Production backup created: ${BACKUP_DIR}.tar.gz"
                        ls -lh "${BACKUP_DIR}.tar.gz"
                    else
                        echo "â„¹ï¸ No packages to backup"
                    fi
                    
                    rm -rf "$BACKUP_DIR"
                '''
                
                archiveArtifacts artifacts: 'production-backup-*.tar.gz', allowEmptyArchive: true
            }
        }
        
        stage('Archive Production Packages') {
            steps {
                echo 'ðŸ“ Archiving production packages...'
                script {
                    def prodJars = sh(
                        script: "find . -name '*.jar' -newer pom.xml | grep -v test",
                        returnStdout: true
                    ).trim()
                    
                    if (prodJars) {
                        echo "Archiving ${env.BUILD_TYPE.toLowerCase()} build packages"
                        
                        // Archive all built packages
                        archiveArtifacts artifacts: '**/target/*.jar', 
                                       excludes: '**/target/*-tests.jar,**/target/*-sources.jar',
                                       allowEmptyArchive: true,
                                       fingerprint: true
                        
                        // Create a release package for changed modules
                        sh '''
                            RELEASE_DIR="thingsboard-${BUILD_TYPE,,}-${BUILD_NUMBER}"
                            mkdir -p "$RELEASE_DIR"
                            
                            # Copy main application JARs
                            find . -name "thingsboard*.jar" -o -name "application*.jar" | grep -v test | while read jar; do
                                cp "$jar" "$RELEASE_DIR/" 2>/dev/null || true
                            done
                            
                            # Create release info
                            echo "Build Type: ${BUILD_TYPE}" > "$RELEASE_DIR/build-info.txt"
                            echo "Modules: ${CHANGED_MODULES}" >> "$RELEASE_DIR/build-info.txt"
                            echo "Build: ${BUILD_NUMBER}" >> "$RELEASE_DIR/build-info.txt"
                            echo "Date: $(date)" >> "$RELEASE_DIR/build-info.txt"
                            
                            if [ -n "$(ls -A $RELEASE_DIR/*.jar 2>/dev/null)" ]; then
                                tar -czf "${RELEASE_DIR}.tar.gz" "$RELEASE_DIR"
                                echo "âœ… Release package created: ${RELEASE_DIR}.tar.gz"
                            else
                                echo "â„¹ï¸ No main application JARs to package"
                            fi
                            
                            rm -rf "$RELEASE_DIR"
                        '''
                        
                        archiveArtifacts artifacts: 'thingsboard-*-*.tar.gz', allowEmptyArchive: true
                    }
                }
            }
        }
        
        stage('Production Deployment Approval') {
            when {
                expression { params.DEPLOY_TO_PROD == true }
            }
            steps {
                script {
                    def approval = input(
                        message: "ðŸš¨ Deploy ${env.BUILD_TYPE} build to PRODUCTION?",
                        parameters: [
                            choice(name: 'DEPLOY_DECISION', 
                                   choices: ['ABORT', 'DEPLOY'], 
                                   description: 'Confirm production deployment')
                        ]
                    )
                    
                    if (approval == 'ABORT') {
                        error('Production deployment aborted by user')
                    }
                }
            }
        }
        
        stage('Deploy to Production') {
            when {
                expression { params.DEPLOY_TO_PROD == true }
            }
            steps {
                echo "ðŸš€ Deploying ${env.BUILD_TYPE} build to PRODUCTION..."
                script {
                    sh '''
                        echo "=== PRODUCTION DEPLOYMENT ==="
                        echo "Target: ${DEPLOY_TARGET}"
                        echo "Build Type: ${BUILD_TYPE}"
                        echo "Modules: ${CHANGED_MODULES}"
                        echo "Build: ${BUILD_NUMBER}"
                        
                        # Deploy only changed modules (customize as needed)
                        if [ "${BUILD_TYPE}" = "INCREMENTAL" ]; then
                            echo "Deploying incremental changes..."
                            # Example: Deploy only changed services
                            # for module in ${CHANGED_MODULES//,/ }; do
                            #     echo "Deploying module: $module"
                            #     scp $module/target/*.jar prod-server:/opt/thingsboard/modules/$module/
                            # done
                        else
                            echo "Deploying full build..."
                            # Example: Deploy full release
                            # scp thingsboard-full-*.tar.gz prod-server:/opt/thingsboard/releases/
                        fi
                        
                        echo "âœ… PRODUCTION deployment completed successfully"
                    '''
                }
            }
        }
        
        stage('Production Build Report') {
            steps {
                echo 'ðŸ“Š Generating production build report...'
                sh '''
                    echo "=== ThingsBoard PRODUCTION Build Report ===" > production-build-report.txt
                    echo "Environment: PRODUCTION" >> production-build-report.txt
                    echo "Build: ${BUILD_NUMBER}" >> production-build-report.txt
                    echo "Build Type: ${BUILD_TYPE}" >> production-build-report.txt
                    echo "Branch/Tag: ${VERSION_TAG:-$RELEASE_BRANCH}" >> production-build-report.txt
                    echo "Modules Built: ${CHANGED_MODULES}" >> production-build-report.txt
                    echo "Build Date: $(date)" >> production-build-report.txt
                    echo "Backup Created: ${CREATE_BACKUP}" >> production-build-report.txt
                    echo "Deployed: ${DEPLOY_TO_PROD}" >> production-build-report.txt
                    echo "" >> production-build-report.txt
                    
                    echo "=== Git Information ===" >> production-build-report.txt
                    git log --oneline -5 >> production-build-report.txt
                    echo "" >> production-build-report.txt
                    
                    echo "=== Packages Created ===" >> production-build-report.txt
                    find . -name "*.jar" -newer pom.xml -exec ls -lh {} \\; >> production-build-report.txt 2>/dev/null || echo "No packages found" >> production-build-report.txt
                    echo "" >> production-build-report.txt
                    
                    echo "=== Build Statistics ===" >> production-build-report.txt
                    echo "Total packages: $(find . -name "*.jar" -newer pom.xml | wc -l)" >> production-build-report.txt
                    echo "Build completed: $(date)" >> production-build-report.txt
                '''
                
                archiveArtifacts artifacts: 'production-build-report.txt', allowEmptyArchive: true
            }
        }
    }
    
    post {
        always {
            echo 'ðŸ Production pipeline completed!'
            sh 'rm -rf target/*/target || true'
        }
        success {
            echo "âœ… ${env.BUILD_TYPE} production build succeeded!"
            script {
                def version = params.VERSION_TAG ?: params.RELEASE_BRANCH
                def moduleCount = env.CHANGED_MODULES.split(',').length
                currentBuild.description = "âœ… ${env.BUILD_TYPE} build (${moduleCount} modules) - ${version}"
            }
        }
        failure {
            echo "âŒ ${env.BUILD_TYPE} production build failed!"
            script {
                currentBuild.description = "âŒ ${env.BUILD_TYPE} build failed at ${env.STAGE_NAME}"
                
                sh '''
                    echo "CRITICAL: Production build failure" > prod-failure.txt
                    echo "Build Type: ${BUILD_TYPE}" >> prod-failure.txt
                    echo "Modules: ${CHANGED_MODULES}" >> prod-failure.txt
                    echo "Stage: ${STAGE_NAME}" >> prod-failure.txt
                    echo "Build: ${BUILD_NUMBER}" >> prod-failure.txt
                    echo "Time: $(date)" >> prod-failure.txt
                '''
                archiveArtifacts artifacts: 'prod-failure.txt', allowEmptyArchive: true
            }
        }
    }
}
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git add .
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git a[Kcommit -m ""[KChnges [K[K[K[Kge[K[K[Kange K[KJemik[K[K[Knkij[Kns file"
[?2004l[production 950374dde9] Change Jenkins file
 2 files changed, 789 insertions(+), 109 deletions(-)
 create mode 100644 {
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git pusu[Kh origin production
[?2004lUsername for 'https://github.com': Nethnissanka
Password for 'https://Nethnissanka@github.com': 
Enumerating objects: 6, done.
Counting objects:  16% (1/6)Counting objects:  33% (2/6)Counting objects:  50% (3/6)Counting objects:  66% (4/6)Counting objects:  83% (5/6)Counting objects: 100% (6/6)Counting objects: 100% (6/6), done.
Delta compression using up to 4 threads
Compressing objects:  25% (1/4)Compressing objects:  50% (2/4)Compressing objects:  75% (3/4)Compressing objects: 100% (4/4)Compressing objects: 100% (4/4), done.
Writing objects:  25% (1/4)Writing objects:  50% (2/4)Writing objects:  75% (3/4)Writing objects: 100% (4/4)Writing objects: 100% (4/4), 5.74 KiB | 2.87 MiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas:   0% (0/3)[Kremote: Resolving deltas:  33% (1/3)[Kremote: Resolving deltas:  66% (2/3)[Kremote: Resolving deltas: 100% (3/3)[Kremote: Resolving deltas: 100% (3/3), completed with 2 local objects.[K
To https://github.com/Nethnissanka/thingsboard.git
   006ed0010d..950374dde9  production -> production
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ [K[nethmi@server1 thingsboard]$ [K[nethmi@server1 thingsboard]$ [K[nethmi@server1 thingsboard]$ [K[nethmi@server1 thingsboard]$ [K[nethmi@server1 thingsboard]$ [K[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git push origin productioncommit -m "Change Jenkins file"add .[Kcat Jenkinsfile [5Pmvn -- help[7Ptreemvn -- help[7Ptreecd Projects/thingsboard/tree[Kmvn -vcat pom.xml | more[12Pmvn -v[2Ptreecd Projects/thingsboard/tree[Kmvn -- helpcat Jenkinsfile [7Pgit add .commit -m "Change Jenkins file"[9Ppush origin production[Ksudi[Ko vi j[KJenkinsfile 
[?2004l[?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;49r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[49;1H[1m[37m[41mE325: ATTENTION[m
Found a swap file by the name ".Jenkinsfile.swp"
[10Cowned by: nethmi   dated: Fri Jun 20 05:58:35 2025
[9Cfile name: /home/nethmi/Projects/thingsboard/Jenkinsfile
[10Cmodified: YES
[9Cuser name: root   host name: server1
[8Cprocess ID: 111376
While opening file "Jenkinsfile"
[13Cdated: Mon Jun 23 03:47:36 2025
      NEWER than swap file!

(1) Another program may be editing the same file.  If this is the case,
    be careful not to end up with two different instances of the same
    file when making changes.  Quit, or continue with caution.
(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r Jenkinsfile"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file ".Jenkinsfile.swp"
    to avoid this message.

[32mSwap file ".Jenkinsfile.swp" already exists![m
[32m[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: [?25h[m[49;1H[K[?25l[49;1H"Jenkinsfile" 520L, 24230B[2;1Hâ–½[6n[2;1H  [3;1HPzz\[0%m[6n[3;1H           [1;1H[>c]10;?]11;?[1;21Hgit log --oneline -5 >> production-build-report.txt
                    echo "" >> production-build-report.txt[2;59H[K[3;1H                    [3;21H[K[4;21Hecho "=== Packages Created ===" >> production-build-report.txt[5;21Hfind . -name "*.jar" -newer pom.xml -exec ls -lh {} \\; >> production-build-report.txt 2>/dev/null || echo "No packages found" >> production-build-report.txt[6;21Hecho "" >> production-build-report.txt[8;21Hecho "=== Build Statistics ===" >> production-build-report.txt[9;21Hecho "Total packages: $(find . -name "*.jar" -newer pom.xml | wc -l)" >> production-build-report.txt[10;21Hecho "Build completed: $(date)" >> production-build-report.txt[11;17H'''[13;17HarchiveArtifacts artifacts: 'production-build-report.txt', allowEmptyArchive: true[14;13H}[15;9H}
    }[18;5Hpost {[19;9Halways {[20;13Hecho 'ðŸ[20;22HProduction pipeline completed!'[21;13Hsh 'rm -rf target/*/target || true'[22;9H}[23;9Hsuccess {[24;13Hecho "âœ…[24;22H${env.BUILD_TYPE} production build succeeded!"[25;13Hscript {[26;17Hdef version = params.VERSION_TAG ?: params.RELEASE_BRANCH[27;17Hdef moduleCount = env.CHANGED_MODULES.split(',').length
                currentBuild.description = "âœ…[28;48H${env.BUILD_TYPE} build (${moduleCount} modules) - ${version}"
            }[29;14H[K[30;9H}[30;11H[K[31;9Hfailure {[31;18H[K[32;11H  echo "âŒ[32;21H ${env.BUILD_TYPE} production build failed!"[33;10H   script {[33;21H[K[34;9H        currentBuild.description = "âŒ[34;48H${env.BUILD_TYPE} build failed at ${env.STAGE_NAME}"
                [35;17H[K[36;14H   sh '''[36;23H[K[37;7H              echo "CRITICAL: Production build failure" > prod-failure.txt[38;21Hecho "Build Type: ${BUILD_TYPE}" >> prod-failure.txt
                    echo "Modules: ${CHANGED_MODULES}" >> prod-failure.txt
                    echo "Stage: ${STAGE_NAME}" >> prod-failure.txt[40;68H[K[41;5H                echo "Build: ${BUILD_NUMBER}" >> prod-failure.txt
                    echo "Time: $(date)" >> prod-failure.txt
                '''[43;20H[K[44;5H            archiveArtifacts artifacts: 'prod-failure.txt', allowEmptyArchive: true
            }[45;14H[K[46;5H    }[46;10H[K[47;5H}
}[48;2H[K[49;172H520,1[9CBot[48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [47;1H[49;173H19[47;1H[?25h[?25l[49;162H~@k[47;1H[49;162H   [46;1H[49;174H8[46;1H[?25h[?25l[49;162H~@k[46;1H[49;162H   [45;1H[49;174H7[45;1H[?25h[?25l[49;162H~@k[45;1H[49;162H   [44;1H[49;174H6[44;1H[?25h[?25l[49;162H~@k[44;1H[49;162H   [43;1H[49;174H5[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [42;1H[49;174H4[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [41;1H[49;174H3[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [40;1H[49;174H2[40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [39;1H[49;174H1[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [38;1H[49;174H0[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [37;1H[49;173H09[37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [36;1H[49;174H8[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [35;1H[49;174H7[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [34;1H[49;174H6[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [33;1H[49;174H5[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [32;1H[49;174H4[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [31;1H[49;174H3[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [30;1H[49;174H2[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [29;1H[49;174H1[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [28;1H[49;174H0[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [27;1H[49;172H499[27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [26;1H[49;174H8[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [25;1H[49;174H7[25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [24;1H[49;174H6[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [23;1H[49;174H5[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [22;1H[49;174H4[22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [21;1H[49;174H3[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [20;1H[49;174H2[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [19;1H[49;174H1[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [18;1H[49;174H0[18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [17;1H[49;173H89[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [16;1H[49;174H8[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [15;1H[49;174H7[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [14;1H[49;174H6[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [13;1H[49;174H5[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [12;1H[49;174H4[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [11;1H[49;174H3[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [10;1H[49;174H2[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [9;1H[49;174H1[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [8;1H[49;174H0[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [7;1H[49;173H79[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [6;1H[49;174H8[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "=== Git Information ===" >> production-build-report.txt[49;1H[K[49;172H477,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H476,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "" >> production-build-report.txt[49;172H[K[49;172H475,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Deployed: ${DEPLOY_TO_PROD}" >> production-build-report.txt[49;172H[K[49;172H474,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Backup Created: ${CREATE_BACKUP}" >> production-build-report.txt[49;172H[K[49;172H473,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Build Date: $(date)" >> production-build-report.txt[49;172H[K[49;172H472,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Modules Built: ${CHANGED_MODULES}" >> production-build-report.txt[49;172H[K[49;172H471,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Branch/Tag: ${VERSION_TAG:-$RELEASE_BRANCH}" >> production-build-report.txt[49;172H[K[49;172H470,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Build Type: ${BUILD_TYPE}" >> production-build-report.txt[49;172H[K[49;172H469,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Build: ${BUILD_NUMBER}" >> production-build-report.txt[49;172H[K[49;172H468,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Environment: PRODUCTION" >> production-build-report.txt[49;172H[K[49;172H467,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "=== ThingsBoard PRODUCTION Build Report ===" > production-build-report.txt[49;172H[K[49;172H466,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh '''[49;172H[K[49;172H465,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ“Š[1;26HGenerating production build report...'[49;172H[K[49;172H464,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H463,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Build Report') {[49;172H[K[49;172H462,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H461,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H460,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H459,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H458,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H'''[49;172H[K[49;172H457,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HPRODUCTION deployment completed successfully"[49;172H[K[49;172H456,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H455,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfi[49;172H[K[49;172H454,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# scp thingsboard-full-*.tar.gz prod-server:/opt/thingsboard/releases/[49;172H[K[49;172H453,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Example: Deploy full release[49;172H[K[49;172H452,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Deploying full build..."[49;172H[K[49;172H451,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Helse[49;172H[K[49;172H450,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# done[49;172H[K[49;172H449,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H#     scp $module/target/*.jar prod-server:/opt/thingsboard/modules/$module/[49;172H[K[49;172H448,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H#     echo "Deploying module: $module"[49;172H[K[49;172H447,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# for module in ${CHANGED_MODULES//,/ }; do[49;172H[K[49;172H446,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Example: Deploy only changed services[49;172H[K[49;172H445,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Deploying incremental changes..."[49;172H[K[49;172H444,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif [ "${BUILD_TYPE}" = "INCREMENTAL" ]; then[49;172H[K[49;172H443,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H# Deploy only changed modules (customize as needed)[49;172H[K[49;172H442,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H441,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Build: ${BUILD_NUMBER}"[49;172H[K[49;172H440,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Modules: ${CHANGED_MODULES}"[49;172H[K[49;172H439,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Build Type: ${BUILD_TYPE}"[49;172H[K[49;172H438,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Target: ${DEPLOY_TARGET}"[49;172H[K[49;172H437,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "=== PRODUCTION DEPLOYMENT ==="[49;172H[K[49;172H436,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hsh '''[49;172H[K[49;172H435,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H434,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸš€[1;26HDeploying ${env.BUILD_TYPE} build to PRODUCTION..."[49;172H[K[49;172H433,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H432,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H431,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hexpression { params.DEPLOY_TO_PROD == true }[49;172H[K[49;172H430,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hwhen {[49;172H[K[49;172H429,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Deploy to Production') {[49;172H[K[49;172H428,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H427,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H426,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H425,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H424,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H423,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Herror('Production deployment aborted by [30m[43muser[m')[49;172H[K[49;172H422,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (approval == 'ABORT') {[49;172H[K[49;172H421,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H420,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H)[49;172H[K[49;172H419,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H][49;172H[K[49;172H418,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;36Hdescription: 'Confirm production deployment')[49;172H[K[49;172H417,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;36Hchoices: ['ABORT', 'DEPLOY'],[49;172H[K[49;172H416,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hchoice(name: 'DEPLOY_DECISION',[49;172H[K[49;172H415,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hparameters: [[49;172H[K[49;172H414,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hmessage: "ðŸš¨[1;38HDeploy ${env.BUILD_TYPE} build to PRODUCTION?",[49;172H[K[49;172H413,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef approval = input([49;172H[K[49;172H412,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H411,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H410,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H409,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hexpression { params.DEPLOY_TO_PROD == true }[49;172H[K[49;172H408,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hwhen {[49;172H[K[49;172H407,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Deployment Approval') {[49;172H[K[49;172H406,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H405,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H404,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H403,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H402,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H401,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HarchiveArtifacts artifacts: 'thingsboard-*-*.tar.gz', allowEmptyArchive: true[49;172H[K[49;172H400,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H399,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H'''[49;172H[K[49;172H398,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hrm -rf "$RELEASE_DIR"[49;172H[K[49;172H397,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H396,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfi[49;172H[K[49;172H395,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "â„¹ï¸[1;41HNo main application JARs to package"[49;172H[K[49;172H394,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Helse[49;172H[K[49;172H393,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "âœ…[1;42HRelease package created: ${RELEASE_DIR}.tar.gz"[49;172H[K[49;172H392,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Htar -czf "${RELEASE_DIR}.tar.gz" "$RELEASE_DIR"[49;172H[K[49;172H391,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif [ -n "$(ls -A $RELEASE_DIR/*.jar 2>/dev/null)" ]; then[49;172H[K[49;172H390,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H389,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Date: $(date)" >> "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H388,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Build: ${BUILD_NUMBER}" >> "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H387,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Modules: ${CHANGED_MODULES}" >> "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H386,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Build Type: ${BUILD_TYPE}" > "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H385,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Create release info[49;172H[K[49;172H384,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H383,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdone[49;172H[K[49;172H382,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hcp "$jar" "$RELEASE_DIR/" 2>/dev/null || true[49;172H[K[49;172H381,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfind . -name "thingsboard*.jar" -o -name "application*.jar" | grep -v test | while read jar; do[49;172H[K[49;172H380,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Copy main application JARs[49;172H[K[49;172H379,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H378,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hmkdir -p "$RELEASE_DIR"[49;172H[K[49;172H377,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HRELEASE_DIR="thingsboard-${BUILD_TYPE,,}-${BUILD_NUMBER}"[49;172H[K[49;172H376,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hsh '''[49;172H[K[49;172H375,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Create a release package for changed modules[49;172H[K[49;172H374,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H373,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;40Hfingerprint: true[49;172H[K[49;172H372,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;40HallowEmptyArchive: true,[49;172H[K[49;172H371,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;40Hexcludes: '**/target/*-tests.jar,**/target/*-sources.jar',[49;172H[K[49;172H370,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HarchiveArtifacts artifacts: '**/target/*.jar',[49;172H[K[49;172H369,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Archive all built packages[49;172H[K[49;172H368,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H367,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Archiving ${env.BUILD_TYPE.toLowerCase()} build packages"[49;172H[K[49;172H366,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (prodJars) {[49;172H[K[49;172H365,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H364,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H).trim()[49;172H[K[49;172H363,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HreturnStdout: true[49;172H[K[49;172H362,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hscript: "find . -name '*.jar' -newer pom.xml | grep -v test",[49;172H[K[49;172H361,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef prodJars = sh([49;172H[K[49;172H360,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H359,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ“[1;26HArchiving production packages...'[49;172H[K[49;172H358,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H357,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Archive Production Packages') {[49;172H[K[49;172H356,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H355,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H354,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H353,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17HarchiveArtifacts artifacts: 'production-backup-*.tar.gz', allowEmptyArchive: true[49;172H[K[49;172H352,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H351,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H'''[49;172H[K[49;172H350,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hrm -rf "$BACKUP_DIR"[49;172H[K[49;172H349,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H348,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H347,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "â„¹ï¸[1;33HNo packages to backup"[49;172H[K[49;172H346,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Helse[49;172H[K[49;172H345,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hls -lh "${BACKUP_DIR}.tar.gz"[49;172H[K[49;172H344,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HProduction backup created: ${BACKUP_DIR}.tar.gz"[49;172H[K[49;172H343,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Htar -czf "${BACKUP_DIR}.tar.gz" "$BACKUP_DIR"[49;172H[K[49;172H342,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ -n "$(ls -A $BACKUP_DIR 2>/dev/null)" ]; then[49;172H[K[49;172H341,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Create backup archive[49;172H[K[49;172H340,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H339,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H338,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdone[49;172H[K[49;172H337,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfi[49;172H[K[49;172H336,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfind "$module/target" -name "*.jar" -exec cp {} "$BACKUP_DIR/$module/" \\; 2>/dev/null || true[49;172H[K[49;172H335,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hmkdir -p "$BACKUP_DIR/$module"[49;172H[K[49;172H334,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif [ -d "$module/target" ]; then[49;172H[K[49;172H333,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor module in ${CHANGED_MODULES//,/ }; do[49;172H[K[49;172H332,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ -n "${CHANGED_MODULES}" ]; then[49;172H[K[49;172H331,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Copy packages for changed modules[49;172H[K[49;172H330,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H329,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hmkdir -p "$BACKUP_DIR"[49;172H[K[49;172H328,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21HBACKUP_DIR="production-backup-${BUILD_NUMBER}-$(date +%Y%m%d_%H%M%S)"[49;172H[K[49;172H327,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh '''[49;172H[K[49;172H326,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ’¾[1;26HCreating production backup...'[49;172H[K[49;172H325,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H324,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H323,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hexpression { params.CREATE_BACKUP == true }[49;172H[K[49;172H322,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hwhen {[49;172H[K[49;172H321,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Create Production Backup') {[49;172H[K[49;172H320,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H319,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H318,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H317,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H'''[49;172H[K[49;172H316,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H315,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HPackage validation completed"[49;172H[K[49;172H314,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Helse[49;172H[K[49;172H313,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "This might be normal for parent modules or configuration changes"[49;172H[K[49;172H312,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âŒ[1;34HWARNING: No packages found!"[49;172H[K[49;172H311,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ "$TOTAL_JARS" -eq 0 ]; then[49;172H[K[49;172H310,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H309,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Total packages created: $TOTAL_JARS"[49;172H[K[49;172H308,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21HTOTAL_JARS=$(find . -name "*.jar" -newer pom.xml 2>/dev/null | wc -l)[49;172H[K[49;172H307,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Overall validation[49;172H[K[49;172H306,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H305,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H304,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdone[49;172H[K[49;172H303,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfi[49;172H[K[49;172H302,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "  âš ï¸[1;43H$module: No packages found (might be parent module)"[49;172H[K[49;172H301,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Helse[49;172H[K[49;172H300,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfind "$module" -name "*.jar" -exec ls -lh {} \\; 2>/dev/null | head -3[49;172H[K[49;172H299,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "  âœ…[1;44H$module: $MODULE_JARS packages found"[49;172H[K[49;172H298,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif [ "$MODULE_JARS" -gt 0 ]; then[49;172H[K[49;172H297,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HMODULE_JARS=$(find "$module" -name "*.jar" 2>/dev/null | wc -l)[49;172H[K[49;172H296,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Checking module: $module"[49;172H[K[49;172H295,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor module in ${CHANGED_MODULES//,/ }; do[49;172H[K[49;172H294,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ -n "$CHANGED_MODULES" ]; then[49;172H[K[49;172H293,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21HCHANGED_MODULES="${CHANGED_MODULES}"[49;172H[K[49;172H292,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Check if packages exist for changed modules[49;172H[K[49;172H291,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H290,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "=== Production Package Validation ==="[49;172H[K[49;172H289,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh '''[49;172H[K[49;172H288,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'âœ…[1;26HValidating built packages...'[49;172H[K[49;172H287,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H286,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Package Validation') {[49;172H[K[49;172H285,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H284,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H283,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H282,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H281,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H280,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H'''[49;172H[K[49;172H279,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfind . -name "*.jar" -newer pom.xml 2>/dev/null | head -15[49;172H[K[49;172H278,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Packages created:"[49;172H[K[49;172H277,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "=== Build Process Completed ==="[49;172H[K[49;172H276,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hsh '''[49;172H[K[49;172H275,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H274,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H273,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H"""[49;172H[K[49;172H272,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-T 2C[49;172H[K[49;172H271,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.debug=false \[49;172H[K[49;172H270,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.optimize=true \[49;172H[K[49;172H269,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Denforcer.skip=false \[49;172H[K[49;172H268,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dspotbugs.skip=false \[49;172H[K[49;172H267,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dcheckstyle.skip=false \[49;172H[K[49;172H266,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.source.skip=true \[49;172H[K[49;172H265,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.javadoc.skip=true \[49;172H[K[49;172H264,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.test.skip=true \[49;172H[K[49;172H263,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-DskipTests \[49;172H[K[49;172H262,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-am \[49;172H[K[49;172H261,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-pl ${moduleList} \[49;172H[K[49;172H260,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-P${BUILD_PROFILE} \[49;172H[K[49;172H259,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hmvn package \[49;172H[K[49;172H258,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33H# Build changed modules and their dependents[49;172H[K[49;172H257,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H256,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "Building modules: ${moduleList}"[49;172H[K[49;172H255,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hsh """[49;172H[K[49;172H254,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdef moduleList = modules.join(',')[49;172H[K[49;172H253,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Build modules with dependencies[49;172H[K[49;172H252,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H251,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H250,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "=== INCREMENTAL PRODUCTION Build ==="[49;172H[K[49;172H249,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Incremental build[49;172H[K[49;172H248,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H} else {[49;172H[K[49;172H247,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H'''[49;172H[K[49;172H246,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-T 2C[49;172H[K[49;172H245,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.debug=false \[49;172H[K[49;172H244,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.optimize=true \[49;172H[K[49;172H243,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Denforcer.skip=false \[49;172H[K[49;172H242,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dspotbugs.skip=false \[49;172H[K[49;172H241,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dcheckstyle.skip=false \[49;172H[K[49;172H240,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.source.skip=true \[49;172H[K[49;172H239,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.javadoc.skip=true \[49;172H[K[49;172H238,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.test.skip=true \[49;172H[K[49;172H237,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-DskipTests \[49;172H[K[49;172H236,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-P${BUILD_PROFILE} \[49;172H[K[49;172H235,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hmvn package \[49;172H[K[49;172H234,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "=== FULL PRODUCTION Build ==="[49;172H[K[49;172H233,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hsh '''[49;172H[K[49;172H232,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Full build[49;172H[K[49;172H231,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H230,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hscript {[49;172H[K[49;172H229,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Htimeout(time: 60, unit: 'MINUTES') {[49;172H[K[49;172H228,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ“¦[1;26HBuilding ${env.BUILD_TYPE} - ${env.CHANGED_MODULES.split(',').length} modules..."[49;172H[K[49;172H227,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H226,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Incremental Production Build') {[49;172H[K[49;172H225,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H224,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H223,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H222,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H221,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H220,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H219,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hsh "mvn clean -q -f ${module}/pom.xml || true"[49;172H[K[49;172H218,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor (module in modules) {[49;172H[K[49;172H217,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H216,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Clean only changed modules[49;172H[K[49;172H215,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H214,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hsh 'mvn clean -q -T 2C'[49;172H[K[49;172H213,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H212,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H211,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ§¹[1;26HCleaning workspace for production build...'[49;172H[K[49;172H210,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H209,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Clean & Prepare') {[49;172H[K[49;172H208,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H207,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H206,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H205,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H204,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H203,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Herror("âŒ[1;35HProduction builds only allowed from master, main, or release/* branches")[49;172H[K[49;172H202,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H201,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HBuilding from approved branch: ${currentBranch}"[49;172H[K[49;172H200,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[49;172H[K[49;172H199,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HBuilding from version tag: ${params.VERSION_TAG}"[49;172H[K[49;172H198,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H197,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H196,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef currentBranch = params.RELEASE_BRANCH[49;172H[K[49;172H195,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef allowedBranches = ['master', 'main'][49;172H[K[49;172H194,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H193,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ”[1;26HRunning production security validations...'[49;172H[K[49;172H192,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H191,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Security Check') {[49;172H[K[49;172H190,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H189,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H188,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H187,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'git log --oneline -3'[49;172H[K[49;172H186,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'mvn -version'[49;172H[K[49;172H185,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'java -version'[49;172H[K[49;172H184,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Deploy to prod: ${params.DEPLOY_TO_PROD}"[49;172H[K[49;172H183,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Create backup: ${params.CREATE_BACKUP}"[49;172H[K[49;172H182,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Modules to build: ${env.CHANGED_MODULES}"[49;172H[K[49;172H181,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Build Type: ${env.BUILD_TYPE}"[49;172H[K[49;172H180,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Build number: ${env.BUILD_NUMBER}"[49;172H[K[49;172H179,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"[49;172H[K[49;172H178,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Environment: ${ENV_NAME}"[49;172H[K[49;172H177,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ­[1;26HPRODUCTION Build Information:"[49;172H[K[49;172H176,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H175,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Build Info') {[49;172H[K[49;172H174,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H173,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H172,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H171,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H170,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[49;172H[K[49;172H169,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.ALL_MODULES = allModules.join(',')[49;172H[K[49;172H168,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.CHANGED_MODULES = changedModules.join(',')[49;172H[K[49;172H167,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Store in environment for later stages[49;172H[K[49;172H166,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H165,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "ðŸ“Š[1;30HTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"[49;172H[K[49;172H164,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "ðŸ“‹[1;30HModules to build: ${changedModules.join(', ')}"[49;172H[K[49;172H163,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H162,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H161,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedModules = allModules[49;172H[K[49;172H160,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "ðŸ”„[1;34HFull build requested or no specific changes detected"[49;172H[K[49;172H159,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {[49;172H[K[49;172H158,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Force full build if requested or if no changes detected[49;172H[K[49;172H157,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H156,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H155,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedModules = affectedModules.toList()[49;172H[K[49;172H154,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H153,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H152,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H}[49;172H[K[49;172H151,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hbreak[49;172H[K[49;172H150,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HaffectedModules.addAll(allModules)[49;172H[K[49;172H149,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "Core file changed: ${file} - will trigger full build"[49;172H[K[49;172H148,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.contains('config')) {[49;172H[K[49;172H147,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.contains('parent') ||[49;172H[K[49;172H146,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.startsWith('shared/') ||[49;172H[K[49;172H145,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.startsWith('common/') ||[49;172H[K[49;172H144,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif (file.equals('pom.xml') ||[49;172H[K[49;172H143,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Also check for common files that affect all modules[49;172H[K[49;172H142,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H141,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H}[49;172H[K[49;172H140,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33H}[49;172H[K[49;172H139,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37HaffectedModules.add(module)[49;172H[K[49;172H138,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.contains("\\${module}\\")) {[49;172H[K[49;172H137,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.contains("/${module}/") ||[49;172H[K[49;172H136,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.startsWith("${module}\\") ||[49;172H[K[49;172H135,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hif (file.startsWith("${module}/") ||[49;172H[K[49;172H134,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfor (module in allModules) {[49;172H[K[49;172H133,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Check if file belongs to a module[49;172H[K[49;172H132,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor (file in files) {[49;172H[K[49;172H131,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H130,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef affectedModules = [] as Set[49;172H[K[49;172H129,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef files = changedFiles.split('\n')[49;172H[K[49;172H128,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (changedFiles) {[49;172H[K[49;172H127,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Determine which modules are affected[49;172H[K[49;172H126,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H125,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Changed files: ${changedFiles}"[49;172H[K[49;172H124,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H123,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H122,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H121,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H120,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H119,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H118,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H117,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H116,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H115,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H114,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H113,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (lastBuildCommit) {[49;172H[K[49;172H112,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef changedFiles = ""[49;172H[K[49;172H111,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Get changed files[49;172H[K[49;172H110,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H109,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H108,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H107,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H106,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git log --format='%H' -n 1 HEAD~5",[49;172H[K[49;172H105,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HlastBuildCommit = sh([49;172H[K[49;172H104,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (!lastBuildCommit) {[49;172H[K[49;172H103,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// If no previous build, check recent commits[49;172H[K[49;172H102,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H101,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H100,1[9C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "No previous successful build found, will check last 5 commits"[49;172H[K[49;172H99,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} catch (Exception e) {[49;172H[K[49;172H98,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H97,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H).trim()[49;172H[K[49;172H96,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HreturnStdout: true[49;172H[K[49;172H95,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hscript: "git log --format='%H' -n 1 --before='${lastBuild.getTime()}'",[49;172H[K[49;172H94,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HlastBuildCommit = sh([49;172H[K[49;172H93,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif (lastBuild) {[49;172H[K[49;172H92,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef lastBuild = currentBuild.getPreviousSuccessfulBuild()[49;172H[K[49;172H91,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Try to get last successful build commit[49;172H[K[49;172H90,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Htry {[49;172H[K[49;172H89,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef lastBuildCommit = ""[49;172H[K[49;172H88,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Get changed files since last successful build[49;172H[K[49;172H87,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H86,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H85,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H84,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HallModules.add(moduleName)[49;172H[K[49;172H83,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdef moduleName = pomFile.replaceAll('./([^/]+)/pom.xml', '$1')[49;172H[K[49;172H82,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif (pomFile != './pom.xml') {[49;172H[K[49;172H81,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfor (pomFile in pomFiles) {[49;172H[K[49;172H80,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Extract module names from pom files[49;172H[K[49;172H79,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H78,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H).trim().split('\n')[49;172H[K[49;172H77,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HreturnStdout: true[49;172H[K[49;172H76,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hscript: "find . -name 'pom.xml' -not -path './target/*' | head -20",[49;172H[K[49;172H75,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef pomFiles = sh([49;172H[K[49;172H74,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Get all Maven modules[49;172H[K[49;172H73,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H72,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef allModules = [][49;172H[K[49;172H71,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef changedModules = [][49;172H[K[49;172H70,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H69,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ”[1;26HDetecting changed modules since last build...'[49;172H[K[49;172H68,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H67,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Detect Changed Modules') {[49;172H[K[49;172H66,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H65,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H64,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H63,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H62,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H61,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H60,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hbranches: [[name: "*/${params.RELEASE_BRANCH}"]],[49;172H[K[49;172H59,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H58,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H57,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H56,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hbranches: [[name: "refs/tags/${params.VERSION_TAG}"]],[49;172H[K[49;172H55,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H54,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H53,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H52,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ”’[1;26HChecking out source code for PRODUCTION build..."[49;172H[K[49;172H51,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H50,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Checkout') {[49;172H[K[49;172H49,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5Hstages {[49;172H[K[49;172H48,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H47,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5H}[49;172H[K[49;172H46,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H45,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Deploy to production? (Requires approval)'[49;172H[K[49;172H44,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13HdefaultValue: false,[49;172H[K[49;172H43,1[11C7%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hname: 'DEPLOY_TO_PROD',[49;172H[K[49;172H42,1[11C7%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HbooleanParam([49;172H[K[49;172H41,1[11C7%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H40,1[11C7%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Create backup before production deployment?'[49;172H[K[49;172H39,1[11C6%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13HdefaultValue: true,[49;172H[K[49;172H38,1[11C6%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hname: 'CREATE_BACKUP',[49;172H[K[49;172H37,1[11C6%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HbooleanParam([49;172H[K[49;172H36,1[11C6%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H35,1[11C6%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Force full build instead of incremental?'[49;172H[K[49;172H34,1[11C5%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13HdefaultValue: false,[49;172H[K[49;172H33,1[11C5%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hname: 'FORCE_FULL_BUILD',[49;172H[K[49;172H32,1[11C5%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HbooleanParam([49;172H[K[49;172H31,1[11C5%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H30,1[11C5%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Version tag for this production release (e.g., v1.2.3)'[49;172H[K[49;172H29,1[11C4%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13HdefaultValue: '',[49;172H[K[49;172H28,1[11C4%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hname: 'VERSION_TAG',[49;172H[K[49;172H27,1[11C4%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstring([49;172H[K[49;172H26,1[11C4%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H25,1[11C4%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Select release branch for production build'[49;172H[K[49;172H24,1[11C3%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hchoices: ['master', 'release/*'],[49;172H[K[49;172H23,1[11C3%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hname: 'RELEASE_BRANCH',[49;172H[K[49;172H22,1[11C3%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hchoice([49;172H[K[49;172H21,1[11C3%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5Hparameters {[49;172H[K[49;172H20,1[11C2%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H19,1[11C2%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5H}[49;172H[K[49;172H18,1[11C2%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HBUILD_PROFILE = 'prod'[49;172H[K[49;172H17,1[11C2%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HDEPLOY_TARGET = 'prod-server'[49;172H[K[49;172H16,1[11C2%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HENV_NAME = 'PRODUCTION'[49;172H[K[49;172H15,1[11C1%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H14,1[11C1%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HPATH = "${env.PATH}:/usr/bin"[49;172H[K[49;172H13,1[11C1%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HM2_HOME = '/usr/share/maven'[49;172H[K[49;172H12,1[11C1%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HJAVA_HOME = '/usr/lib/jvm/java-17-openjdk-17.0.15.0.6-2.el9.x86_64'[49;172H[K[49;172H11,1[11C1%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9HMAVEN_OPTS = '-Xmx3072m -XX:+UseG1GC'[49;172H[K[49;172H10,1[11C0%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5Henvironment {[49;172H[K[49;172H9,1[12C0%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H8,1[12C0%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5Hagent any[49;172H[K[49;172H7,1[12C0%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1Hpipeline {[49;172H[K[49;172H6,1[11CTop[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [5;1H[49;172H5[5;1H[?25h[?25l[49;162H~@k[5;1H[49;162H   [4;1H[49;172H4[4;1H[?25h[?25l[49;162H~@k[4;1H[49;162H   [3;1H[49;172H3[3;1H[?25h[?25l[49;162H~@k[3;1H[49;162H   [2;1H[49;172H2[2;1H[?25h[?25l[49;162H~@k[2;1H[49;162H   [1;1H[49;172H1[1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [2;1H[49;172H2[2;1H[?25h[?25l[49;162H~@k[2;1H[49;162H   [3;1H[49;172H3[3;1H[?25h[?25l[49;162H~@k[3;1H[49;162H   [4;1H[49;172H4[4;1H[?25h[?25l[49;162H~@k[4;1H[49;162H   [5;1H[49;172H5[5;1H[?25h[?25l[49;162H~@k[5;1H[49;162H   [6;1H[49;172H6[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [7;1H[49;172H7[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [8;1H[49;172H8[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [9;1H[49;172H9[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [10;1H[49;172H10,1[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [11;1H[49;173H1[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [12;1H[49;173H2[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [13;1H[49;173H3[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [14;1H[49;173H4[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [15;1H[49;173H5[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [16;1H[49;173H6[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [17;1H[49;173H7[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [18;1H[49;173H8[18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [19;1H[49;173H9[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [20;1H[49;172H20[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [21;1H[49;173H1[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [22;1H[49;173H2[22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [23;1H[49;173H3[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [24;1H[49;173H4[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [25;1H[49;173H5[25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [26;1H[49;173H6[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [27;1H[49;173H7[27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [28;1H[49;173H8[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [29;1H[49;173H9[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [30;1H[49;172H30[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [31;1H[49;173H1[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [32;1H[49;173H2[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [33;1H[49;173H3[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [34;1H[49;173H4[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [35;1H[49;173H5[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [36;1H[49;173H6[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [37;1H[49;173H7[37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [38;1H[49;173H8[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [39;1H[49;173H9[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [40;1H[49;172H40[40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [41;1H[49;173H1[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [42;1H[49;173H2[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [43;1H[49;173H3[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H44,1[11C0%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hbranches: [[name: "refs/tags/${params.VERSION_TAG}"]],[49;172H[K[49;172H45,1[11C0%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H46,1[11C0%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} else {[49;172H[K[49;172H47,1[11C0%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H48,1[11C1%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hbranches: [[name: "*/${params.RELEASE_BRANCH}"]],[49;172H[K[49;172H49,1[11C1%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H50,1[11C1%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H51,1[11C1%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H52,1[11C1%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H53,1[11C2%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H54,1[11C2%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H55,1[11C2%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9Hstage('Detect Changed Modules') {[49;172H[K[49;172H56,1[11C2%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H57,1[11C2%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho 'ðŸ”[48;26HDetecting changed modules since last build...'[49;172H[K[49;172H58,1[11C3%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hscript {[49;172H[K[49;172H59,1[11C3%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef changedModules = [][49;172H[K[49;172H60,1[11C3%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef allModules = [][49;172H[K[49;172H61,1[11C3%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H62,1[11C4%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Get all Maven modules[49;172H[K[49;172H63,1[11C4%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef pomFiles = sh([49;172H[K[49;172H64,1[11C4%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hscript: "find . -name 'pom.xml' -not -path './target/*' | head -20",[49;172H[K[49;172H65,1[11C4%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HreturnStdout: true[49;172H[K[49;172H66,1[11C4%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H).trim().split('\n')[49;172H[K[49;172H67,1[11C5%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H68,1[11C5%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Extract module names from pom files[49;172H[K[49;172H69,1[11C5%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hfor (pomFile in pomFiles) {[49;172H[K[49;172H70,1[11C5%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hif (pomFile != './pom.xml') {[49;172H[K[49;172H71,1[11C5%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hdef moduleName = pomFile.replaceAll('./([^/]+)/pom.xml', '$1')[49;172H[K[49;172H72,1[11C6%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HallModules.add(moduleName)[49;172H[K[49;172H73,1[11C6%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H74,1[11C6%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H75,1[11C6%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H76,1[11C6%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Get changed files since last successful build[49;172H[K[49;172H77,1[11C7%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef lastBuildCommit = ""[49;172H[K[49;172H78,1[11C7%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Htry {[49;172H[K[49;172H79,1[11C7%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H// Try to get last successful build commit[49;172H[K[49;172H80,1[11C7%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hdef lastBuild = currentBuild.getPreviousSuccessfulBuild()[49;172H[K[49;172H81,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hif (lastBuild) {[49;172H[K[49;172H82,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HlastBuildCommit = sh([49;172H[K[49;172H83,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hscript: "git log --format='%H' -n 1 --before='${lastBuild.getTime()}'",[49;172H[K[49;172H84,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33HreturnStdout: true[49;172H[K[49;172H85,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H).trim()[49;172H[K[49;172H86,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H87,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} catch (Exception e) {[49;172H[K[49;172H88,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hecho "No previous successful build found, will check last 5 commits"[49;172H[K[49;172H89,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H90,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H91,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// If no previous build, check recent commits[49;172H[K[49;172H92,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (!lastBuildCommit) {[49;172H[K[49;172H93,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HlastBuildCommit = sh([49;172H[K[49;172H94,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hscript: "git log --format='%H' -n 1 HEAD~5",[49;172H[K[49;172H95,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[49;172H[K[49;172H96,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H).trim()[49;172H[K[49;172H97,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H98,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H99,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Get changed files[49;172H[K[49;172H100,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef changedFiles = ""[49;172H[K[49;172H101,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (lastBuildCommit) {[49;172H[K[49;172H102,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedFiles = sh([49;172H[K[49;172H103,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H104,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[49;172H[K[49;172H105,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H).trim()[49;172H[K[49;172H106,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} else {[49;172H[K[49;172H107,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedFiles = sh([49;172H[K[49;172H108,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hscript: "git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H109,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[49;172H[K[49;172H110,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H).trim()[49;172H[K[49;172H111,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H112,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H113,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hecho "Changed files: ${changedFiles}"[49;172H[K[49;172H114,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H115,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Determine which modules are affected[49;172H[K[49;172H116,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (changedFiles) {[49;172H[K[49;172H117,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hdef files = changedFiles.split('\n')[49;172H[K[49;172H118,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hdef affectedModules = [] as Set[49;172H[K[49;172H119,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H120,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hfor (file in files) {[49;172H[K[49;172H121,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H// Check if file belongs to a module[49;172H[K[49;172H122,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hfor (module in allModules) {[49;172H[K[49;172H123,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hif (file.startsWith("${module}/") ||[49;172H[K[49;172H124,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37Hfile.startsWith("${module}\\") ||[49;172H[K[49;172H125,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37Hfile.contains("/${module}/") ||[49;172H[K[49;172H126,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37Hfile.contains("\\${module}\\")) {[49;172H[K[49;172H127,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37HaffectedModules.add(module)[49;172H[K[49;172H128,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33H}[49;172H[K[49;172H129,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H}[49;172H[K[49;172H130,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H131,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H// Also check for common files that affect all modules[49;172H[K[49;172H132,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hif (file.equals('pom.xml') ||[49;172H[K[49;172H133,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('common/') ||[49;172H[K[49;172H134,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('shared/') ||[49;172H[K[49;172H135,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.contains('parent') ||[49;172H[K[49;172H136,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.contains('config')) {[49;172H[K[49;172H137,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hecho "Core file changed: ${file} - will trigger full build"[49;172H[K[49;172H138,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33HaffectedModules.addAll(allModules)[49;172H[K[49;172H139,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hbreak[49;172H[K[49;172H140,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H}[49;172H[K[49;172H141,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H142,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H143,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedModules = affectedModules.toList()[49;172H[K[49;172H144,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H145,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H146,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Force full build if requested or if no changes detected[49;172H[K[49;172H147,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {[49;172H[K[49;172H148,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hecho "ðŸ”„[48;34HFull build requested or no specific changes detected"[49;172H[K[49;172H149,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedModules = allModules[49;172H[K[49;172H150,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H151,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H152,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hecho "ðŸ“‹[48;30HModules to build: ${changedModules.join(', ')}"[49;172H[K[49;172H153,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hecho "ðŸ“Š[48;30HTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"[49;172H[K[49;172H154,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H155,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Store in environment for later stages[49;172H[K[49;172H156,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Henv.CHANGED_MODULES = changedModules.join(',')[49;172H[K[49;172H157,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Henv.ALL_MODULES = allModules.join(',')[49;172H[K[49;172H158,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[49;172H[K[49;172H159,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H160,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H161,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H162,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H163,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9Hstage('Production Build Info') {[49;172H[K[49;172H164,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H165,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "ðŸ­[48;26HPRODUCTION Build Information:"[49;172H[K[49;172H166,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Environment: ${ENV_NAME}"[49;172H[K[49;172H167,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"[49;172H[K[49;172H168,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Build number: ${env.BUILD_NUMBER}"[49;172H[K[49;172H169,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Build Type: ${env.BUILD_TYPE}"[49;172H[K[49;172H170,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Modules to build: ${env.CHANGED_MODULES}"[49;172H[K[49;172H171,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Create backup: ${params.CREATE_BACKUP}"[49;172H[K[49;172H172,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Deploy to prod: ${params.DEPLOY_TO_PROD}"[49;172H[K[49;172H173,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hsh 'java -version'[49;172H[K[49;172H174,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hsh 'mvn -version'[49;172H[K[49;172H175,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hsh 'git log --oneline -3'[49;172H[K[49;172H176,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H177,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H178,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H179,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9Hstage('Production Security Check') {[49;172H[K[49;172H180,1[9C29%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H181,1[9C29%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho 'ðŸ”[48;26HRunning production security validations...'[49;172H[K[49;172H182,1[9C29%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hscript {[49;172H[K[49;172H183,1[9C29%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef allowedBranches = ['master', 'main'][49;172H[K[49;172H184,1[9C29%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef currentBranch = params.RELEASE_BRANCH[49;172H[K[49;172H185,1[9C30%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H186,1[9C30%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H187,1[9C30%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HBuilding from version tag: ${params.VERSION_TAG}"[49;172H[K[49;172H188,1[9C30%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[49;172H[K[49;172H189,1[9C30%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HBuilding from approved branch: ${currentBranch}"[49;172H[K[49;172H190,1[9C31%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} else {[49;172H[K[49;172H191,1[9C31%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Herror("âŒ[48;35HProduction builds only allowed from master, main, or release/* branches")[49;172H[K[49;172H192,1[9C31%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H193,1[9C31%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H194,1[9C31%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H195,1[9C32%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H196,1[9C32%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H197,1[9C32%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9Hstage('Production Clean & Prepare') {[49;172H[K[49;172H198,1[9C32%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H199,1[9C33%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho 'ðŸ§¹[48;26HCleaning workspace for production build...'[49;172H[K[49;172H200,1[9C33%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hscript {[49;172H[K[49;172H201,1[9C33%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H202,1[9C33%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hsh 'mvn clean -q -T 2C'[49;172H[K[49;172H203,1[9C33%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} else {[49;172H[K[49;172H204,1[9C34%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H// Clean only changed modules[49;172H[K[49;172H205,1[9C34%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H206,1[9C34%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hfor (module in modules) {[49;172H[K[49;172H207,1[9C34%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hsh "mvn clean -q -f ${module}/pom.xml || true"[49;172H[K[49;172H208,1[9C34%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H209,1[9C35%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H210,1[9C35%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H211,1[9C35%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H212,1[9C35%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H213,1[9C36%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H214,1[9C36%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9Hstage('Incremental Production Build') {[49;172H[K[49;172H215,1[9C36%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H216,1[9C36%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "ðŸ“¦[48;26HBuilding ${env.BUILD_TYPE} - ${env.CHANGED_MODULES.split(',').length} modules..."[49;172H[K[49;172H217,1[9C36%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Htimeout(time: 60, unit: 'MINUTES') {[49;172H[K[49;172H218,1[9C37%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hscript {[49;172H[K[49;172H219,1[9C37%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H220,1[9C37%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H// Full build[49;172H[K[49;172H221,1[9C37%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hsh '''[49;172H[K[49;172H222,1[9C37%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hecho "=== FULL PRODUCTION Build ==="[49;172H[K[49;172H223,1[9C38%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hmvn package \[49;172H[K[49;172H224,1[9C38%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-P${BUILD_PROFILE} \[49;172H[K[49;172H225,1[9C38%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-DskipTests \[49;172H[K[49;172H226,1[9C38%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.test.skip=true \[49;172H[K[49;172H227,1[9C38%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.javadoc.skip=true \[49;172H[K[49;172H228,1[9C39%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.source.skip=true \[49;172H[K[49;172H229,1[9C39%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dcheckstyle.skip=false \[49;172H[K[49;172H230,1[9C39%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dspotbugs.skip=false \[49;172H[K[49;172H231,1[9C39%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Denforcer.skip=false \[49;172H[K[49;172H232,1[9C40%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.compiler.optimize=true \[49;172H[K[49;172H233,1[9C40%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.compiler.debug=false \[49;172H[K[49;172H234,1[9C40%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-T 2C[49;172H[K[49;172H235,1[9C40%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H'''[49;172H[K[49;172H236,1[9C40%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H} else {[49;172H[K[49;172H237,1[9C41%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H// Incremental build[49;172H[K[49;172H238,1[9C41%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hecho "=== INCREMENTAL PRODUCTION Build ==="[49;172H[K[49;172H239,1[9C41%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H240,1[9C41%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H241,1[9C41%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H// Build modules with dependencies[49;172H[K[49;172H242,1[9C42%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hdef moduleList = modules.join(',')[49;172H[K[49;172H243,1[9C42%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hsh """[49;172H[K[49;172H244,1[9C42%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hecho "Building modules: ${moduleList}"[49;172H[K[49;172H245,1[9C42%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H246,1[9C43%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33H# Build changed modules and their dependents[49;172H[K[49;172H247,1[9C43%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hmvn package \[49;172H[K[49;172H248,1[9C43%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-P${BUILD_PROFILE} \[49;172H[K[49;172H249,1[9C43%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-pl ${moduleList} \[49;172H[K[49;172H250,1[9C43%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-am \[49;172H[K[49;172H251,1[9C44%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-DskipTests \[49;172H[K[49;172H252,1[9C44%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.test.skip=true \[49;172H[K[49;172H253,1[9C44%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.javadoc.skip=true \[49;172H[K[49;172H254,1[9C44%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dmaven.source.skip=true \[49;172H[K[49;172H255,1[9C44%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37H-Dcheckstyle.skip=false \[49;172H[K[49;172H256,1[9C45%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [42;1H[49;174H5[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [41;1H[49;174H4[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [40;1H[49;174H3[40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [39;1H[49;174H2[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [38;1H[49;174H1[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [37;1H[49;174H0[37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [36;1H[49;173H49[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [35;1H[49;174H8[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [34;1H[49;174H7[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [33;1H[49;174H6[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [32;1H[49;174H5[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [31;1H[49;174H4[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [30;1H[49;174H3[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [29;1H[49;174H2[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [28;1H[49;174H1[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [27;1H[49;174H0[27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [26;1H[49;173H39[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [25;1H[49;174H8[25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [24;1H[49;174H7[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [23;1H[49;174H6[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [22;1H[49;174H5[22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [21;1H[49;174H4[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [20;1H[49;174H3[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [19;1H[49;174H2[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [18;1H[49;174H1[18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [17;1H[49;174H0[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [16;1H[49;173H29[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [15;1H[49;174H8[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [14;1H[49;174H7[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [13;1H[49;174H6[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [12;1H[49;174H5[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [11;1H[49;174H4[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [10;1H[49;174H3[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [9;1H[49;174H2[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [8;1H[49;174H1[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [7;1H[49;174H0[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [6;1H[49;173H19[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hsh "mvn clean -q -f ${module}/pom.xml || true"[49;172H[K[49;172H218,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor (module in modules) {[49;172H[K[49;172H217,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H216,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Clean only changed modules[49;172H[K[49;172H215,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H214,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hsh 'mvn clean -q -T 2C'[49;172H[K[49;172H213,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H212,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H211,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ§¹[1;26HCleaning workspace for production build...'[49;172H[K[49;172H210,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H209,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Clean & Prepare') {[49;172H[K[49;172H208,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H207,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H206,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H205,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H204,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H203,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Herror("âŒ[1;35HProduction builds only allowed from master, main, or release/* branches")[49;172H[K[49;172H202,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H201,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HBuilding from approved branch: ${currentBranch}"[49;172H[K[49;172H200,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[49;172H[K[49;172H199,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HBuilding from version tag: ${params.VERSION_TAG}"[49;172H[K[49;172H198,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H197,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H196,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef currentBranch = params.RELEASE_BRANCH[49;172H[K[49;172H195,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef allowedBranches = ['master', 'main'][49;172H[K[49;172H194,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H193,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ”[1;26HRunning production security validations...'[49;172H[K[49;172H192,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H191,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Security Check') {[49;172H[K[49;172H190,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H189,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H188,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H187,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'git log --oneline -3'[49;172H[K[49;172H186,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'mvn -version'[49;172H[K[49;172H185,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'java -version'[49;172H[K[49;172H184,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Deploy to prod: ${params.DEPLOY_TO_PROD}"[49;172H[K[49;172H183,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Create backup: ${params.CREATE_BACKUP}"[49;172H[K[49;172H182,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Modules to build: ${env.CHANGED_MODULES}"[49;172H[K[49;172H181,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Build Type: ${env.BUILD_TYPE}"[49;172H[K[49;172H180,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Build number: ${env.BUILD_NUMBER}"[49;172H[K[49;172H179,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"[49;172H[K[49;172H178,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Environment: ${ENV_NAME}"[49;172H[K[49;172H177,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ­[1;26HPRODUCTION Build Information:"[49;172H[K[49;172H176,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H175,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Build Info') {[49;172H[K[49;172H174,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H173,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H172,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H171,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H170,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[49;172H[K[49;172H169,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.ALL_MODULES = allModules.join(',')[49;172H[K[49;172H168,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.CHANGED_MODULES = changedModules.join(',')[49;172H[K[49;172H167,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Store in environment for later stages[49;172H[K[49;172H166,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H165,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "ðŸ“Š[1;30HTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"[49;172H[K[49;172H164,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "ðŸ“‹[1;30HModules to build: ${changedModules.join(', ')}"[49;172H[K[49;172H163,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H162,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H161,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedModules = allModules[49;172H[K[49;172H160,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "ðŸ”„[1;34HFull build requested or no specific changes detected"[49;172H[K[49;172H159,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {[49;172H[K[49;172H158,1[9C32%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Force full build if requested or if no changes detected[49;172H[K[49;172H157,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H156,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H155,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedModules = affectedModules.toList()[49;172H[K[49;172H154,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H153,1[9C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H152,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H}[49;172H[K[49;172H151,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hbreak[49;172H[K[49;172H150,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HaffectedModules.addAll(allModules)[49;172H[K[49;172H149,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "Core file changed: ${file} - will trigger full build"[49;172H[K[49;172H148,1[9C30%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.contains('config')) {[49;172H[K[49;172H147,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.contains('parent') ||[49;172H[K[49;172H146,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.startsWith('shared/') ||[49;172H[K[49;172H145,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfile.startsWith('common/') ||[49;172H[K[49;172H144,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif (file.equals('pom.xml') ||[49;172H[K[49;172H143,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Also check for common files that affect all modules[49;172H[K[49;172H142,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H141,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H}[49;172H[K[49;172H140,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33H}[49;172H[K[49;172H139,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37HaffectedModules.add(module)[49;172H[K[49;172H138,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.contains("\\${module}\\")) {[49;172H[K[49;172H137,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.contains("/${module}/") ||[49;172H[K[49;172H136,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.startsWith("${module}\\") ||[49;172H[K[49;172H135,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hif (file.startsWith("${module}/") ||[49;172H[K[49;172H134,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfor (module in allModules) {[49;172H[K[49;172H133,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Check if file belongs to a module[49;172H[K[49;172H132,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor (file in files) {[49;172H[K[49;172H131,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H130,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef affectedModules = [] as Set[49;172H[K[49;172H129,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef files = changedFiles.split('\n')[49;172H[K[49;172H128,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (changedFiles) {[49;172H[K[49;172H127,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Determine which modules are affected[49;172H[K[49;172H126,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H125,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Changed files: ${changedFiles}"[49;172H[K[49;172H124,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H123,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H122,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H121,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H120,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H119,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H118,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H117,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H116,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H115,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H114,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H113,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (lastBuildCommit) {[49;172H[K[49;172H112,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef changedFiles = ""[49;172H[K[49;172H111,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Get changed files[49;172H[K[49;172H110,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H109,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H108,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H107,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H106,1[9C21%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git log --format='%H' -n 1 HEAD~5",[49;172H[K[49;172H105,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HlastBuildCommit = sh([49;172H[K[49;172H104,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (!lastBuildCommit) {[49;172H[K[49;172H103,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// If no previous build, check recent commits[49;172H[K[49;172H102,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H101,1[9C20%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H100,1[9C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "No previous successful build found, will check last 5 commits"[49;172H[K[49;172H99,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} catch (Exception e) {[49;172H[K[49;172H98,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H97,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H).trim()[49;172H[K[49;172H96,1[10C19%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HreturnStdout: true[49;172H[K[49;172H95,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hscript: "git log --format='%H' -n 1 --before='${lastBuild.getTime()}'",[49;172H[K[49;172H94,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HlastBuildCommit = sh([49;172H[K[49;172H93,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif (lastBuild) {[49;172H[K[49;172H92,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef lastBuild = currentBuild.getPreviousSuccessfulBuild()[49;172H[K[49;172H91,1[10C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Try to get last successful build commit[49;172H[K[49;172H90,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Htry {[49;172H[K[49;172H89,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef lastBuildCommit = ""[49;172H[K[49;172H88,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Get changed files since last successful build[49;172H[K[49;172H87,1[10C17%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H86,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H85,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H84,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HallModules.add(moduleName)[49;172H[K[49;172H83,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdef moduleName = pomFile.replaceAll('./([^/]+)/pom.xml', '$1')[49;172H[K[49;172H82,1[10C16%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif (pomFile != './pom.xml') {[49;172H[K[49;172H81,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfor (pomFile in pomFiles) {[49;172H[K[49;172H80,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Extract module names from pom files[49;172H[K[49;172H79,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H78,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H).trim().split('\n')[49;172H[K[49;172H77,1[10C15%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HreturnStdout: true[49;172H[K[49;172H76,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hscript: "find . -name 'pom.xml' -not -path './target/*' | head -20",[49;172H[K[49;172H75,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef pomFiles = sh([49;172H[K[49;172H74,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Get all Maven modules[49;172H[K[49;172H73,1[10C14%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H72,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef allModules = [][49;172H[K[49;172H71,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef changedModules = [][49;172H[K[49;172H70,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H69,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ”[1;26HDetecting changed modules since last build...'[49;172H[K[49;172H68,1[10C13%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H67,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Detect Changed Modules') {[49;172H[K[49;172H66,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H65,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H64,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H63,1[10C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H62,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H61,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H60,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hbranches: [[name: "*/${params.RELEASE_BRANCH}"]],[49;172H[K[49;172H59,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H58,1[10C11%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H57,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H56,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hbranches: [[name: "refs/tags/${params.VERSION_TAG}"]],[49;172H[K[49;172H55,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H54,1[10C10%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H53,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H52,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ”’[1;26HChecking out source code for PRODUCTION build..."[49;172H[K[49;172H51,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H50,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Checkout') {[49;172H[K[49;172H49,1[11C9%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5Hstages {[49;172H[K[49;172H48,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H47,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;5H}[49;172H[K[49;172H46,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H45,1[11C8%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [7;1H[49;173H6[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [8;1H[49;173H7[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [9;1H[49;173H8[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [10;1H[49;173H9[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [11;1H[49;172H50[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [12;1H[49;173H1[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [13;1H[49;173H2[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [14;1H[49;173H3[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [15;1H[49;173H4[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [16;1H[49;173H5[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [17;1H[49;173H6[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [18;1H[49;173H7[18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [19;1H[49;173H8[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [20;1H[49;173H9[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [21;1H[49;172H60[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [22;1H[49;173H1[22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [23;1H[49;173H2[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [24;1H[49;173H3[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [25;1H[49;173H4[25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [26;1H[49;173H5[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [27;1H[49;173H6[27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [28;1H[49;173H7[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [29;1H[49;173H8[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [30;1H[49;173H9[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [31;1H[49;172H70[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [32;1H[49;173H1[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [33;1H[49;173H2[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [34;1H[49;173H3[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [35;1H[49;173H4[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [36;1H[49;173H5[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [37;1H[49;173H6[37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [38;1H[49;173H7[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [39;1H[49;173H8[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [40;1H[49;173H9[40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [41;1H[49;172H80[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [42;1H[49;173H1[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [43;1H[49;173H2[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HlastBuildCommit = sh([49;172H[K[49;172H83,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hscript: "git log --format='%H' -n 1 --before='${lastBuild.getTime()}'",[49;172H[K[49;172H84,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33HreturnStdout: true[49;172H[K[49;172H85,1[11C8%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H).trim()[49;172H[K[49;172H86,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H87,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} catch (Exception e) {[49;172H[K[49;172H88,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hecho "No previous successful build found, will check last 5 commits"[49;172H[K[49;172H89,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H90,1[11C9%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H91,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// If no previous build, check recent commits[49;172H[K[49;172H92,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (!lastBuildCommit) {[49;172H[K[49;172H93,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HlastBuildCommit = sh([49;172H[K[49;172H94,1[10C10%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hscript: "git log --format='%H' -n 1 HEAD~5",[49;172H[K[49;172H95,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[49;172H[K[49;172H96,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H).trim()[49;172H[K[49;172H97,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H98,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H99,1[10C11%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Get changed files[49;172H[K[49;172H100,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hdef changedFiles = ""[49;172H[K[49;172H101,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (lastBuildCommit) {[49;172H[K[49;172H102,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedFiles = sh([49;172H[K[49;172H103,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H104,1[9C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[49;172H[K[49;172H105,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H).trim()[49;172H[K[49;172H106,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H} else {[49;172H[K[49;172H107,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedFiles = sh([49;172H[K[49;172H108,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hscript: "git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H109,1[9C13%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[49;172H[K[49;172H110,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H).trim()[49;172H[K[49;172H111,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H112,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H113,1[9C14%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hecho "Changed files: ${changedFiles}"[49;172H[K[49;172H114,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H115,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Determine which modules are affected[49;172H[K[49;172H116,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (changedFiles) {[49;172H[K[49;172H117,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hdef files = changedFiles.split('\n')[49;172H[K[49;172H118,1[9C15%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hdef affectedModules = [] as Set[49;172H[K[49;172H119,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H120,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hfor (file in files) {[49;172H[K[49;172H121,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H// Check if file belongs to a module[49;172H[K[49;172H122,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hfor (module in allModules) {[49;172H[K[49;172H123,1[9C16%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hif (file.startsWith("${module}/") ||[49;172H[K[49;172H124,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37Hfile.startsWith("${module}\\") ||[49;172H[K[49;172H125,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37Hfile.contains("/${module}/") ||[49;172H[K[49;172H126,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37Hfile.contains("\\${module}\\")) {[49;172H[K[49;172H127,1[9C17%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;37HaffectedModules.add(module)[49;172H[K[49;172H128,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33H}[49;172H[K[49;172H129,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H}[49;172H[K[49;172H130,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H131,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H// Also check for common files that affect all modules[49;172H[K[49;172H132,1[9C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29Hif (file.equals('pom.xml') ||[49;172H[K[49;172H133,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('common/') ||[49;172H[K[49;172H134,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('shared/') ||[49;172H[K[49;172H135,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.contains('parent') ||[49;172H[K[49;172H136,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hfile.contains('config')) {[49;172H[K[49;172H137,1[9C19%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hecho "Core file changed: ${file} - will trigger full build"[49;172H[K[49;172H138,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33HaffectedModules.addAll(allModules)[49;172H[K[49;172H139,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;33Hbreak[49;172H[K[49;172H140,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;29H}[49;172H[K[49;172H141,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H142,1[9C20%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H143,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedModules = affectedModules.toList()[49;172H[K[49;172H144,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H145,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H146,1[9C21%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Force full build if requested or if no changes detected[49;172H[K[49;172H147,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hif (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {[49;172H[K[49;172H148,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25Hecho "ðŸ”„[48;34HFull build requested or no specific changes detected"[49;172H[K[49;172H149,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;25HchangedModules = allModules[49;172H[K[49;172H150,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H151,1[9C22%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H152,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hecho "ðŸ“‹[48;30HModules to build: ${changedModules.join(', ')}"[49;172H[K[49;172H153,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Hecho "ðŸ“Š[48;30HTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"[49;172H[K[49;172H154,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H155,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21H// Store in environment for later stages[49;172H[K[49;172H156,1[9C23%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Henv.CHANGED_MODULES = changedModules.join(',')[49;172H[K[49;172H157,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Henv.ALL_MODULES = allModules.join(',')[49;172H[K[49;172H158,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[49;172H[K[49;172H159,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H160,1[9C24%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H161,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H162,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H163,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9Hstage('Production Build Info') {[49;172H[K[49;172H164,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H165,1[9C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "ðŸ­[48;26HPRODUCTION Build Information:"[49;172H[K[49;172H166,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Environment: ${ENV_NAME}"[49;172H[K[49;172H167,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"[49;172H[K[49;172H168,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Build number: ${env.BUILD_NUMBER}"[49;172H[K[49;172H169,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Build Type: ${env.BUILD_TYPE}"[49;172H[K[49;172H170,1[9C26%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Modules to build: ${env.CHANGED_MODULES}"[49;172H[K[49;172H171,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Create backup: ${params.CREATE_BACKUP}"[49;172H[K[49;172H172,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hecho "Deploy to prod: ${params.DEPLOY_TO_PROD}"[49;172H[K[49;172H173,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hsh 'java -version'[49;172H[K[49;172H174,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hsh 'mvn -version'[49;172H[K[49;172H175,1[9C27%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;17Hsh 'git log --oneline -3'[49;172H[K[49;172H176,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H177,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H178,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H179,1[9C28%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9Hstage('Production Security Check') {[49;172H[K[49;172H180,1[9C29%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H181,1[9C29%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [42;1H[49;174H0[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [41;1H[49;173H79[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [40;1H[49;174H8[40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [39;1H[49;174H7[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [38;1H[49;174H6[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [37;1H[49;174H5[37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [36;1H[49;174H4[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [35;1H[49;174H3[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [34;1H[49;174H2[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [33;1H[49;174H1[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [32;1H[49;174H0[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [31;1H[49;173H69[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [30;1H[49;174H8[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [29;1H[49;174H7[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [28;1H[49;174H6[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [27;1H[49;174H5[27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [26;1H[49;174H4[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [25;1H[49;174H3[25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [24;1H[49;174H2[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [23;1H[49;174H1[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [22;1H[49;174H0[22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [21;1H[49;173H59[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [20;1H[49;174H8[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [19;1H[49;174H7[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [18;1H[49;174H6[18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [17;1H[49;174H5[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [16;1H[49;174H4[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [15;1H[49;174H3[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [14;1H[49;174H2[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [13;1H[49;174H1[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [12;1H[49;174H0[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [11;1H[49;173H49[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [10;1H[49;174H8[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [9;1H[49;174H7[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [8;1H[49;174H6[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [7;1H[49;174H5[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [6;1H[49;174H4[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif (file.equals('pom.xml') ||[49;172H[K[49;172H143,1[9C29%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Also check for common files that affect all modules[49;172H[K[49;172H142,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H141,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H}[49;172H[K[49;172H140,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33H}[49;172H[K[49;172H139,1[9C28%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37HaffectedModules.add(module)[49;172H[K[49;172H138,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.contains("\\${module}\\")) {[49;172H[K[49;172H137,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.contains("/${module}/") ||[49;172H[K[49;172H136,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37Hfile.startsWith("${module}\\") ||[49;172H[K[49;172H135,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hif (file.startsWith("${module}/") ||[49;172H[K[49;172H134,1[9C27%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfor (module in allModules) {[49;172H[K[49;172H133,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Check if file belongs to a module[49;172H[K[49;172H132,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor (file in files) {[49;172H[K[49;172H131,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H130,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef affectedModules = [] as Set[49;172H[K[49;172H129,1[9C26%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef files = changedFiles.split('\n')[49;172H[K[49;172H128,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (changedFiles) {[49;172H[K[49;172H127,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Determine which modules are affected[49;172H[K[49;172H126,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H125,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Changed files: ${changedFiles}"[49;172H[K[49;172H124,1[9C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H123,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H122,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H121,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H120,1[9C24%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H119,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H118,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H117,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H116,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H115,1[9C23%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H114,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H113,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (lastBuildCommit) {[49;172H[K[49;172H112,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef changedFiles = ""[49;172H[K[49;172H111,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Get changed files[49;172H[K[49;172H110,1[9C22%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H109,1[9C21%[6;1H[?25h[?25l[49;162H:[6;1H[49;162H[K[49;1H:[?25hq[?25l[?2004l[>4;m[23;2t[23;1t[49;1H[K[49;1H[?1004l[?2004l[?1l>[?25h[>4;m[?1049l[23;0;0t]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ sudo vi Jenkinsfile git push origin production[6Psudo vi Jenkinsfile 
[?2004l[?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;49r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[49;1H[1m[37m[41mE325: ATTENTION[m
Found a swap file by the name ".Jenkinsfile.swp"
[10Cowned by: nethmi   dated: Fri Jun 20 05:58:35 2025
[9Cfile name: /home/nethmi/Projects/thingsboard/Jenkinsfile
[10Cmodified: YES
[9Cuser name: root   host name: server1
[8Cprocess ID: 111376
While opening file "Jenkinsfile"
[13Cdated: Mon Jun 23 03:47:36 2025
      NEWER than swap file!

(1) Another program may be editing the same file.  If this is the case,
    be careful not to end up with two different instances of the same
    file when making changes.  Quit, or continue with caution.
(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r Jenkinsfile"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file ".Jenkinsfile.swp"
    to avoid this message.

[32mSwap file ".Jenkinsfile.swp" already exists![m
[32m[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: [?25h[m[49;1H[K[?25l[49;1H"Jenkinsfile" 520L, 24230B[2;1Hâ–½[6n[2;1H  [3;1HPzz\[0%m[6n[3;1H           [1;1H[>c]10;?]11;?[1;25Hdef lastBuild = currentBuild.getPreviousSuccessfulBuild()
                        if (lastBuild) {[2;41H[K[3;1H                            lastBuildCommit = sh([3;50H[K[4;33Hscript: "git log --format='%H' -n 1 --before='${lastBuild.getTime()}'",[5;33HreturnStdout: true[6;29H).trim()[7;25H}[8;21H} catch (Exception e) {[9;25Hecho "No previous successful build found, will check last 5 commits"[10;21H}[12;21H// If no previous build, check recent commits[13;21Hif (!lastBuildCommit) {[14;25HlastBuildCommit = sh([15;29Hscript: "git log --format='%H' -n 1 HEAD~5",[16;29HreturnStdout: true[17;25H).trim()[18;21H}[20;21H// Get changed files[21;21Hdef changedFiles = ""[22;21Hif (lastBuildCommit) {[23;25HchangedFiles = sh([24;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",[25;29HreturnStdout: true[26;25H).trim()[27;21H} else {
                [8CchangedFiles = sh(
                            script: "git diff --name-only HEAD~1 HEAD",[30;11H                  returnStdout: true[30;48H[K[31;10H               ).trim()[31;33H[K[32;11H          }[32;22H[K[33;10H          [33;21H[K[34;9H            echo "Changed files: ${changedFiles}"
                    [35;21H[K[36;14H       // Determine which modules are affected[37;7H              if (changedFiles) {[38;25Hdef files = changedFiles.split('\n')
                        def affectedModules = [] as Se[39;56H[K[40;5H                    [40;25H[K[41;5H                    for (file in files) {[41;46H[K[42;1H                            // Check if file belongs to a module
                            for (module in allModules) {[43;57H[K[44;5H                            if (file.startsWith("${module}/") ||
                                    file.startsWith("${module}\\") ||
                          [10Cfile.contains("/${module}/") ||[47;37Hfile.contains("\\${module}\\")) {
                                    affectedModules.add(module)[49;172H109,1[9C18%[24;1H[?25h[?25l[49;162Hi[24;1H[49;162H [24;1H[49;1H[1m-- INSERT --[m[49;13H[K[49;172H109,1[9C18%[24;1H[?25h[?25l[49;173H10[25;1H[?25h[?25l[49;174H1[26;1H[?25h[?25l[49;174H2[27;1H[?25h[?25l[49;174H3[28;1H[?25h[?25l[49;174H4[29;1H[?25h[?25l[49;174H5[30;1H[?25h[?25l[49;174H6[31;1H[?25h[?25l[49;174H7[32;1H[?25h[?25l[49;174H8[33;1H[?25h[?25l[49;174H9[34;1H[?25h[?25l[49;173H20[35;1H[?25h[?25l[49;174H1[36;1H[?25h[?25l[49;174H2[37;1H[?25h[?25l[49;174H3[38;1H[?25h[?25l[49;174H4[39;1H[?25h[?25l[49;174H5[40;1H[?25h[?25l[49;174H6[41;1H[?25h[?25l[49;174H7[42;1H[?25h[?25l[49;174H8[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33H}[49;172H[K[49;172H129,1[9C18%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H}[49;172H[K[49;172H130,1[9C18%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H131,1[9C18%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H// Also check for common files that affect all modules[49;172H[K[49;172H132,1[9C18%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hif (file.equals('pom.xml') ||[49;172H[K[49;172H133,1[9C19%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('common/') ||[49;172H[K[49;172H134,1[9C19%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('shared/') ||[49;172H[K[49;172H135,1[9C19%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.contains('parent') ||[49;172H[K[49;172H136,1[9C19%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.contains('config')) {[49;172H[K[49;172H137,1[9C19%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hecho "Core file changed: ${file} - will trigger full build"[49;172H[K[49;172H138,1[9C20%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33HaffectedModules.addAll(allModules)[49;172H[K[49;172H139,1[9C20%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hbreak[49;172H[K[49;172H140,1[9C20%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H}[49;172H[K[49;172H141,1[9C20%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H142,1[9C20%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H143,1[9C21%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25HchangedModules = affectedModules.toList()[49;172H[K[49;172H144,1[9C21%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H145,1[9C21%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H146,1[9C21%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H// Force full build if requested or if no changes detected[49;172H[K[49;172H147,1[9C22%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {[49;172H[K[49;172H148,1[9C22%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "ðŸ”„[48;34HFull build requested or no specific changes detected"[49;172H[K[49;172H149,1[9C22%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25HchangedModules = allModules[49;172H[K[49;172H150,1[9C22%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H151,1[9C22%[43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H152,1[9C23%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "ðŸ“‹[48;30HModules to build: ${changedModules.join(', ')}"[49;172H[K[49;172H153,1[9C23%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "ðŸ“Š[48;30HTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"[49;172H[K[49;172H154,1[9C23%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H155,1[9C23%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H// Store in environment for later stages[49;172H[K[49;172H156,1[9C23%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Henv.CHANGED_MODULES = changedModules.join(',')[49;172H[K[49;172H157,1[9C24%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Henv.ALL_MODULES = allModules.join(',')[49;172H[K[49;172H158,1[9C24%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[49;172H[K[49;172H159,1[9C24%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H160,1[9C24%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H161,1[9C25%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H162,1[9C25%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H163,1[9C25%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;9Hstage('Production Build Info') {[49;172H[K[49;172H164,1[9C25%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H165,1[9C25%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "ðŸ­[48;26HPRODUCTION Build Information:"[49;172H[K[49;172H166,1[9C26%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Environment: ${ENV_NAME}"[49;172H[K[49;172H167,1[9C26%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"[49;172H[K[49;172H168,1[9C26%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Build number: ${env.BUILD_NUMBER}"[49;172H[K[49;172H169,1[9C26%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Build Type: ${env.BUILD_TYPE}"[49;172H[K[49;172H170,1[9C26%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Modules to build: ${env.CHANGED_MODULES}"[49;172H[K[49;172H171,1[9C27%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Create backup: ${params.CREATE_BACKUP}"[49;172H[K[49;172H172,1[9C27%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Deploy to prod: ${params.DEPLOY_TO_PROD}"[49;172H[K[49;172H173,1[9C27%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hsh 'java -version'[49;172H[K[49;172H174,1[9C27%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hsh 'mvn -version'[49;172H[K[49;172H175,1[9C27%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hsh 'git log --oneline -3'[49;172H[K[49;172H176,1[9C28%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H177,1[9C28%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H178,1[9C28%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H179,1[9C28%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;9Hstage('Production Security Check') {[49;172H[K[49;172H180,1[9C29%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H181,1[9C29%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho 'ðŸ”[48;26HRunning production security validations...'[49;172H[K[49;172H182,1[9C29%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hscript {[49;172H[K[49;172H183,1[9C29%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hdef allowedBranches = ['master', 'main'][49;172H[K[49;172H184,1[9C29%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hdef currentBranch = params.RELEASE_BRANCH[49;172H[K[49;172H185,1[9C30%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H186,1[9C30%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H187,1[9C30%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HBuilding from version tag: ${params.VERSION_TAG}"[49;172H[K[49;172H188,1[9C30%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[49;172H[K[49;172H189,1[9C30%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HBuilding from approved branch: ${currentBranch}"[49;172H[K[49;172H190,1[9C31%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H} else {[49;172H[K[49;172H191,1[9C31%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Herror("âŒ[48;35HProduction builds only allowed from master, main, or release/* branches")[49;172H[K[49;172H192,1[9C31%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H193,1[9C31%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H194,1[9C31%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H195,1[9C32%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H196,1[9C32%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[49;172H[K[49;172H197,1[9C32%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;9Hstage('Production Clean & Prepare') {[49;172H[K[49;172H198,1[9C32%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;13Hsteps {[49;172H[K[49;172H199,1[9C33%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho 'ðŸ§¹[48;26HCleaning workspace for production build...'[49;172H[K[49;172H200,1[9C33%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hscript {[49;172H[K[49;172H201,1[9C33%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H202,1[9C33%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hsh 'mvn clean -q -T 2C'[49;172H[K[49;172H203,1[9C33%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H} else {[49;172H[K[49;172H204,1[9C34%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25H// Clean only changed modules[49;172H[K[49;172H205,1[9C34%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H206,1[9C34%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hfor (module in modules) {[49;172H[K[49;172H207,1[9C34%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hsh "mvn clean -q -f ${module}/pom.xml || true"[49;172H[K[49;172H208,1[9C34%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;25H}[49;172H[K[49;172H209,1[9C35%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H}[49;172H[K[49;172H210,1[9C35%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;17H}[49;172H[K[49;172H211,1[9C35%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;13H}[49;172H[K[49;172H212,1[9C35%[43;1H[?25h[?25l[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H213,1[9C36%[43;1H[?25h[?25l[49;174H2[42;1H[?25h[?25l[49;174H1[41;1H[?25h[?25l[49;174H0[40;1H[?25h[?25l[49;173H09[39;1H[?25h[?25l[49;174H8[38;1H[?25h[?25l[49;174H7[37;1H[?25h[?25l[49;174H6[36;1H[?25h[?25l[49;174H5[35;1H[?25h[?25l[49;174H4[34;1H[?25h[?25l[49;174H3[33;1H[?25h[?25l[49;174H2[32;1H[?25h[?25l[49;174H1[31;1H[?25h[?25l[49;174H0[30;1H[?25h[?25l[49;172H199[29;1H[?25h[?25l[49;174H8[28;1H[?25h[?25l[49;174H7[27;1H[?25h[?25l[49;174H6[26;1H[?25h[?25l[49;174H5[25;1H[?25h[?25l[49;174H4[24;1H[?25h[?25l[49;174H3[23;1H[?25h[?25l[49;174H2[22;1H[?25h[?25l[49;174H1[21;1H[?25h[?25l[49;174H0[20;1H[?25h[?25l[49;173H89[19;1H[?25h[?25l[49;174H8[18;1H[?25h[?25l[49;174H7[17;1H[?25h[?25l[49;174H6[16;1H[?25h[?25l[49;174H5[15;1H[?25h[?25l[49;174H4[14;1H[?25h[?25l[49;174H3[13;1H[?25h[?25l[49;174H2[12;1H[?25h[?25l[49;174H3[13;1H[?25h[?25l[49;174H4[14;1H[?25h[?25l[49;174H5[15;1H[?25h[?25l[49;174H6[16;1H[?25h[?25l[49;174H7[17;1H[?25h[?25l[49;174H8[18;1H[?25h[?25l[49;174H9[19;1H[?25h[?25l[49;173H90[20;1H[?25h[?25l[49;174H1[21;1H[?25h[?25l[49;174H2[22;1H[?25h[?25l[49;174H3[23;1H[?25h[?25l[49;174H4[24;1H[?25h[?25l[49;174H5[25;1H[?25h[?25l[49;174H6[26;1H[?25h[?25l[49;174H7[27;1H[?25h[?25l[49;174H8[28;1H[?25h[?25l[49;174H9[29;1H[?25h[?25l[49;172H200[30;1H[?25h[?25l[49;174H1[31;1H[?25h[?25l[49;174H2[32;1H[?25h[?25l[49;174H3[33;1H[?25h[?25l[49;174H2[32;1H[?25h[?25l[49;174H1[31;1H[?25h[?25l[49;176H2[31;2H[?25h[?25l[49;176H3[31;3H[?25h[?25l[49;176H4[31;4H[?25h[?25l[49;176H5[31;5H[?25h[?25l[49;176H6[31;6H[?25h[?25l[49;176H7[31;7H[?25h[?25l[49;176H8[31;8H[?25h[?25l[15;44H[46m{[31;9H}[m[49;176H9[31;9H[?25h[?25l[49;176H10[31;10H[?25h[?25l[15;44H{[31;9H[K[49;176H9 [31;9H[?25h[?25l[49;176H8[31;8H[?25h[?25l[49;176H7[31;7H[?25h[?25l[49;176H6[31;6H[?25h[?25l[49;176H5[31;5H[?25h[?25l[49;176H4[31;4H[?25h[?25l[49;176H3[31;3H[?25h[?25l[49;176H2[31;2H[?25h[?25l[49;176H1[31;1H[?25h[?25l[16;48r[48;1H
[1;49r[16;13Hsteps [46m{[m[16;20H[K[17;17Hecho 'ðŸ”[17;26HRunning production security validations...'[18;17Hscript {[18;25H[K[19;25HallowedBranches = ['master', 'main'][19;61H[K[20;21Hdef currentBranch = params.RELEASE_BRANCH[21;21H[K[22;21Hif (params.VERSION_TAG) {[22;46H[K[23;21H    echo "âœ…[23;33H Building from version tag: ${params.VERSION_TAG}"[23;83H[K[24;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[25;21H    echo "âœ…[25;34HBuilding from approved branch: ${currentBranch}"[26;21H} else {[26;29H[K[27;21H    error("âŒ[27;35HProduction builds only allowed from master, main, or release/* branches")[28;17H    }[29;13H    }[30;13H[46m}[m[49;172H[K[49;172H200,14[8C36%[30;14H[?25h[?25l[16;19H{[30;13H[K[49;177H3[30;13H[?25h[?25l[49;177H2[30;12H[?25h[?25l[49;177H1[30;11H[?25h[?25l[49;177H0[30;10H[?25h[?25l[49;176H9 [30;9H[?25h[?25l[49;176H8[30;8H[?25h[?25l[49;176H7[30;7H[?25h[?25l[49;176H6[30;6H[?25h[?25l[49;176H5[30;5H[?25h[?25l[49;176H4[30;4H[?25h[?25l[49;176H3[30;3H[?25h[?25l[49;176H2[30;2H[?25h[?25l[49;176H1[30;1H[?25h[?25l[18;48r[48;1H
[1;49r[18;17Hscript [46m{[m[18;25H[K[19;25HallowedBranches = ['master', 'main'][19;61H[K[20;21Hdef currentBranch = params.RELEASE_BRANCH[21;21H[K[22;21Hif (params.VERSION_TAG) {[22;46H[K[23;21H    echo "âœ…[23;33H Building from version tag: ${params.VERSION_TAG}"[23;83H[K[24;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[25;21H    echo "âœ…[25;34HBuilding from approved branch: ${currentBranch}"[26;21H} else {[26;29H[K[27;21H    error("âŒ[27;35HProduction builds only allowed from master, main, or release/* branches")[28;17H    }[29;17H[46m}[m[48;9Hstage('Incremental Production Build') {[49;172H[K[49;172H199,18[8C36%[29;18H[?25h[?25l[18;24H{[29;17H[K[49;177H7[29;17H[?25h[?25l[49;177H6[29;16H[?25h[?25l[49;177H5[29;15H[?25h[?25l[49;177H4[29;14H[?25h[?25l[49;177H3[29;13H[?25h[?25l[49;177H2[29;12H[?25h[?25l[49;177H1[29;11H[?25h[?25l[49;177H0[29;10H[?25h[?25l[49;176H9 [29;9H[?25h[?25l[49;176H8[29;8H[?25h[?25l[49;176H7[29;7H[?25h[?25l[49;176H6[29;6H[?25h[?25l[49;176H5[29;5H[?25h[?25l[49;176H4[29;4H[?25h[?25l[49;176H3[29;3H[?25h[?25l[49;176H2[29;2H[?25h[?25l[49;176H1[29;1H[?25h[?25l[26;48r[48;1H
[1;49r[26;21H} else [46m{[m[26;29H[K[27;21H    error("âŒ[27;35HProduction builds only allowed from master, main, or release/* branches")[28;21H[46m}[m[48;13Hsteps {[49;172H[K[49;172H198,22[8C36%[28;22H[?25h[?25l[26;28H{[28;21H[K[49;177H1[28;21H[?25h[?25l[49;177H0[28;20H[?25h[?25l[49;176H19[28;19H[?25h[?25l[49;177H8[28;18H[?25h[?25l[49;177H7[28;17H[?25h[?25l[49;177H6[28;16H[?25h[?25l[49;177H5[28;15H[?25h[?25l[49;177H4[28;14H[?25h[?25l[49;177H3[28;13H[?25h[?25l[49;177H2[28;12H[?25h[?25l[49;177H1[28;11H[?25h[?25l[49;177H0[28;10H[?25h[?25l[49;176H9 [28;9H[?25h[?25l[49;176H8[28;8H[?25h[?25l[49;176H7[28;7H[?25h[?25l[49;176H6[28;6H[?25h[?25l[49;176H5[28;5H[?25h[?25l[49;176H4[28;4H[?25h[?25l[49;176H3[28;3H[?25h[?25l[49;176H2[28;2H[?25h[?25l[49;176H1[28;1H[?25h[?25l[27;48r[48;1H
[1;49r[27;25Herror[46m([m"âŒ[27;35HProduction builds only allowed from master, main, or release/* branches"[46m)[m[48;17Hecho "ðŸ“¦[48;26HBuilding ${env.BUILD_TYPE} - ${env.CHANGED_MODULES.split(',').length} modules..."[49;172H[K[49;172H197,109-108   36%[27;108H[?25h[?25l[27;30H([27;107H[K[49;178H8-107[27;107H[?25h[?25l[27;106H[K[49;178H7-106[27;106H[?25h[?25l[27;105H[K[49;178H6-105[27;105H[?25h[?25l[27;104H[K[49;178H5-104[27;104H[?25h[?25l[27;103H[K[49;178H4-103[27;103H[?25h[?25l[27;102H[K[49;178H3-102[27;102H[?25h[?25l[27;101H[K[49;178H2-101[27;101H[?25h[?25l[27;100H[K[49;178H1-100[27;100H[?25h[?25l[27;99H[K[49;178H0-99 [27;99H[?25h[?25l[27;98H[K[49;176H99-98 [27;98H[?25h[?25l[49;177H8-97[27;97H[?25h[?25l[27;96H[K[49;177H7-96[27;96H[?25h[?25l[27;95H[K[49;177H6-95[27;95H[?25h[?25l[27;94H[K[49;177H5-94[27;94H[?25h[?25l[27;93H[K[49;177H4-93[27;93H[?25h[?25l[27;92H[K[49;177H3-92[27;92H[?25h[?25l[27;91H[K[49;177H2-91[27;91H[?25h[?25l[27;90H[K[49;177H1-90[27;90H[?25h[?25l[27;89H[K[49;177H0-89[27;89H[?25h[?25l[27;88H[K[49;176H89-88[27;88H[?25h[?25l[49;177H8-87[27;87H[?25h[?25l[27;86H[K[49;177H7-86[27;86H[?25h[?25l[27;85H[K[49;177H6-85[27;85H[?25h[?25l[49;177H5-84[27;84H[?25h[?25l[27;83H[K[49;177H4-83[27;83H[?25h[?25l[27;82H[K[49;177H3-82[27;82H[?25h[?25l[27;81H[K[49;177H2-81[27;81H[?25h[?25l[27;80H[K[49;177H1-80[27;80H[?25h[?25l[27;79H[K[49;177H0-79[27;79H[?25h[?25l[49;176H79-78[27;78H[?25h[?25l[27;77H[K[49;177H8-77[27;77H[?25h[?25l[27;76H[K[49;177H7-76[27;76H[?25h[?25l[27;75H[K[49;177H6-75[27;75H[?25h[?25l[27;74H[K[49;177H5-74[27;74H[?25h[?25l[27;73H[K[49;177H4-73[27;73H[?25h[?25l[27;72H[K[49;177H3-72[27;72H[?25h[?25l[27;71H[K[49;177H2-71[27;71H[?25h[?25l[49;177H1-70[27;70H[?25h[?25l[27;69H[K[49;177H0-69[27;69H[?25h[?25l[27;68H[K[49;176H69-68[27;68H[?25h[?25l[27;67H[K[49;177H8-67[27;67H[?25h[?25l[27;66H[K[49;177H7-66[27;66H[?25h[?25l[49;177H6-65[27;65H[?25h[?25l[27;64H[K[49;177H5-64[27;64H[?25h[?25l[27;63H[K[49;177H4-63[27;63H[?25h[?25l[27;62H[K[49;177H3-62[27;62H[?25h[?25l[27;61H[K[49;177H2-61[27;61H[?25h[?25l[27;60H[K[49;177H1-60[27;60H[?25h[?25l[27;59H[K[49;177H0-59[27;59H[?25h[?25l[27;58H[K[49;176H59-58[27;58H[?25h[?25l[49;177H8-57[27;57H[?25h[?25l[27;56H[K[49;177H7-56[27;56H[?25h[?25l[27;55H[K[49;177H6-55[27;55H[?25h[?25l[27;54H[K[49;177H5-54[27;54H[?25h[?25l[27;53H[K[49;177H4-53[27;53H[?25h[?25l[49;177H3-52[27;52H[?25h[?25l[27;51H[K[49;177H2-51[27;51H[?25h[?25l[27;50H[K[49;177H1-50[27;50H[?25h[?25l[27;49H[K[49;177H0-49[27;49H[?25h[?25l[27;48H[K[49;176H49-48[27;48H[?25h[?25l[27;47H[K[49;177H8-47[27;47H[?25h[?25l[27;46H[K[49;177H7-46[27;46H[?25h[?25l[49;177H6-45[27;45H[?25h[?25l[27;44H[K[49;177H5-44[27;44H[?25h[?25l[27;43H[K[49;177H4-43[27;43H[?25h[?25l[27;42H[K[49;177H3-42[27;42H[?25h[?25l[27;41H[K[49;177H2-41[27;41H[?25h[?25l[27;40H[K[49;177H1-40[27;40H[?25h[?25l[27;39H[K[49;177H0-39[27;39H[?25h[?25l[27;38H[K[49;176H39-38[27;38H[?25h[?25l[27;37H[K[49;177H8-37[27;37H[?25h[?25l[27;36H[K[49;177H7-36[27;36H[?25h[?25l[27;35H[K[49;177H6-35[27;35H[?25h[?25l[49;177H5-34[27;34H[?25h[?25l[27;32H[K[49;177H2   [27;32H[?25h[?25l[27;31H[K[49;177H1[27;31H[?25h[?25l[27;30H[K[49;177H0[27;30H[?25h[?25l[27;29H[K[49;176H29[27;29H[?25h[?25l[27;28H[K[49;177H8[27;28H[?25h[?25l[27;27H[K[49;177H7[27;27H[?25h[?25l[27;26H[K[49;177H6[27;26H[?25h[?25l[27;25H[K[49;177H5[27;25H[?25h[?25l[49;177H4[27;24H[?25h[?25l[49;177H3[27;23H[?25h[?25l[49;177H2[27;22H[?25h[?25l[49;177H1[27;21H[?25h[?25l[49;177H0[27;20H[?25h[?25l[49;176H19[27;19H[?25h[?25l[49;177H8[27;18H[?25h[?25l[49;177H7[27;17H[?25h[?25l[49;177H6[27;16H[?25h[?25l[49;177H5[27;15H[?25h[?25l[49;177H4[27;14H[?25h[?25l[49;177H3[27;13H[?25h[?25l[49;177H2[27;12H[?25h[?25l[49;177H1[27;11H[?25h[?25l[49;177H0[27;10H[?25h[?25l[49;176H9 [27;9H[?25h[?25l[49;176H8[27;8H[?25h[?25l[49;176H7[27;7H[?25h[?25l[49;176H6[27;6H[?25h[?25l[49;176H5[27;5H[?25h[?25l[49;176H4[27;4H[?25h[?25l[49;176H3[27;3H[?25h[?25l[49;176H2[27;2H[?25h[?25l[49;176H1[27;1H[?25h[?25l[26;48r[48;1H
[1;49r[26;21H} else {[48;17Htimeout(time: 60, unit: 'MINUTES') {[49;172H[K[49;172H196,29[8C36%[26;29H[?25h[?25l[26;28H[K[49;177H8[26;28H[?25h[?25l[49;177H7[26;27H[?25h[?25l[26;26H[K[49;177H6[26;26H[?25h[?25l[26;25H[K[49;177H5[26;25H[?25h[?25l[26;24H[K[49;177H4[26;24H[?25h[?25l[26;23H[K[49;177H3[26;23H[?25h[?25l[24;113H[46m{[26;21H}[m[49;177H2[26;22H[?25h[?25l[24;113H{[26;21H[K[49;177H1[26;21H[?25h[?25l[49;177H0[26;20H[?25h[?25l[49;176H19[26;19H[?25h[?25l[49;177H8[26;18H[?25h[?25l[49;177H7[26;17H[?25h[?25l[49;177H6[26;16H[?25h[?25l[49;177H5[26;15H[?25h[?25l[49;177H4[26;14H[?25h[?25l[49;177H3[26;13H[?25h[?25l[49;177H2[26;12H[?25h[?25l[49;177H1[26;11H[?25h[?25l[49;177H0[26;10H[?25h[?25l[49;176H9 [26;9H[?25h[?25l[49;176H8[26;8H[?25h[?25l[49;176H7[26;7H[?25h[?25l[49;176H6[26;6H[?25h[?25l[49;176H5[26;5H[?25h[?25l[49;176H4[26;4H[?25h[?25l[49;176H3[26;3H[?25h[?25l[49;176H2[26;2H[?25h[?25l[49;176H1[26;1H[?25h[?25l[25;48r[48;1H
[1;49r[25;25Hecho "âœ…[25;34HBuilding from approved branch: ${currentBranch}"[48;21Hscript {[49;172H[K[49;172H195,83-82     36%[25;82H[?25h[?25l[25;66H[46m{[13C}[m[25;81H[K[49;177H2-81[25;81H[?25h[?25l[25;66H{[25;80H[K[49;177H1-80[25;80H[?25h[?25l[25;79H[K[49;177H0-79[25;79H[?25h[?25l[25;78H[K[49;176H79-78[25;78H[?25h[?25l[25;77H[K[49;177H8-77[25;77H[?25h[?25l[25;76H[K[49;177H7-76[25;76H[?25h[?25l[25;75H[K[49;177H6-75[25;75H[?25h[?25l[25;74H[K[49;177H5-74[25;74H[?25h[?25l[25;73H[K[49;177H4-73[25;73H[?25h[?25l[25;72H[K[49;177H3-72[25;72H[?25h[?25l[25;71H[K[49;177H2-71[25;71H[?25h[?25l[25;70H[K[49;177H1-70[25;70H[?25h[?25l[25;69H[K[49;177H0-69[25;69H[?25h[?25l[25;68H[K[49;176H69-68[25;68H[?25h[?25l[25;67H[K[49;177H8-67[25;67H[?25h[?25l[25;66H[K[49;177H7-66[25;66H[?25h[?25l[25;65H[K[49;177H6-65[25;65H[?25h[?25l[49;177H5-64[25;64H[?25h[?25l[25;63H[K[49;177H4-63[25;63H[?25h[?25l[25;62H[K[49;177H3-62[25;62H[?25h[?25l[25;61H[K[49;177H2-61[25;61H[?25h[?25l[25;60H[K[49;177H1-60[25;60H[?25h[?25l[25;59H[K[49;177H0-59[25;59H[?25h[?25l[25;58H[K[49;176H59-58[25;58H[?25h[?25l[25;57H[K[49;177H8-57[25;57H[?25h[?25l[49;177H7-56[25;56H[?25h[?25l[25;55H[K[49;177H6-55[25;55H[?25h[?25l[25;54H[K[49;177H5-54[25;54H[?25h[?25l[25;53H[K[49;177H4-53[25;53H[?25h[?25l[25;52H[K[49;177H3-52[25;52H[?25h[?25l[25;51H[K[49;177H2-51[25;51H[?25h[?25l[25;50H[K[49;177H1-50[25;50H[?25h[?25l[25;49H[K[49;177H0-49[25;49H[?25h[?25l[25;48H[K[49;176H49-48[25;48H[?25h[?25l[49;177H8-47[25;47H[?25h[?25l[25;46H[K[49;177H7-46[25;46H[?25h[?25l[25;45H[K[49;177H6-45[25;45H[?25h[?25l[25;44H[K[49;177H5-44[25;44H[?25h[?25l[25;43H[K[49;177H4-43[25;43H[?25h[?25l[49;177H3-42[25;42H[?25h[?25l[25;41H[K[49;177H2-41[25;41H[?25h[?25l[25;40H[K[49;177H1-40[25;40H[?25h[?25l[25;39H[K[49;177H0-39[25;39H[?25h[?25l[25;38H[K[49;176H39-38[25;38H[?25h[?25l[25;37H[K[49;177H8-37[25;37H[?25h[?25l[25;36H[K[49;177H7-36[25;36H[?25h[?25l[25;35H[K[49;177H6-35[25;35H[?25h[?25l[25;34H[K[49;177H5-34[25;34H[?25h[?25l[49;177H4-33[25;33H[?25h[?25l[25;31H[K[49;177H1   [25;31H[?25h[?25l[25;30H[K[49;177H0[25;30H[?25h[?25l[49;176H29[25;29H[?25h[?25l[25;28H[K[49;177H8[25;28H[?25h[?25l[25;27H[K[49;177H7[25;27H[?25h[?25l[25;26H[K[49;177H6[25;26H[?25h[?25l[25;25H[K[49;177H5[25;25H[?25h[?25l[49;177H4[25;24H[?25h[?25l[49;177H3[25;23H[?25h[?25l[49;177H2[25;22H[?25h[?25l[49;177H1[25;21H[?25h[?25l[49;177H0[25;20H[?25h[?25l[49;176H19[25;19H[?25h[?25l[49;177H8[25;18H[?25h[?25l[49;177H7[25;17H[?25h[?25l[49;177H6[25;16H[?25h[?25l[49;177H5[25;15H[?25h[?25l[49;177H4[25;14H[?25h[?25l[49;177H3[25;13H[?25h[?25l[49;177H2[25;12H[?25h[?25l[49;177H1[25;11H[?25h[?25l[49;177H0[25;10H[?25h[?25l[49;176H9 [25;9H[?25h[?25l[49;176H8[25;8H[?25h[?25l[49;176H7[25;7H[?25h[?25l[49;176H6[25;6H[?25h[?25l[49;176H5[25;5H[?25h[?25l[49;176H4[25;4H[?25h[?25l[49;176H3[25;3H[?25h[?25l[49;176H2[25;2H[?25h[?25l[49;176H1[25;1H[?25h[?25l[24;48r[48;1H
[1;49r[24;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[48;25Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H194,114[7C36%[24;114H[?25h[?25l[24;113H[K[49;178H3[24;113H[?25h[?25l[24;31H[46m([79C)[m[49;178H2[24;112H[?25h[?25l[24;31H([64C[46m([13C)[m[24;111H[K[49;178H1[24;111H[?25h[?25l[24;96H([24;110H[K[49;178H0[24;110H[?25h[?25l[24;109H[K[49;177H09[24;109H[?25h[?25l[24;108H[K[49;178H8[24;108H[?25h[?25l[24;107H[K[49;178H7[24;107H[?25h[?25l[24;106H[K[49;178H6[24;106H[?25h[?25l[24;105H[K[49;178H5[24;105H[?25h[?25l[24;104H[K[49;178H4[24;104H[?25h[?25l[24;103H[K[49;178H3[24;103H[?25h[?25l[24;102H[K[49;178H2[24;102H[?25h[?25l[24;101H[K[49;178H1[24;101H[?25h[?25l[24;100H[K[49;178H0[24;100H[?25h[?25l[24;99H[K[49;176H99 [24;99H[?25h[?25l[24;98H[K[49;177H8[24;98H[?25h[?25l[24;97H[K[49;177H7[24;97H[?25h[?25l[24;96H[K[49;177H6[24;96H[?25h[?25l[24;95H[K[49;177H5[24;95H[?25h[?25l[24;94H[K[49;177H4[24;94H[?25h[?25l[24;93H[K[49;177H3[24;93H[?25h[?25l[24;92H[K[49;177H2[24;92H[?25h[?25l[24;91H[K[49;177H1[24;91H[?25h[?25l[24;90H[K[49;177H0[24;90H[?25h[?25l[24;89H[K[49;176H89[24;89H[?25h[?25l[24;88H[K[49;177H8[24;88H[?25h[?25l[24;87H[K[49;177H7[24;87H[?25h[?25l[24;86H[K[49;177H6[24;86H[?25h[?25l[24;85H[K[49;177H5[24;85H[?25h[?25l[24;84H[K[49;177H4[24;84H[?25h[?25l[24;83H[K[49;177H3[24;83H[?25h[?25l[24;82H[K[49;177H2[24;82H[?25h[?25l[24;81H[K[49;177H1[24;81H[?25h[?25l[24;80H[K[49;177H0[24;80H[?25h[?25l[24;79H[K[49;176H79[24;79H[?25h[?25l[24;78H[K[49;177H8[24;78H[?25h[?25l[24;77H[K[49;177H7[24;77H[?25h[?25l[24;76H[K[49;177H6[24;76H[?25h[?25l[24;75H[K[49;177H5[24;75H[?25h[?25l[24;74H[K[49;177H4[24;74H[?25h[?25l[24;73H[K[49;177H3[24;73H[?25h[?25l[24;72H[K[49;177H2[24;72H[?25h[?25l[49;177H1[24;71H[?25h[?25l[24;70H[K[49;177H0[24;70H[?25h[?25l[24;69H[K[49;176H69[24;69H[?25h[?25l[24;56H[46m([10C)[m[49;177H8[24;68H[?25h[?25l[24;56H([24;67H[K[49;177H7[24;67H[?25h[?25l[24;66H[K[49;177H6[24;66H[?25h[?25l[24;65H[K[49;177H5[24;65H[?25h[?25l[24;64H[K[49;177H4[24;64H[?25h[?25l[24;63H[K[49;177H3[24;63H[?25h[?25l[24;62H[K[49;177H2[24;62H[?25h[?25l[24;61H[K[49;177H1[24;61H[?25h[?25l[24;60H[K[49;177H0[24;60H[?25h[?25l[24;59H[K[49;176H59[24;59H[?25h[?25l[24;58H[K[49;177H8[24;58H[?25h[?25l[24;57H[K[49;177H7[24;57H[?25h[?25l[24;56H[K[49;177H6[24;56H[?25h[?25l[24;55H[K[49;177H5[24;55H[?25h[?25l[24;54H[K[49;177H4[24;54H[?25h[?25l[24;53H[K[49;177H3[24;53H[?25h[?25l[24;52H[K[49;177H2[24;52H[?25h[?25l[24;51H[K[49;177H1[24;51H[?25h[?25l[24;50H[K[49;177H0[24;50H[?25h[?25l[24;49H[K[49;176H49[24;49H[?25h[?25l[24;48H[K[49;177H8[24;48H[?25h[?25l[24;47H[K[49;177H7[24;47H[?25h[?25l[24;46H[K[49;177H6[24;46H[?25h[?25l[24;45H[K[49;177H5[24;45H[?25h[?25l[24;44H[K[49;177H4[24;44H[?25h[?25l[24;43H[K[49;177H3[24;43H[?25h[?25l[24;42H[K[49;177H2[24;42H[?25h[?25l[24;41H[K[49;177H1[24;41H[?25h[?25l[24;40H[K[49;177H0[24;40H[?25h[?25l[24;39H[K[49;176H39[24;39H[?25h[?25l[24;38H[K[49;177H8[24;38H[?25h[?25l[24;37H[K[49;177H7[24;37H[?25h[?25l[24;36H[K[49;177H6[24;36H[?25h[?25l[24;35H[K[49;177H5[24;35H[?25h[?25l[24;34H[K[49;177H4[24;34H[?25h[?25l[24;33H[K[49;177H3[24;33H[?25h[?25l[24;32H[K[49;177H2[24;32H[?25h[?25l[24;31H[K[49;177H1[24;31H[?25h[?25l[49;177H0[24;30H[?25h[?25l[24;29H[K[49;176H29[24;29H[?25h[?25l[24;28H[K[49;177H8[24;28H[?25h[?25l[49;177H7[24;27H[?25h[?25l[24;26H[K[49;177H6[24;26H[?25h[?25l[24;25H[K[49;177H5[24;25H[?25h[?25l[24;24H[K[49;177H4[24;24H[?25h[?25l[24;23H[K[49;177H3[24;23H[?25h[?25l[22;45H[46m{[24;21H}[m[49;177H2[24;22H[?25h[?25l[22;45H{[24;21H[K[49;177H1[24;21H[?25h[?25l[49;177H0[24;20H[?25h[?25l[49;176H19[24;19H[?25h[?25l[49;177H8[24;18H[?25h[?25l[49;177H7[24;17H[?25h[?25l[49;177H6[24;16H[?25h[?25l[49;177H5[24;15H[?25h[?25l[49;177H4[24;14H[?25h[?25l[49;177H3[24;13H[?25h[?25l[49;177H2[24;12H[?25h[?25l[49;177H1[24;11H[?25h[?25l[49;177H0[24;10H[?25h[?25l[49;176H9 [24;9H[?25h[?25l[49;176H8[24;8H[?25h[?25l[49;176H7[24;7H[?25h[?25l[49;176H6[24;6H[?25h[?25l[49;176H5[24;5H[?25h[?25l[49;176H4[24;4H[?25h[?25l[49;176H3[24;3H[?25h[?25l[49;176H2[24;2H[?25h[?25l[49;176H1[24;1H[?25h[?25l[23;48r[48;1H
[1;49r[23;25Hecho "âœ…[23;34HBuilding from version tag: ${params.VERSION_TAG}"[48;29H// Full build[49;172H[K[49;172H193,84-83     36%[23;83H[?25h[?25l[23;62H[46m{[18C}[m[23;82H[K[49;177H3-82[23;82H[?25h[?25l[23;62H{[23;81H[K[49;177H2-81[23;81H[?25h[?25l[23;80H[K[49;177H1-80[23;80H[?25h[?25l[23;79H[K[49;177H0-79[23;79H[?25h[?25l[23;78H[K[49;176H79-78[23;78H[?25h[?25l[23;77H[K[49;177H8-77[23;77H[?25h[?25l[23;76H[K[49;177H7-76[23;76H[?25h[?25l[23;75H[K[49;177H6-75[23;75H[?25h[?25l[23;74H[K[49;177H5-74[23;74H[?25h[?25l[23;73H[K[49;177H4-73[23;73H[?25h[?25l[23;72H[K[49;177H3-72[23;72H[?25h[?25l[23;71H[K[49;177H2-71[23;71H[?25h[?25l[23;70H[K[49;177H1-70[23;70H[?25h[?25l[23;69H[K[49;177H0-69[23;69H[?25h[?25l[23;68H[K[49;176H69-68[23;68H[?25h[?25l[23;67H[K[49;177H8-67[23;67H[?25h[?25l[23;66H[K[49;177H7-66[23;66H[?25h[?25l[23;65H[K[49;177H6-65[23;65H[?25h[?25l[23;64H[K[49;177H5-64[23;64H[?25h[?25l[23;63H[K[49;177H4-63[23;63H[?25h[?25l[23;62H[K[49;177H3-62[23;62H[?25h[?25l[23;61H[K[49;177H2-61[23;61H[?25h[?25l[49;177H1-60[23;60H[?25h[?25l[23;59H[K[49;177H0-59[23;59H[?25h[?25l[23;58H[K[49;176H59-58[23;58H[?25h[?25l[23;57H[K[49;177H8-57[23;57H[?25h[?25l[23;56H[K[49;177H7-56[23;56H[?25h[?25l[49;177H6-55[23;55H[?25h[?25l[23;54H[K[49;177H5-54[23;54H[?25h[?25l[23;53H[K[49;177H4-53[23;53H[?25h[?25l[23;52H[K[49;177H3-52[23;52H[?25h[?25l[23;51H[K[49;177H2-51[23;51H[?25h[?25l[23;50H[K[49;177H1-50[23;50H[?25h[?25l[23;49H[K[49;177H0-49[23;49H[?25h[?25l[23;48H[K[49;176H49-48[23;48H[?25h[?25l[49;177H8-47[23;47H[?25h[?25l[23;46H[K[49;177H7-46[23;46H[?25h[?25l[23;45H[K[49;177H6-45[23;45H[?25h[?25l[23;44H[K[49;177H5-44[23;44H[?25h[?25l[23;43H[K[49;177H4-43[23;43H[?25h[?25l[49;177H3-42[23;42H[?25h[?25l[23;41H[K[49;177H2-41[23;41H[?25h[?25l[23;40H[K[49;177H1-40[23;40H[?25h[?25l[23;39H[K[49;177H0-39[23;39H[?25h[?25l[23;38H[K[49;176H39-38[23;38H[?25h[?25l[23;37H[K[49;177H8-37[23;37H[?25h[?25l[23;36H[K[49;177H7-36[23;36H[?25h[?25l[23;35H[K[49;177H6-35[23;35H[?25h[?25l[23;34H[K[49;177H5-34[23;34H[?25h[?25l[49;177H4-33[23;33H[?25h[?25l[23;31H[K[49;177H1   [23;31H[?25h[?25l[23;30H[K[49;177H0[23;30H[?25h[?25l[49;176H29[23;29H[?25h[?25l[23;28H[K[49;177H8[23;28H[?25h[?25l[23;27H[K[49;177H7[23;27H[?25h[?25l[23;26H[K[49;177H6[23;26H[?25h[?25l[23;25H[K[49;177H5[23;25H[?25h[?25l[49;177H4[23;24H[?25h[?25l[49;177H3[23;23H[?25h[?25l[49;177H2[23;22H[?25h[?25l[49;177H1[23;21H[?25h[?25l[49;177H0[23;20H[?25h[?25l[49;176H19[23;19H[?25h[?25l[49;177H8[23;18H[?25h[?25l[49;177H7[23;17H[?25h[?25l[49;177H6[23;16H[?25h[?25l[49;177H5[23;15H[?25h[?25l[49;177H4[23;14H[?25h[?25l[49;177H3[23;13H[?25h[?25l[49;177H2[23;12H[?25h[?25l[49;177H1[23;11H[?25h[?25l[49;177H0[23;10H[?25h[?25l[49;176H9 [23;9H[?25h[?25l[49;176H8[23;8H[?25h[?25l[49;176H7[23;7H[?25h[?25l[49;176H6[23;6H[?25h[?25l[49;176H5[23;5H[?25h[?25l[49;176H4[23;4H[?25h[?25l[49;176H3[23;3H[?25h[?25l[49;176H2[23;2H[?25h[?25l[49;176H1[23;1H[?25h[?25l[22;48r[48;1H
[1;49r[22;21Hif (params.VERSION_TAG) {[48;29Hsh '''[49;172H[K[49;172H192,46[8C36%[22;46H[?25h[?25l[22;45H[K[49;177H5[22;45H[?25h[?25l[22;24H[46m([18C)[m[49;177H4[22;44H[?25h[?25l[22;24H([22;43H[K[49;177H3[22;43H[?25h[?25l[22;42H[K[49;177H2[22;42H[?25h[?25l[22;41H[K[49;177H1[22;41H[?25h[?25l[22;40H[K[49;177H0[22;40H[?25h[?25l[22;39H[K[49;176H39[22;39H[?25h[?25l[22;38H[K[49;177H8[22;38H[?25h[?25l[22;37H[K[49;177H7[22;37H[?25h[?25l[22;36H[K[49;177H6[22;36H[?25h[?25l[22;35H[K[49;177H5[22;35H[?25h[?25l[22;34H[K[49;177H4[22;34H[?25h[?25l[22;33H[K[49;177H3[22;33H[?25h[?25l[22;32H[K[49;177H2[22;32H[?25h[?25l[22;31H[K[49;177H1[22;31H[?25h[?25l[22;30H[K[49;177H0[22;30H[?25h[?25l[22;29H[K[49;176H29[22;29H[?25h[?25l[22;28H[K[49;177H8[22;28H[?25h[?25l[22;27H[K[49;177H7[22;27H[?25h[?25l[22;26H[K[49;177H6[22;26H[?25h[?25l[22;25H[K[49;177H5[22;25H[?25h[?25l[22;24H[K[49;177H4[22;24H[?25h[?25l[49;177H3[22;23H[?25h[?25l[22;22H[K[49;177H2[22;22H[?25h[?25l[22;21H[K[49;177H1[22;21H[?25h[?25l[49;177H0[22;20H[?25h[?25l[49;176H19[22;19H[?25h[?25l[49;177H8[22;18H[?25h[?25l[49;177H7[22;17H[?25h[?25l[49;177H6[22;16H[?25h[?25l[49;177H5[22;15H[?25h[?25l[49;177H4[22;14H[?25h[?25l[49;177H3[22;13H[?25h[?25l[49;177H2[22;12H[?25h[?25l[49;177H1[22;11H[?25h[?25l[49;177H0[22;10H[?25h[?25l[49;176H9 [22;9H[?25h[?25l[49;176H8[22;8H[?25h[?25l[49;176H7[22;7H[?25h[?25l[49;176H6[22;6H[?25h[?25l[49;176H5[22;5H[?25h[?25l[49;176H4[22;4H[?25h[?25l[49;176H3[22;3H[?25h[?25l[49;176H2[22;2H[?25h[?25l[49;176H1[22;1H[?25h[?25l[21;48r[48;1H
[1;49r[48;33Hecho "=== FULL PRODUCTION Build ==="[49;172H[K[49;172H191,21[8C36%[21;21H[?25h[?25l[49;177H0[21;20H[?25h[?25l[49;176H19[21;19H[?25h[?25l[49;177H8[21;18H[?25h[?25l[49;177H7[21;17H[?25h[?25l[49;177H6[21;16H[?25h[?25l[49;177H5[21;15H[?25h[?25l[49;177H4[21;14H[?25h[?25l[49;177H3[21;13H[?25h[?25l[49;177H2[21;12H[?25h[?25l[49;177H1[21;11H[?25h[?25l[49;177H0[21;10H[?25h[?25l[49;176H9 [21;9H[?25h[?25l[49;176H8[21;8H[?25h[?25l[49;176H7[21;7H[?25h[?25l[49;176H6[21;6H[?25h[?25l[49;176H5[21;5H[?25h[?25l[49;176H4[21;4H[?25h[?25l[49;176H3[21;3H[?25h[?25l[49;176H2[21;2H[?25h[?25l[49;176H1[21;1H[?25h[?25l[20;48r[48;1H
[1;49r[20;21Hdef currentBranch = params.RELEASE_BRANCH[48;33Hmvn package \[49;172H[K[49;172H190,62[8C36%[20;62H[?25h[?25l[20;61H[K[49;177H1[20;61H[?25h[?25l[20;60H[K[49;177H0[20;60H[?25h[?25l[20;59H[K[49;176H59[20;59H[?25h[?25l[20;58H[K[49;177H8[20;58H[?25h[?25l[20;57H[K[49;177H7[20;57H[?25h[?25l[20;56H[K[49;177H6[20;56H[?25h[?25l[20;55H[K[49;177H5[20;55H[?25h[?25l[20;54H[K[49;177H4[20;54H[?25h[?25l[20;53H[K[49;177H3[20;53H[?25h[?25l[20;52H[K[49;177H2[20;52H[?25h[?25l[20;51H[K[49;177H1[20;51H[?25h[?25l[20;50H[K[49;177H0[20;50H[?25h[?25l[20;49H[K[49;176H49[20;49H[?25h[?25l[20;48H[K[49;177H8[20;48H[?25h[?25l[20;47H[K[49;177H7[20;47H[?25h[?25l[20;46H[K[49;177H6[20;46H[?25h[?25l[20;45H[K[49;177H5[20;45H[?25h[?25l[20;44H[K[49;177H4[20;44H[?25h[?25l[20;43H[K[49;177H3[20;43H[?25h[?25l[20;42H[K[49;177H2[20;42H[?25h[?25l[20;41H[K[49;177H1[20;41H[?25h[?25l[49;177H0[20;40H[?25h[?25l[20;39H[K[49;176H39[20;39H[?25h[?25l[49;177H8[20;38H[?25h[?25l[20;37H[K[49;177H7[20;37H[?25h[?25l[20;36H[K[49;177H6[20;36H[?25h[?25l[20;35H[K[49;177H5[20;35H[?25h[?25l[20;34H[K[49;177H4[20;34H[?25h[?25l[20;33H[K[49;177H3[20;33H[?25h[?25l[20;32H[K[49;177H2[20;32H[?25h[?25l[20;31H[K[49;177H1[20;31H[?25h[?25l[20;30H[K[49;177H0[20;30H[?25h[?25l[20;29H[K[49;176H29[20;29H[?25h[?25l[20;28H[K[49;177H8[20;28H[?25h[?25l[20;27H[K[49;177H7[20;27H[?25h[?25l[20;26H[K[49;177H6[20;26H[?25h[?25l[20;25H[K[49;177H5[20;25H[?25h[?25l[49;177H4[20;24H[?25h[?25l[20;23H[K[49;177H3[20;23H[?25h[?25l[20;22H[K[49;177H2[20;22H[?25h[?25l[20;21H[K[49;177H1[20;21H[?25h[?25l[49;177H0[20;20H[?25h[?25l[49;176H19[20;19H[?25h[?25l[49;177H8[20;18H[?25h[?25l[49;177H7[20;17H[?25h[?25l[49;177H6[20;16H[?25h[?25l[49;177H5[20;15H[?25h[?25l[49;177H4[20;14H[?25h[?25l[49;177H3[20;13H[?25h[?25l[49;177H2[20;12H[?25h[?25l[49;177H1[20;11H[?25h[?25l[49;177H0[20;10H[?25h[?25l[49;176H9 [20;9H[?25h[?25l[49;176H8[20;8H[?25h[?25l[49;176H7[20;7H[?25h[?25l[49;176H6[20;6H[?25h[?25l[49;176H5[20;5H[?25h[?25l[49;176H4[20;4H[?25h[?25l[49;176H3[20;3H[?25h[?25l[49;176H2[20;2H[?25h[?25l[49;176H1[20;1H[?25h[?25l[19;48r[48;1H
[1;49r[19;21Hdef allowedBranches = [46m[[m'master', 'main'[46m][m[48;37H-P${BUILD_PROFILE} \[49;172H[K[49;172H189,61[8C36%[19;61H[?25h[?25l[19;43H[[19;60H[K[49;177H0[19;60H[?25h[?25l[19;59H[K[49;176H59[19;59H[?25h[?25l[19;58H[K[49;177H8[19;58H[?25h[?25l[19;57H[K[49;177H7[19;57H[?25h[?25l[19;56H[K[49;177H6[19;56H[?25h[?25l[19;55H[K[49;177H5[19;55H[?25h[?25l[19;54H[K[49;177H4[19;54H[?25h[?25l[49;177H3[19;53H[?25h[?25l[19;52H[K[49;177H2[19;52H[?25h[?25l[19;51H[K[49;177H1[19;51H[?25h[?25l[19;50H[K[49;177H0[19;50H[?25h[?25l[19;49H[K[49;176H49[19;49H[?25h[?25l[19;48H[K[49;177H8[19;48H[?25h[?25l[19;47H[K[49;177H7[19;47H[?25h[?25l[19;46H[K[49;177H6[19;46H[?25h[?25l[19;45H[K[49;177H5[19;45H[?25h[?25l[19;44H[K[49;177H4[19;44H[?25h[?25l[19;43H[K[49;177H3[19;43H[?25h[?25l[49;177H2[19;42H[?25h[?25l[19;41H[K[49;177H1[19;41H[?25h[?25l[49;177H0[19;40H[?25h[?25l[19;39H[K[49;176H39[19;39H[?25h[?25l[19;38H[K[49;177H8[19;38H[?25h[?25l[19;37H[K[49;177H7[19;37H[?25h[?25l[19;36H[K[49;177H6[19;36H[?25h[?25l[19;35H[K[49;177H5[19;35H[?25h[?25l[19;34H[K[49;177H4[19;34H[?25h[?25l[19;33H[K[49;177H3[19;33H[?25h[?25l[19;32H[K[49;177H2[19;32H[?25h[?25l[19;31H[K[49;177H1[19;31H[?25h[?25l[19;30H[K[49;177H0[19;30H[?25h[?25l[19;29H[K[49;176H29[19;29H[?25h[?25l[19;28H[K[49;177H8[19;28H[?25h[?25l[19;27H[K[49;177H7[19;27H[?25h[?25l[19;26H[K[49;177H6[19;26H[?25h[?25l[19;25H[K[49;177H5[19;25H[?25h[?25l[49;177H4[19;24H[?25h[?25l[19;23H[K[49;177H3[19;23H[?25h[?25l[19;22H[K[49;177H2[19;22H[?25h[?25l[19;21H[K[49;177H1[19;21H[?25h[?25l[49;177H0[19;20H[?25h[?25l[49;176H19[19;19H[?25h[?25l[49;177H8[19;18H[?25h[?25l[49;177H7[19;17H[?25h[?25l[49;177H6[19;16H[?25h[?25l[49;177H5[19;15H[?25h[?25l[49;177H4[19;14H[?25h[?25l[49;177H3[19;13H[?25h[?25l[49;177H2[19;12H[?25h[?25l[49;177H1[19;11H[?25h[?25l[49;177H0[19;10H[?25h[?25l[49;176H9 [19;9H[?25h[?25l[49;176H8[19;8H[?25h[?25l[49;176H7[19;7H[?25h[?25l[49;176H6[19;6H[?25h[?25l[49;176H5[19;5H[?25h[?25l[49;176H4[19;4H[?25h[?25l[49;176H3[19;3H[?25h[?25l[49;176H2[19;2H[?25h[?25l[49;176H1[19;1H[?25h[?25l[18;48r[48;1H
[1;49r[18;17Hscript {[48;37H-DskipTests \[49;172H[K[49;172H188,25[8C37%[18;25H[?25h[?25l[18;24H[K[49;177H4[18;24H[?25h[?25l[49;177H3[18;23H[?25h[?25l[18;22H[K[49;177H2[18;22H[?25h[?25l[18;21H[K[49;177H1[18;21H[?25h[?25l[18;20H[K[49;177H0[18;20H[?25h[?25l[18;19H[K[49;176H19[18;19H[?25h[?25l[18;18H[K[49;177H8[18;18H[?25h[?25l[18;17H[K[49;177H7[18;17H[?25h[?25l[49;177H6[18;16H[?25h[?25l[49;177H5[18;15H[?25h[?25l[49;177H4[18;14H[?25h[?25l[49;177H3[18;13H[?25h[?25l[49;177H2[18;12H[?25h[?25l[49;177H1[18;11H[?25h[?25l[49;177H0[18;10H[?25h[?25l[49;176H9 [18;9H[?25h[?25l[49;176H8[18;8H[?25h[?25l[49;176H7[18;7H[?25h[?25l[49;176H6[18;6H[?25h[?25l[49;176H5[18;5H[?25h[?25l[49;176H4[18;4H[?25h[?25l[49;176H3[18;3H[?25h[?25l[49;176H2[18;2H[?25h[?25l[49;176H1[18;1H[?25h[?25l[17;48r[48;1H
[1;49r[17;17Hecho 'ðŸ”[17;26HRunning production security validations...'[48;37H-Dmaven.test.skip=true \[49;172H[K[49;172H187,71-69     37%[17;69H[?25h[?25l[17;68H[K[49;177H0-68[17;68H[?25h[?25l[17;67H[K[49;176H69-67[17;67H[?25h[?25l[17;66H[K[49;177H8-66[17;66H[?25h[?25l[17;65H[K[49;177H7-65[17;65H[?25h[?25l[17;64H[K[49;177H6-64[17;64H[?25h[?25l[17;63H[K[49;177H5-63[17;63H[?25h[?25l[17;62H[K[49;177H4-62[17;62H[?25h[?25l[17;61H[K[49;177H3-61[17;61H[?25h[?25l[17;60H[K[49;177H2-60[17;60H[?25h[?25l[17;59H[K[49;177H1-59[17;59H[?25h[?25l[17;58H[K[49;177H0-58[17;58H[?25h[?25l[17;57H[K[49;176H59-57[17;57H[?25h[?25l[17;56H[K[49;177H8-56[17;56H[?25h[?25l[17;55H[K[49;177H7-55[17;55H[?25h[?25l[17;54H[K[49;177H6-54[17;54H[?25h[?25l[49;177H5-53[17;53H[?25h[?25l[17;52H[K[49;177H4-52[17;52H[?25h[?25l[17;51H[K[49;177H3-51[17;51H[?25h[?25l[17;50H[K[49;177H2-50[17;50H[?25h[?25l[17;49H[K[49;177H1-49[17;49H[?25h[?25l[17;48H[K[49;177H0-48[17;48H[?25h[?25l[17;47H[K[49;176H49-47[17;47H[?25h[?25l[17;46H[K[49;177H8-46[17;46H[?25h[?25l[17;45H[K[49;177H7-45[17;45H[?25h[?25l[49;177H6-44[17;44H[?25h[?25l[17;43H[K[49;177H5-43[17;43H[?25h[?25l[17;42H[K[49;177H4-42[17;42H[?25h[?25l[17;41H[K[49;177H3-41[17;41H[?25h[?25l[17;40H[K[49;177H2-40[17;40H[?25h[?25l[17;39H[K[49;177H1-39[17;39H[?25h[?25l[17;38H[K[49;177H0-38[17;38H[?25h[?25l[17;37H[K[49;176H39-37[17;37H[?25h[?25l[17;36H[K[49;177H8-36[17;36H[?25h[?25l[17;35H[K[49;177H7-35[17;35H[?25h[?25l[17;34H[K[49;177H6-34[17;34H[?25h[?25l[49;177H5-33[17;33H[?25h[?25l[17;32H[K[49;177H4-32[17;32H[?25h[?25l[17;31H[K[49;177H3-31[17;31H[?25h[?25l[17;30H[K[49;177H2-30[17;30H[?25h[?25l[17;29H[K[49;177H1-29[17;29H[?25h[?25l[17;28H[K[49;177H0-28[17;28H[?25h[?25l[17;27H[K[49;176H29-27[17;27H[?25h[?25l[17;26H[K[49;177H8-26[17;26H[?25h[?25l[49;177H7-25[17;25H[?25h[?25l[17;23H[K[49;177H3   [17;23H[?25h[?25l[17;22H[K[49;177H2[17;22H[?25h[?25l[49;177H1[17;21H[?25h[?25l[17;20H[K[49;177H0[17;20H[?25h[?25l[17;19H[K[49;176H19[17;19H[?25h[?25l[17;18H[K[49;177H8[17;18H[?25h[?25l[17;17H[K[49;177H7[17;17H[?25h[?25l[49;177H6[17;16H[?25h[?25l[49;177H5[17;15H[?25h[?25l[49;177H4[17;14H[?25h[?25l[49;177H3[17;13H[?25h[?25l[49;177H2[17;12H[?25h[?25l[49;177H1[17;11H[?25h[?25l[49;177H0[17;10H[?25h[?25l[49;176H9 [17;9H[?25h[?25l[49;176H8[17;8H[?25h[?25l[49;176H7[17;7H[?25h[?25l[49;176H6[17;6H[?25h[?25l[49;176H5[17;5H[?25h[?25l[49;176H4[17;4H[?25h[?25l[49;176H3[17;3H[?25h[?25l[49;176H2[17;2H[?25h[?25l[49;176H1[17;1H[?25h[?25l[16;48r[48;1H
[1;49r[16;13Hsteps[48;37H-Dmaven.javadoc.skip=true \[49;172H[K[49;172H186,19[8C37%[16;19H[?25h[?25l[49;177H8[16;18H[?25h[?25l[16;17H[K[49;177H7[16;17H[?25h[?25l[16;16H[K[49;177H6[16;16H[?25h[?25l[16;15H[K[49;177H5[16;15H[?25h[?25l[16;14H[K[49;177H4[16;14H[?25h[?25l[16;13H[K[49;177H3[16;13H[?25h[?25l[49;177H2[16;12H[?25h[?25l[49;177H1[16;11H[?25h[?25l[49;177H0[16;10H[?25h[?25l[49;176H9 [16;9H[?25h[?25l[49;176H8[16;8H[?25h[?25l[49;176H7[16;7H[?25h[?25l[49;176H6[16;6H[?25h[?25l[49;176H5[16;5H[?25h[?25l[49;176H4[16;4H[?25h[?25l[49;176H3[16;3H[?25h[?25l[49;176H2[16;2H[?25h[?25l[49;176H1[16;1H[?25h[?25l[15;48r[48;1H
[1;49r[15;9Hstage('Production Security Check') {[48;37H-Dmaven.source.skip=true \[49;172H[K[49;172H185,45[8C37%[15;45H[?25h[?25l[15;44H[K[49;177H4[15;44H[?25h[?25l[15;14H[46m([27C)[m[49;177H3[15;43H[?25h[?25l[15;14H([15;42H[K[49;177H2[15;42H[?25h[?25l[15;41H[K[49;177H1[15;41H[?25h[?25l[15;40H[K[49;177H0[15;40H[?25h[?25l[15;39H[K[49;176H39[15;39H[?25h[?25l[15;38H[K[49;177H8[15;38H[?25h[?25l[15;37H[K[49;177H7[15;37H[?25h[?25l[15;36H[K[49;177H6[15;36H[?25h[?25l[49;177H5[15;35H[?25h[?25l[15;34H[K[49;177H4[15;34H[?25h[?25l[15;33H[K[49;177H3[15;33H[?25h[?25l[15;32H[K[49;177H2[15;32H[?25h[?25l[15;31H[K[49;177H1[15;31H[?25h[?25l[15;30H[K[49;177H0[15;30H[?25h[?25l[15;29H[K[49;176H29[15;29H[?25h[?25l[15;28H[K[49;177H8[15;28H[?25h[?25l[15;27H[K[49;177H7[15;27H[?25h[?25l[49;177H6[15;26H[?25h[?25l[15;25H[K[49;177H5[15;25H[?25h[?25l[15;24H[K[49;177H4[15;24H[?25h[?25l[15;23H[K[49;177H3[15;23H[?25h[?25l[15;22H[K[49;177H2[15;22H[?25h[?25l[15;21H[K[49;177H1[15;21H[?25h[?25l[15;20H[K[49;177H0[15;20H[?25h[?25l[15;19H[K[49;176H19[15;19H[?25h[?25l[15;18H[K[49;177H8[15;18H[?25h[?25l[15;17H[K[49;177H7[15;17H[?25h[?25l[15;16H[K[49;177H6[15;16H[?25h[?25l[15;15H[K[49;177H5[15;15H[?25h[?25l[15;14H[K[49;177H4[15;14H[?25h[?25l[15;13H[K[49;177H3[15;13H[?25h[?25l[15;12H[K[49;177H2[15;12H[?25h[?25l[15;11H[K[49;177H1[15;11H[?25h[?25l[15;10H[K[49;177H0[15;10H[?25h[?25l[15;9H[K[49;176H9 [15;9H[?25h[?25l[49;176H8[15;8H[?25h[?25l[49;176H7[15;7H[?25h[?25l[49;176H6[15;6H[?25h[?25l[49;176H5[15;5H[?25h[?25l[49;176H4[15;4H[?25h[?25l[49;176H3[15;3H[?25h[?25l[49;176H2[15;2H[?25h[?25l[49;176H1[15;1H[?25h[?25l[14;48r[48;1H
[1;49r[48;37H-Dcheckstyle.skip=false \[49;172H[K[49;172H184,9[9C37%[14;9H[?25h[?25l[49;176H8[14;8H[?25h[?25l[49;174H3[13;8H[?25h[?25l[49;174H2[12;8H[?25h[?25l[49;174H1[11;8H[?25h[?25l[49;174H0[10;8H[?25h[?25l[49;173H79[9;8H[?25h[?25l[49;174H8[8;8H[?25h[?25l[49;174H7[7;8H[?25h[?25l[49;174H6[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H175,8[9C37%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9Hstage('Production Build Info') {[49;172H[K[49;172H174,8[9C36%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H173,8[9C36%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H172,8[9C36%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H171,8[9C36%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H170,8[9C36%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[49;172H[K[49;172H169,8[9C35%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Henv.ALL_MODULES = allModules.join(',')[49;172H[K[49;172H168,8[9C35%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Henv.CHANGED_MODULES = changedModules.join(',')[49;172H[K[49;172H167,8[9C35%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// Store in environment for later stages[49;172H[K[49;172H166,8[9C35%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H165,8[9C34%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hecho "ðŸ“Š[1;30HTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"[49;172H[K[49;172H164,8[9C34%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hecho "ðŸ“‹[1;30HModules to build: ${changedModules.join(', ')}"[49;172H[K[49;172H163,8[9C34%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H162,8[9C34%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H161,8[9C34%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25HchangedModules = allModules[49;172H[K[49;172H160,8[9C33%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hecho "ðŸ”„[1;34HFull build requested or no specific changes detected"[49;172H[K[49;172H159,8[9C33%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hif (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {[49;172H[K[49;172H158,8[9C33%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// Force full build if requested or if no changes detected[49;172H[K[49;172H157,8[9C33%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H156,8[9C32%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H155,8[9C32%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25HchangedModules = affectedModules.toList()[49;172H[K[49;172H154,8[9C32%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H153,8[9C32%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H152,8[9C32%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29H}[49;172H[K[49;172H151,8[9C31%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hbreak[49;172H[K[49;172H150,8[9C31%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33HaffectedModules.addAll(allModules)[49;172H[K[49;172H149,8[9C31%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hecho "Core file changed: ${file} - will trigger full build"[49;172H[K[49;172H148,8[9C31%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hfile.contains('config')) {[49;172H[K[49;172H147,8[9C30%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hfile.contains('parent') ||[49;172H[K[49;172H146,8[9C30%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hfile.startsWith('shared/') ||[49;172H[K[49;172H145,8[9C30%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hfile.startsWith('common/') ||[49;172H[K[49;172H144,8[9C30%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29Hif (file.equals('pom.xml') ||[49;172H[K[49;172H143,8[9C30%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29H// Also check for common files that affect all modules[49;172H[K[49;172H142,8[9C29%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H141,8[9C29%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29H}[49;172H[K[49;172H140,8[9C29%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33H}[49;172H[K[49;172H139,8[9C29%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;37HaffectedModules.add(module)[49;172H[K[49;172H138,8[9C29%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;37Hfile.contains("\\${module}\\")) {[49;172H[K[49;172H137,8[9C28%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;37Hfile.contains("/${module}/") ||[49;172H[K[49;172H136,8[9C28%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;37Hfile.startsWith("${module}\\") ||[49;172H[K[49;172H135,8[9C28%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hif (file.startsWith("${module}/") ||[49;172H[K[49;172H134,8[9C28%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29Hfor (module in allModules) {[49;172H[K[49;172H133,8[9C27%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29H// Check if file belongs to a module[49;172H[K[49;172H132,8[9C27%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hfor (file in files) {[49;172H[K[49;172H131,8[9C27%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H130,8[9C27%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hdef affectedModules = [] as Set[49;172H[K[49;172H129,8[9C27%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hdef files = changedFiles.split('\n')[49;172H[K[49;172H128,8[9C26%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hif (changedFiles) {[49;172H[K[49;172H127,8[9C26%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// Determine which modules are affected[49;172H[K[49;172H126,8[9C26%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H125,8[9C26%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hecho "Changed files: ${changedFiles}"[49;172H[K[49;172H124,8[9C25%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H123,8[9C25%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H122,8[9C25%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H121,8[9C25%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H120,8[9C25%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H119,8[9C24%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H118,8[9C24%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H117,8[9C24%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H116,8[9C24%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H115,8[9C23%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HEAD",[49;172H[K[49;172H114,8[9C23%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25HchangedFiles = sh([49;172H[K[49;172H113,8[9C23%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hif (lastBuildCommit) {[49;172H[K[49;172H112,8[9C23%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hdef changedFiles = ""[49;172H[K[49;172H111,8[9C23%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// Get changed files[49;172H[K[49;172H110,8[9C22%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H109,8[9C22%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H108,8[9C22%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25H).trim()[49;172H[K[49;172H107,8[9C22%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29HreturnStdout: true[49;172H[K[49;172H106,8[9C21%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29Hscript: "git log --format='%H' -n 1 HEAD~5",[49;172H[K[49;172H105,8[9C21%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25HlastBuildCommit = sh([49;172H[K[49;172H104,8[9C21%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hif (!lastBuildCommit) {[49;172H[K[49;172H103,8[9C21%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// If no previous build, check recent commits[49;172H[K[49;172H102,8[9C21%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H101,8[9C20%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H100,8[9C20%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hecho "No previous successful build found, will check last 5 commits"[49;172H[K[49;172H99,8[10C20%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H} catch (Exception e) {[49;172H[K[49;172H98,8[10C20%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H97,8[10C20%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29H).trim()[49;172H[K[49;172H96,8[10C19%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33HreturnStdout: true[49;172H[K[49;172H95,8[10C19%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hscript: "git log --format='%H' -n 1 --before='${lastBuild.getTime()}'",[49;172H[K[49;172H94,8[10C19%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29HlastBuildCommit = sh([49;172H[K[49;172H93,8[10C19%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hif (lastBuild) {[49;172H[K[49;172H92,8[10C18%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hdef lastBuild = currentBuild.getPreviousSuccessfulBuild()[49;172H[K[49;172H91,8[10C18%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25H// Try to get last successful build commit[49;172H[K[49;172H90,8[10C18%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Htry {[49;172H[K[49;172H89,8[10C18%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hdef lastBuildCommit = ""[49;172H[K[49;172H88,8[10C18%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// Get changed files since last successful build[49;172H[K[49;172H87,8[10C17%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H86,8[10C17%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H85,8[10C17%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H84,8[10C17%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29HallModules.add(moduleName)[49;172H[K[49;172H83,8[10C16%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;29Hdef moduleName = pomFile.replaceAll('./([^/]+)/pom.xml', '$1')[49;172H[K[49;172H82,8[10C16%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hif (pomFile != './pom.xml') {[49;172H[K[49;172H81,8[10C16%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hfor (pomFile in pomFiles) {[49;172H[K[49;172H80,8[10C16%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// Extract module names from pom files[49;172H[K[49;172H79,8[10C16%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H78,8[10C15%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H).trim().split('\n')[49;172H[K[49;172H77,8[10C15%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25HreturnStdout: true[49;172H[K[49;172H76,8[10C15%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hscript: "find . -name 'pom.xml' -not -path './target/*' | head -20",[49;172H[K[49;172H75,8[10C15%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hdef pomFiles = sh([49;172H[K[49;172H74,8[10C14%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H// Get all Maven modules[49;172H[K[49;172H73,8[10C14%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H72,8[10C14%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hdef allModules = [][49;172H[K[49;172H71,8[10C14%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hdef changedModules = [][49;172H[K[49;172H70,8[10C14%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H69,8[10C13%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ”[1;26HDetecting changed modules since last build...'[49;172H[K[49;172H68,8[10C13%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H67,8[10C13%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9Hstage('Detect Changed Modules') {[49;172H[K[49;172H66,8[10C13%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H65,8[10C12%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H64,8[10C12%[6;8H[?25h[?25l[1;48r[1;1H[2L[1;49r[1;17H}[2;13H}[49;172H[K[49;172H62,8[10C12%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H61,8[10C12%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H60,8[10C11%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hbranches: [[name: "*/${params.RELEASE_BRANCH}"]],[49;172H[K[49;172H59,8[10C11%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H58,8[10C11%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H57,8[10C11%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33HuserRemoteConfigs: scm.userRemoteConfigs])[49;172H[K[49;172H56,8[10C10%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;33Hbranches: [[name: "refs/tags/${params.VERSION_TAG}"]],[49;172H[K[49;172H55,8[10C10%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;25Hcheckout([$class: 'GitSCM',[49;172H[K[49;172H54,8[10C10%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H53,8[10C10%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H52,8[10C10%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ”’[1;26HChecking out source code for PRODUCTION build..."[49;172H[K[49;172H51,8[11C9%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H50,8[11C9%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9Hstage('Production Checkout') {[49;172H[K[49;172H49,8[11C9%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;5Hstages {[49;172H[K[49;172H48,8[11C9%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H47,8[11C9%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;5H}[49;172H[K[49;172H46,8[11C8%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H45,8[11C8%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Deploy to production? (Requires approval)'[49;172H[K[49;172H44,8[11C8%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13HdefaultValue: false,[49;172H[K[49;172H43,8[11C8%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hname: 'DEPLOY_TO_PROD',[49;172H[K[49;172H42,5[11C7%[6;5H[1;48r[1;1H[L[1;49r[1;9HbooleanParam([49;172H[K[49;172H41,6[11C7%[6;6H[?25h[?25l[1;48r[1;1H[4L[1;49r[1;13Hname: 'CREATE_BACKUP',[2;13HdefaultValue: true,[3;13Hdescription: 'Create backup before production deployment?'[4;9H)[49;172H[K[49;172H37,8[11C6%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HbooleanParam([49;172H[K[49;172H36,8[11C6%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H35,8[11C6%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Force full build instead of incremental?'[49;172H[K[49;172H34,8[11C6%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13HdefaultValue: false,[49;172H[K[49;172H33,8[11C5%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hname: 'FORCE_FULL_BUILD',[49;172H[K[49;172H32,8[11C5%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HbooleanParam([49;172H[K[49;172H31,8[11C5%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H30,8[11C5%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Version tag for this production release (e.g., v1.2.3)'[49;172H[K[49;172H29,8[11C5%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13HdefaultValue: '',[49;172H[K[49;172H28,8[11C4%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hname: 'VERSION_TAG',[49;172H[K[49;172H27,8[11C4%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9Hstring([49;172H[K[49;172H26,8[11C4%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9H)[49;172H[K[49;172H25,8[11C4%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hdescription: 'Select release branch for production build'[49;172H[K[49;172H24,8[11C3%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hchoices: ['master', 'release/*'],[49;172H[K[49;172H23,8[11C3%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;13Hname: 'RELEASE_BRANCH',[49;172H[K[49;172H22,8[11C3%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9Hchoice([49;172H[K[49;172H21,8[11C3%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;5Hparameters {[49;172H[K[49;172H20,8[11C3%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H19,8[11C2%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;5H}[49;172H[K[49;172H18,8[11C2%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HBUILD_PROFILE = 'prod'[49;172H[K[49;172H17,8[11C2%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HDEPLOY_TARGET = 'prod-server'[49;172H[K[49;172H16,8[11C2%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HENV_NAME = 'PRODUCTION'[49;172H[K[49;172H15,8[11C1%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H14,5[11C1%[6;5H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HPATH = "${env.PATH}:/usr/bin"[49;172H[K[49;172H13,6[11C1%[6;6H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HM2_HOME = '/usr/share/maven'[49;172H[K[49;172H12,8[11C1%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HJAVA_HOME = '/usr/lib/jvm/java-17-openjdk-17.0.15.0.6-2.el9.x86_64'[49;172H[K[49;172H11,8[11C1%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;9HMAVEN_OPTS = '-Xmx3072m -XX:+UseG1GC'[49;172H[K[49;172H10,8[11C0%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;5Henvironment {[49;172H[K[49;172H9,8[12C0%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[49;172H[K[49;172H8,8[12C0%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;5Hagent any[49;172H[K[49;172H7,8[12C0%[6;8H[?25h[?25l[1;48r[1;1H[L[1;49r[1;1Hpipeline {[49;172H[K[49;172H6,8[11CTop[6;8H[?25h[?25l[49;172H5[5;8H[?25h[?25l[49;172H4[4;8H[?25h[?25l[49;172H3,5[3;5H[?25h[?25l[49;172H2,8[2;8H[?25h[?25l[49;172H1[1;8H[?25h[49;1H[K[1;7H[?25l[49;162H^[[1;7H[49;162H  [1;8H[49;172H1,7[11CTop[1;7H[?25h[?25l[49;162H:[1;7H[49;162H[K[49;1H:[?25hwq[?25l[?2004l[>4;m"Jenkinsfile" 503L, 23395B written[23;2t[23;1t
[?1004l[?2004l[?1l>[?25h[>4;m[?1049l[23;0;0t]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ sudo vi Jenkinsfile git push origin productioncommit -m "Change Jenkins file"add .[K
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git add .sudo vi Jenkinsfile git push origin productioncommit -m "Change Jenkins file"[1P[1P[1P[1P[1P[1P[1@E[1@d[1@i[1@t[C[C[C[C[C[C[C[C[C[C[C[C[C[C
[?2004l[production aa2a916aac] Edit Jenkins file
 2 files changed, 523 insertions(+), 19 deletions(-)
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git commit -m "Edit Jenkins file"add .[Ksudo vi Jenkinsfile git push origin productioncommit -m "Change Jenkins file"[9Ppush origin production
[?2004lUsername for 'https://github.com': Nethmiss     hnissanka
Password for 'https://Nethnissanka@github.com': 
Enumerating objects: 7, done.
Counting objects:  14% (1/7)Counting objects:  28% (2/7)Counting objects:  42% (3/7)Counting objects:  57% (4/7)Counting objects:  71% (5/7)Counting objects:  85% (6/7)Counting objects: 100% (7/7)Counting objects: 100% (7/7), done.
Delta compression using up to 4 threads
Compressing objects:  25% (1/4)Compressing objects:  50% (2/4)Compressing objects:  75% (3/4)Compressing objects: 100% (4/4)Compressing objects: 100% (4/4), done.
Writing objects:  25% (1/4)Writing objects:  50% (2/4)Writing objects:  75% (3/4)Writing objects: 100% (4/4)Writing objects: 100% (4/4), 30.89 KiB | 2.57 MiB/s, done.
Total 4 (delta 2), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas:   0% (0/2)[Kremote: Resolving deltas:  50% (1/2)[Kremote: Resolving deltas: 100% (2/2)[Kremote: Resolving deltas: 100% (2/2), completed with 2 local objects.[K
To https://github.com/Nethnissanka/thingsboard.git
   950374dde9..aa2a916aac  production -> production
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git push origin productioncommit -m "Edit Jenkins file"add .[Ksudo vi Jenkinsfile git push origin production[6Psudo vi Jenkinsfile 
[?2004l[?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;49r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[49;1H[1m[37m[41mE325: ATTENTION[m
Found a swap file by the name ".Jenkinsfile.swp"
[10Cowned by: nethmi   dated: Fri Jun 20 05:58:35 2025
[9Cfile name: /home/nethmi/Projects/thingsboard/Jenkinsfile
[10Cmodified: YES
[9Cuser name: root   host name: server1
[8Cprocess ID: 111376
While opening file "Jenkinsfile"
[13Cdated: Mon Jun 23 04:15:06 2025
      NEWER than swap file!

(1) Another program may be editing the same file.  If this is the case,
    be careful not to end up with two different instances of the same
    file when making changes.  Quit, or continue with caution.
(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r Jenkinsfile"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file ".Jenkinsfile.swp"
    to avoid this message.

[32mSwap file ".Jenkinsfile.swp" already exists![m
[32m[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: [?25h[m[49;1H[K[?25l[49;1H"Jenkinsfile" 503L, 23395B[2;1Hâ–½[6n[2;1H  [3;1HPzz\[0%m[6n[3;1H           [1;1H[>c]10;?]11;?[1;1Hpipeline {
    agent any[2;14H[K[3;1H    [3;5H[K[4;5Henvironment {[5;9HMAVEN_OPTS = '-Xmx3072m -XX:+UseG1GC'[6;9HJAVA_HOME = '/usr/lib/jvm/java-17-openjdk-17.0.15.0.6-2.el9.x86_64'[7;9HM2_HOME = '/usr/share/maven'[8;9HPATH = "${env.PATH}:/usr/bin"[10;9HENV_NAME = 'PRODUCTION'[11;9HDEPLOY_TARGET = 'prod-server'[12;9HBUILD_PROFILE = 'prod'
    }[15;5Hparameters {[16;9Hchoice([17;13Hname: 'RELEASE_BRANCH',[18;13Hchoices: ['master', 'release/*'],[19;13Hdescription: 'Select release branch for production build'[20;9H)[21;9Hstring([22;13Hname: 'VERSION_TAG',[23;13HdefaultValue: '',[24;13Hdescription: 'Version tag for this production release (e.g., v1.2.3)'[25;9H)[26;9HbooleanParam([27;13Hname: 'FORCE_FULL_BUILD',
            defaultValue: false,
            description: 'Force full build instead of incremental?'[30;9H)[30;11H[K[31;9HbooleanParam([31;22H[K[32;11H  name: 'CREATE_BACKUP',[33;10H   defaultValue: true,[33;33H[K[34;9H    description: 'Create backup before production deployment?'
        )[35;10H[K[36;9HbooleanParam([36;22H[K[37;7H      name: 'DEPLOY_TO_PROD',[38;13HdefaultValue: false,
            description: 'Deploy to production? (Requires approval)'[39;69H[K[40;5H    )[40;10H[K[41;5H}[41;6H[K[42;1H   [42;5H[K[43;5Hstages {[43;13H[K[44;5H    stage('Production Checkout') {[44;40H[K[45;5H        steps {[45;21H[K[46;5H            echo "ðŸ”’[46;25H Checking out source code for PRODUCTION build..."[47;17Hscript {
                    if (params.VERSION_TAG) {[49;172H1,7[11CTop[1;7H[?25h[?25l[49;162H:[1;7H[49;1H[K[49;1H:[?25h%d[?25l[1;1H[1;1H[K[2;1H[1m[34m~                                                                                                                                                                                            [3;1H~                                                                                                                                                                                            [4;1H~                                                                                                                                                                                            [5;1H~                                                                                                                                                                                            [6;1H~                                                                                                                                                                                            [7;1H~                                                                                                                                                                                            [8;1H~                                                                                                                                                                                            [9;1H~                                                                                                                                                                                            [10;1H~                                                                                                                                                                                            [11;1H~                                                                                                                                                                                            [12;1H~                                                                                                                                                                                            [13;1H~                                                                                                                                                                                            [14;1H~                                                                                                                                                                                            [15;1H~                                                                                                                                                                                            [16;1H~                                                                                                                                                                                            [17;1H~                                                                                                                                                                                            [18;1H~                                                                                                                                                                                            [19;1H~                                                                                                                                                                                            [20;1H~                                                                                                                                                                                            [21;1H~                                                                                                                                                                                            [22;1H~                                                                                                                                                                                            [23;1H~                                                                                                                                                                                            [24;1H~                                                                                                                                                                                            [25;1H~                                                                                                                                                                                            [26;1H~                                                                                                                                                                                            [27;1H~                                                                                                                                                                                            [28;1H~                                                                                                                                                                                            [29;1H~                                                                                                                                                                                            [30;1H~                                                                                                                                                                                            [31;1H~                                                                                                                                                                                            [32;1H~                                                                                                                                                                                            [33;1H~                                                                                                                                                                                            [34;1H~                                                                                                                                                                                            [35;1H~                                                                                                                                                                                            [36;1H~                                                                                                                                                                                            [37;1H~                                                                                                                                                                                            [38;1H~                                                                                                                                                                                            [39;1H~                                                                                                                                                                                            [40;1H~                                                                                                                                                                                            [41;1H~                                                                                                                                                                                            [42;1H~                                                                                                                                                                                            [43;1H~                                                                                                                                                                                            [44;1H~                                                                                                                                                                                            [45;1H~                                                                                                                                                                                            [46;1H~                                                                                                                                                                                            [47;1H~                                                                                                                                                                                            [48;1H~                                                                                                                                                                                            [m[49;172H0,0-1[9CAll--No lines in buffer--[49;172H[K[49;172H0,0-1[9CAll[1;1H[?25h[?25l[49;1H[1m-- INSERT --[m[49;13H[K[49;172H0,1[11CAll[1;1Hpipeline {
    agent any[2;14H[K[3;1H    [3;5H[K[4;1H    environment {[4;18H[K[5;1H        [5;9H[K[5;9H[?25h[?25lMAVEN_OPTS = '-Xmx3072m -XX:+UseG1GC'[6;1H[K[6;1H[?25h[?25l[8CJAVA_HOME = '/usr/lib/jvm/java-17-openjdk-17.0.15.0.6-2.el9.x86[?25h[?25l_64'
        M2_HOME = '/usr/share/maven'[7;37H[K[8;1H        PATH = "${env.PATH[8;27H[K[8;27H[?25h[?25l}:/usr/bin"
        [9;9H[K[10;1H        ENV_NAME = 'PRODUCTION'[10;32H[K[11;1H        DEPLO[11;14H[K[11;14H[?25h[?25lY_TARGET = 'prod-server'
        BUILD_PROFILE = 'prod'[12;31H[K[13;1H    }[13;6H[K[14;1H   [14;4H[K[14;4H[?25h[?25l
    parameters {[15;17H[K[16;1H        choice([16;16H[K[17;1H            name: 'RELEASE_BRA[17;31H[K[17;31H[?25h[?25lNCH',
            choices: ['master', 'release/*'],[18;46H[K[19;1H            [19;13H[K[19;13H[?25h[?25ldescription: 'Select release branch for production build'
      [20;7H[K[20;7H[?25h[?25l  )
        string([21;16H[K[22;1H            name: 'VERSION_TAG',[22;33H[K[23;1H          [23;11H[K[23;11H[?25h[?25l  defaultValue: '',
            description: 'Version tag for t[24;44H[K[24;44H[?25h[?25lhis production release (e.g., v1.2.3)'
        )[25;10H[K[26;1H        boolea[26;15H[K[26;15H[?25h[?25lnParam(
            name: 'FORCE_FULL_BUILD',[27;38H[K[28;1H            defau[28;18H[K[28;18H[?25h[?25lltValue: false,
            description: 'Force full build inst[29;48H[K[29;48H[?25h[?25lead of incremental?'
        )[30;10H[K[31;1H        booleanParam([31;22H[K[32;1H          [32;11H[K[32;11H[?25h[?25l  name: 'CREATE_BACKUP',
            defaultValue: true,[33;32H[K[34;1H      [34;7H[K[34;7H[?25h[?25l      description: 'Create backup before production deployment?[?25h[?25l'
        )[35;10H[K[36;1H        booleanParam([36;22H[K[37;1H            name: 'DEPLOY_TO_[37;30H[K[37;30H[?25h[?25lPROD',
            defaultValue: false,[38;33H[K[39;1H            description[39;24H[K[39;24H[?25h[?25l: 'Deploy to production? (Requires approval)'
        )[40;10H[K[41;1H    }[41;6H[K[42;1H [42;2H[K[42;2H[?25h[?25l
    stages {[43;13H[K[44;1H        stage('Production Checkout') {[44;39H[K[45;1H       [45;8H[K[45;8H[?25h[?25l     steps {
                echo "ðŸ”’[46;25H Checking out source cod[46;49H[K[46;49H[?25h[?25le for PRODUCTION build..."
                script {[47;25H[K[48;1H           [48;12H[K[48;12H[?25h[?25l[9Cif (params.VERSION_TAG) {[48;29H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hcheckout([$class: 'GitSCM',[49;11H[1m(paste) --[m[49;172H[K[48;40H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hbranches: [[name: "refs/tags/${params.VERSION_TAG}"]],[48;16H[?25h[?25l[1;48r[48;1H
[1;49r[48;33HuserRemoteConfigs: scm.userRemoteConfigs])   [?25h[?25l[1;48r[48;1H
[1;49r[48;21H} else {[9C[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hcheckout([$class: 'GitSCM',[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hbranches: [[name: "*/${params.RELEASE_BRANCH}"]],[48;30H[?25h[?25l[1;48r[48;1H
[1;49r[48;33HuserRemoteConfigs: scm.userRemoteConfigs])[48;18H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H}[48;8H[?25h[?25l[1;48r[1;1H[5M[1;49r[44;17H}[45;13H}[46;9H}[48;9Hstage('Detect Changed Modules') {[48;9H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho 'ðŸ”[48;26HDetecting changed modules since last build..[?25h[?25l.'[48;36H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;17Hscript {[48;21Hdef changedModules = [][48;15H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Hdef allModules = [][48;12H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21H// Get all Maven modules[48;21Hdef pomFiles = sh([?25h[?25l[1;48r[48;1H
[1;49r[48;25Hscript: "find . -name 'pom.xml' -not -path './target/*' | head -20",     [?25h[?25l[1;48r[48;1H
[1;49r[48;25HreturnStdout: true[48;26H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H).trim().split('\n')[48;27H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21H// Extract module names from pom files[48;31H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hfor (pomFile in pomFiles) {[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hif (pomFile != './pom.xml') { [?25h[?25l[1;48r[48;1H
[1;49r[48;29Hdef moduleName = pomFile.replaceAll('./([^/]+)/pom.xml', '$1')[48;27H[?25h[?25l[1;48r[48;1H
[1;49r[48;29HallModules.add(moduleName)[48;9H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;25H}[48;21H}[7C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21H// Get changed files since last successful build[48;23H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hdef lastBuildCommit = ""[48;15H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Htry {[48;25H// Try to get last successful build commit[48;11H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hdef lastBuild = currentBuild.getPreviousSuccessfu[?25h[?25llBuild()[48;14H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;25Hif (lastBuild) {[48;29HlastBuildCommit = sh([48;27H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hscript: "git log --format='%H' -n 1 --before='${lastBuild[?25h[?25l.getTime()}'",[48;49H[?25h[?25l[1;48r[48;1H
[1;49r[48;33HreturnStdout: true[48;24H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29H).trim()[48;25H}[48;17H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21H} catch (Exception e) {[48;25Hecho "No previous successful build found, will check la[?25h[?25lst 5 commits"[48;7H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;21H}[48;21H// If no previous build, check recent commits   [?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif (!lastBuildCommit) {[48;23H[?25h[?25l[1;48r[48;1H
[1;49r[48;25HlastBuildCommit = sh([?25h[?25l[1;48r[48;1H
[1;49r[48;29Hscript: "git log --format='%H' -n 1 HEAD~5",[48;30H[?25h[?25l[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[48;13H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;25H).trim()[48;21H}[11C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21H// Get changed files[48;13H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Hdef changedFiles = ""[48;21Hif (lastBuildCommit) {[48;33H[?25h[?25l[1;48r[48;1H
[1;49r[48;25HchangedFiles = sh([10C[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hscript: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1 HE[?25h[?25lAD",[48;12H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29HreturnStdout: true[48;25H).trim()[48;13H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21H} else {[48;25HchangedFiles = sh([48;33H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hscript: "git diff --name-only HEAD~1 HEAD",[48;24H[?25h[?25l[1;48r[48;1H
[1;49r[48;29HreturnStdout: true[48;7H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;25H).trim()[48;21H}     [?25h[?25l[1;48r[1;1H[2M[1;49r[48;21Hecho "Changed files: ${changedFiles}"[48;11H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21H// Determine which modules are affected[48;14H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif (changedFiles) {[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hdef files = changedFiles.split('\n')[48;39H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hdef affectedModules = [] as Set[48;21H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;25Hfor (file in files) {[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H// Check if file belongs to a module[48;36H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hfor (module in allModules) {[48;42H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hif (file.startsWith("${module}/") ||[48;35H[?25h[?25l[1;48r[48;1H
[1;49r[48;37Hfile.startsWith("${module}\\") ||[48;28H[?25h[?25l[1;48r[48;1H
[1;49r[48;37Hfile.contains("/${module}/") ||[48;23H[?25h[?25l[1;48r[48;1H
[1;49r[48;37Hfile.contains("\\${module}\\")) {[48;16H[?25h[?25l[1;48r[48;1H
[1;49r[48;37HaffectedModules.add(module)[48;15H[?25h[?25l[1;48r[48;1H
[1;49r[48;33H}[48;14H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29H}[48;48H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H// Also check for common files that affect all modules[48;28H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hif (file.equals('pom.xml') ||[48;32H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('common/') ||[48;33H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.startsWith('shared/') ||[48;34H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.contains('parent') ||[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfile.contains('config')) {[48;42H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hecho "Core file changed: ${file} - will trigger full build"[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;33HaffectedModules.addAll(allModules)[48;9H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hbreak   [?25h[?25l[1;48r[1;1H[2M[1;49r[47;29H}[48;25H}[48;16H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;25HchangedModules = affectedModules.toList()[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H}[11C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21H// Force full build if requested or if no changes detected[48;17H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "ðŸ”„[48;34HFull build requested or no s[?25h[?25lpecific changes detected"[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;25HchangedModules = allModules     [?25h[?25l[1;48r[1;1H[3M[1;49r[46;21H}[48;21Hecho "ðŸ“‹[48;30HModules to build: ${changedModules.jo[?25h[?25lin(', ')}"[48;51H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "ðŸ“Š[48;30HTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"    [?25h[?25l[1;48r[48;1H
[1;49r[48;47H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H// Store in environment for later stages[48;49H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Henv.CHANGED_MODULES = changedModules.join(',')[48;45H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Henv.ALL_MODULES = allModules.join(',')[48;49H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[48;7H[?25h[?25l[1;48r[48;1H
[1;49r[48;17H} [?25h[?25l[1;48r[1;1H[4M[1;49r[45;13H}[46;9H}[48;9Hstage('Production Build Info') {[48;21H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho "ðŸ­[48;26HPRODUCTION Build Information:"[48;26H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Environment: ${ENV_NAME}"[48;41H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"[48;22H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Build number: ${env.BUILD_NUMBER}"[48;28H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Build Type: ${env.BUILD_TYPE}"[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Modules to build: ${env.CHANGED_MODULES}"[48;37H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Create backup: ${params.CREATE_BACKUP}"[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hecho "Deploy to prod: ${params.DEPLOY_TO_PROD}" [?25h[?25l[1;48r[1;1H[2M[1;49r[47;17Hsh 'java -version'[48;17Hsh 'mvn -version'[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hsh 'git log --oneline -3'[48;19H[?25h[?25l[1;48r[1;1H[4M[1;49r[45;13H}[46;9H}[48;9Hstage('Production Security Check') {[48;17H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho 'ðŸ”[48;26HRunning production security validations...'[48;9H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hscript {[22C[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hdef allowedBranches = ['master','release/*', 'main'][48;37H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hdef currentBranch = params.RELEASE_BRANCH[48;17H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21Hif (params.VERSION_TAG) {[48;33H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HBuilding from version tag: ${params.VERSION_TAG}"[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H} else if (currentBranch.startsWith('release/') || allo[?25h[?25lwedBranches.contains(currentBranch)) {[48;25H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HBuilding from approved branch: ${currentBranch}"    [?25h[?25l[1;48r[48;1H
[1;49r[48;21H} else {[9C[?25h[?25l[1;48r[48;1H
[1;49r[48;25Herror("âŒ[48;35HProduction builds only allowed from master, main, or release/* bra[?25h[?25lnches") [?25h[?25l[1;48r[1;1H[4M[1;49r[45;21H}[46;17H}[47;13H}[48;9H}[36C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;9Hstage('Production Clean & Prepare') {[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho 'ðŸ§¹[48;26HCleaning workspace for production build...'[48;10H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;17Hscript {[48;21Hif (env.BUILD_TYPE == 'FULL') {[48;21H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hsh 'mvn clean -q -T 2C'[48;7H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21H} else {[48;25H// Clean only changed modules[48;16H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hdef modules = env.CHANGED_MODULES.split(',')[48;10H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hfor (module in modules) {[48;23H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hsh "mvn clean -q -f ${module}/pom.xml || true"[48;11H[?25h[?25l[1;48r[48;1H
[1;49r[48;25H}[48;8H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;21H}[47;17H}[48;13H}[24C[?25h[?25l[1;48r[1;1H[3M[1;49r[46;9H}[48;9Hstage('Incremental Production Build') {[48;31H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho "ðŸ“¦[48;26HBuilding ${env.BUILD_TYPE} - ${env.CHANGED_MODULES.split(',').length[?25h[?25l} modules..."[48;50H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Htimeout(time: 60, unit: 'MINUTES') {[48;31H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Hscript {[48;25Hif (env.BUILD_TYPE == 'FULL') {[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H// Full build[48;24H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29Hsh '''[48;33Hecho "=== FULL PRODUCTION Build ==="[48;18H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hmvn package \[48;35H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-P${BUILD_PROFILE} \[48;41H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-DskipTests \    [?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.test.skip=true \[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.javadoc.skip=true \[48;55H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.source.skip=true \[48;55H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dcheckstyle.skip=false \[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dspotbugs.skip=false \[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Denforcer.skip=false \  [?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.compiler.optimize=true \[48;56H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.compiler.debug=false \[48;10H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;37H-T 2C[48;29H'''[48;8H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;25H} else {[48;29H// Incremental build[48;22H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "=== INCREMENTAL PRODUCTION Build ==="[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hdef modules = env.CHANGED_MODULES.split(',')  [?25h[?25l[1;48r[48;1H
[1;49r[48;37H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H// Build modules with dependencies[48;37H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hdef moduleList = modules.join(',') [?25h[?25l[1;48r[1;1H[2M[1;49r[47;29Hsh """[48;33Hecho "Building modules: ${module[?25h[?25lList}"[48;24H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;33H# Build changed modules and their dependents[48;10H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hmvn package \[48;27H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-P${BUILD_PROFILE} \[48;33H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-pl ${moduleList} \[48;40H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-am \[48;11H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;37H-DskipTests \[48;37H-Dmaven.test.skip=true \[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.javadoc.skip=true \[48;12H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.source.skip=true \[48;12H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dcheckstyle.skip=false \[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dspotbugs.skip=false \[48;16H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Denforcer.skip=false \[48;19H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.compiler.optimize=true \[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-Dmaven.compiler.debug=false \[48;9H[?25h[?25l[1;48r[48;1H
[1;49r[48;37H-T 2C[48;30H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H"""[48;10H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;25H}[48;25Hsh '''[11C[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "=== Build Process Completed ==="[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Packages created:"[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hfind . -name "*.jar" -newer pom.xml 2>/dev/null | head -15[48;24H[?25h[?25l[1;48r[48;1H
[1;49r[48;25H'''    [?25h[?25l[1;48r[1;1H[4M[1;49r[45;21H}[46;17H}[47;13H}[48;9H}[39C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;9Hstage('Production Package Validation') {[48;42H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho 'âœ…[48;26HValidating built packages...'[48;27H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;17Hsh '''[48;21Hecho "=== Production Package Validation ==="   [?25h[?25l[1;48r[1;1H[2M[1;49r[48;21H# Check if packages exist for changed modules[?25h[?25l[1;48r[48;1H
[1;49r[48;21HCHANGED_MODULES="${CHANGED_MODULES}"[48;7H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif [ -n "$CHANGED_MODULES" ]; then[48;15H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hfor module in ${CHANGED_MODULES//,/ }; do[48;12H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Checking module: $module"[48;15H[?25h[?25l[1;48r[48;1H
[1;49r[48;29HMODULE_JARS=$(find "$module" -name "*.jar" 2>/dev[?25h[?25l/null | wc -l)[48;49H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hif [ "$MODULE_JARS" -gt 0 ]; then[48;49H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hecho "  âœ…[48;44H$module: $MODULE_JARS packages found"[48;31H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfind "$module" -name "*.jar" -exec ls -lh {} \\; 2>/dev/null [?25h[?25l| head -3[48;21H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29Helse[48;33Hecho "  âš ï¸[48;43H$module: No packages found (might be[?25h[?25l parent module)"[48;16H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29Hfi[48;25Hdone     [?25h[?25l[1;48r[1;1H[3M[1;49r[46;21Hfi[48;21H# Overall validation[48;28H[?25h[?25l[1;48r[48;1H
[1;49r[48;21HTOTAL_JARS=$(find . -name "*.jar" -newer pom.xml 2>/dev/null | wc -l)[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Total packages created: $TOTAL_JARS"[?25h[?25l[1;48r[48;1H
[1;49r[48;43H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif [ "$TOTAL_JARS" -eq 0 ]; then[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "âŒ[48;34HWARNING: No packages found!"[48;53H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "This might be normal for parent modules or configuration changes"[48;20H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Helse[32C[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HPackage validation completed"[48;14H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;21Hfi[47;17H'''[48;13H}[30C[?25h[?25l[1;48r[1;1H[3M[1;49r[46;9H}[48;9Hstage('Create Production Backup') {[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hwhen {[48;17Hexpression { params.CREATE_BACKUP == true }[48;13H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;13H}[47;13Hsteps {[48;17Hecho 'ðŸ’¾[48;26HCreating production backup...'[48;18H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hsh '''[35C[?25h[?25l[1;48r[48;1H
[1;49r[48;21HBACKUP_DIR="production-backup-${BUILD_NUMBER}-$(date +%Y%m%d_%H%M%S)"[48;31H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hmkdir -p "$BACKUP_DIR"[48;30H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21H# Copy packages for changed modules[48;37H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif [ -n "${CHANGED_MODULES}" ]; then[48;43H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hfor module in ${CHANGED_MODULES//,/ }; do[48;40H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hif [ -d "$module/target" ]; then[48;42H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hmkdir -p "$BACKUP_DIR/$module"[48;42H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hfind "$module/target" -name "*.jar" -exec cp {} "$BACKUP_DIR/$module/" \[?25h[?25l\; 2>/dev/null || true[48;10H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29Hfi[48;25Hdone[48;21H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Hfi[48;19H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21H# Create backup archive[48;21Hif [ -n "$(ls -A $BACKUP_DIR 2>/dev/null)" ]; then[48;11H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Htar -czf "${BACKUP_DIR}.tar.gz" "$BACKUP_DIR"   [?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "âœ…[48;34HProduction backup created: ${BAC[?25h[?25lKUP_DIR}.tar.gz"[48;47H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hls -lh "${BACKUP_DIR}.tar.gz"[48;31H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Helse[48;25Hecho "â„¹ï¸[48;33HNo packages to backup"[48;11H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Hfi[48;12H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Hrm -rf "$BACKUP_DIR"[48;17H'''[18C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;17HarchiveArtifacts artifacts: 'production-backup-*.tar.gz', allowEmptyArchive: true  [?25h[?25l[1;48r[48;1H
[1;49r[48;13H}[19C[?25h[?25l[1;48r[1;1H[3M[1;49r[46;9H}[48;9Hstage('Archive Production Packages') {[48;27H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho 'ðŸ“[48;26HArchiving production packages...'     [?25h[?25l[1;48r[1;1H[2M[1;49r[47;17Hscript {[48;21Hdef prodJars = sh([48;30H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hscript: "find . -name '*.jar' -newer pom.xml | grep -v test",[48;7H[?25h[?25l[1;48r[48;1H
[1;49r[48;25HreturnStdout: true[48;27H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H).trim()   [?25h[?25l[1;48r[1;1H[3M[1;49r[47;21Hif (prodJars) {[48;25Hecho "Archiving ${env.BUILD_TYPE.toLowerCa[?25h[?25lse()} build packages"[48;17H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;25H// Archive all built packages[48;26H[?25h[?25l[1;48r[48;1H
[1;49r[48;25HarchiveArtifacts artifacts: '**/target/*.jar',[48;17H[?25h[?25l[1;48r[48;1H
[1;49r[48;40Hexcludes: '**/target/*-tests.jar,**/targ[?25h[?25let/*-sources.jar',[48;45H[?25h[?25l[1;48r[48;1H
[1;49r[48;40HallowEmptyArchive: true,[48;44H[?25h[?25l[1;48r[48;1H
[1;49r[48;40Hfingerprint: true[48;25H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;25H// Create a release package for changed modules[48;16H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hsh '''[17C[?25h[?25l[1;48r[48;1H
[1;49r[48;29HRELEASE_DIR="thingsboard-${BUILD_TYPE,,}-${BUILD_NUMBER}"[48;25H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hmkdir -p "$RELEASE_DIR"[48;7H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;29H# Copy main application JARs[48;13H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hfind . -name "thingsboard*.jar" -o -name "appli[?25h[?25lcation*.jar" | grep -v test | while read jar; do[48;15H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hcp "$jar" "$RELEASE_DIR/" 2>/dev/null || true[?25h[?25l[?25h[?25l[1;48r[1;1H[3M[1;49r[46;29Hdone[48;29H# Create release info[48;14H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Build Type: ${BUILD_TYPE}" > "$RELEASE_DIR[?25h[?25l/build-info.txt"[48;47H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Modules: ${CHANGED_MODULES}" >> "$RELEASE_DIR/build-info.txt"[48;14H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Build: ${BUILD_NUMBER}" >> "$RELEASE_DIR/b[?25h[?25luild-info.txt"[48;49H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Date: $(date)" >> "$RELEASE_DIR/build-info.txt"[?25h[?25l[1;48r[1;1H[2M[1;49r[48;29Hif [ -n "$(ls -A $RELEASE_DIR/*.jar[?25h[?25l 2>/dev/null)" ]; then[48;41H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Htar -czf "${RELEASE_DIR}.tar.gz" "$RELEASE_DIR"[48;24H[?25h[?25l[1;48r[48;1H
[1;49r[48;33Hecho "âœ…[48;42HRelease package created: ${RELEASE_DIR}.tar.[?25h[?25lgz"[48;27H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29Helse[48;33Hecho "â„¹ï¸[48;41HNo main application JARs to package"[48;8H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hfi[48;11H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;29Hrm -rf "$RELEASE_DIR"[48;24H[?25h[?25l[1;48r[48;1H
[1;49r[48;25H'''      [?25h[?25l[1;48r[1;1H[2M[1;49r[48;25HarchiveArtifacts artifacts: 'thingsboard-*-*.tar.gz', allowEmptyArchive:[?25h[?25l true   [?25h[?25l[1;48r[1;1H[4M[1;49r[45;21H}[46;17H}[47;13H}[48;9H}[38C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;9Hstage('Production Deployment Approval') {[48;42H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hwhen {[48;17Hexpression { params.DEPLOY_TO_PROD == true }[48;10H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;13H}[47;13Hsteps {[48;17Hscript {     [?25h[?25l[1;48r[1;1H[2M[1;49r[47;21Hdef approval = input([48;25Hmessage: "ðŸš¨[48;38HDeploy ${env.BUILD_TYPE} buil[?25h[?25ld to PRODUCTION?",[48;7H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;25Hparameters: [[48;29Hchoice(name: 'DEPLOY_DECISION',[48;9H[?25h[?25l[1;48r[48;1H
[1;49r[48;36Hchoices: ['ABORT', 'DEPLOY'],     [?25h[?25l[1;48r[48;1H
[1;49r[48;36Hdescription: 'Confirm production [?25h[?25ldeployment')  [?25h[?25l[1;48r[1;1H[3M[1;49r[46;25H][47;21H)[48;45H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hif (approval == 'ABORT') {[14C[?25h[?25l[1;48r[48;1H
[1;49r[48;25Herror('Production deployment aborted by [30m[43muser[m')[48;13H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;21H}[47;17H}[48;13H}  [?25h[?25l[1;48r[1;1H[4M[1;49r[45;9H}[47;9Hstage('Deploy to Production') {[48;13Hwhen {[28C[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hexpression { params.DEPLOY_TO_PROD == true }[48;15H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;13H}[47;13Hsteps {[48;17Hecho "ðŸš€[48;26HDeploying ${env.BUILD_TYPE} build to PRODUCTION...[?25h[?25l"[48;10H[?25h[?25l[1;48r[1;1H[3M[1;49r[46;17Hscript {[47;21Hsh '''[48;25Hecho "=== PRODUCTION DEPLOYMENT ==="[48;12H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "Target: ${DEPLOY_TARGET}"[48;19H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "Build Type: ${BUILD_TYPE}"[48;25H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "Modules: ${CHANGED_MODULES}"[48;29H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hecho "Build: ${BUILD_NUMBER}"[48;13H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;25H# Deploy only changed modules (customize as needed)[?25h[?25l[48;63H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hif [ "${BUILD_TYPE}" = "INCREMENTAL" ]; then[48;57H[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Deploying incremental changes..."[48;52H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H# Example: Deploy only changed services[48;47H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H# for module in ${CHANGED_MODULES//,/ }; do[48;38H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H#     echo "Deploying module: $module"[48;34H[?25h[?25l[1;48r[48;1H
[1;49r[48;29H#     scp $module/target/*.jar prod-server:/opt/thingsboard/modules/[?25h[?25l$module/[48;20H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;29H# done[48;25Helse[25C[?25h[?25l[1;48r[48;1H
[1;49r[48;29Hecho "Deploying full build..."[?25h[?25l[1;48r[48;1H
[1;49r[48;29H# Example: Deploy full release   [?25h[?25l[1;48r[48;1H
[1;49r[48;29H# scp thingsboard-full-*.tar.gz prod-server:/opt/thingsboard/releases/[48;26H[?25h[?25l[1;48r[48;1H
[1;49r[48;25Hfi[9C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;25Hecho "âœ…[48;34HPRODUCTION deployment completed successfully"[48;20H[?25h[?25l[1;48r[48;1H
[1;49r[48;21H'''[48;8H[?25h[?25l[1;48r[1;1H[5M[1;49r[44;17H}[45;13H}[46;9H}[48;9Hstage('Production Build Report') {[48;8H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hsteps {[48;17Hecho 'ðŸ“Š[48;26HGenerating production build report...'    [?25h[?25l[1;48r[48;1H
[1;49r[48;17Hsh '''[22C[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "=== ThingsBoard PRODUCTION Build Report ===" > production-build-report.txt[48;7H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Environment: PRODUCTION" >> production-buil[?25h[?25ld-report.txt[48;51H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Build: ${BUILD_NUMBER}" >> production-build-report.txt[48;33H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Build Type: ${BUILD_TYPE}" >> production-build-report.txt[48;12H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Branch/Tag: ${VERSION_TAG:-$RELEASE_BRANCH}" >> [?25h[?25lproduction-build-report.txt[48;36H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Modules Built: ${CHANGED_MODULES}" >> production-build-report.txt[48;7H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Build Date: $(date)" >> production-build-re[?25h[?25lport.txt[48;55H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Backup Created: ${CREATE_BACKUP}" >> production-build-report.txt[48;27H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Deployed: ${DEPLOY_TO_PROD}" >> production-build-report.txt   [?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "" >> production-build-report.txt[48;8H[?25h[?25l[1;48r[48;1H
[1;49r[48;50H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "=== Git Information ===" >> production-build-report.txt[48;31H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hgit log --oneline -5 >> production-build-report.txt[48;22H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "" >> production-build-report.txt    [?25h[?25l[1;48r[1;1H[2M[1;49r[48;21Hecho "=== Packages Created ===" >> production-b[?25h[?25luild-report.txt[48;48H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hfind . -name "*.jar" -newer pom.xml -exec ls -lh {} \\; >> production-build-report.txt 2>/[?25h[?25ldev/null || echo "No packages found" >> production-build-report[?25h[?25l.txt[48;59H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "" >> production-build-report.txt[48;42H[?25h[?25l[1;48r[1;1H[2M[1;49r[48;21Hecho "=== Build Statistics ===" >> production-build-report.txt[48;22H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Total packages: $(find . -name "*.jar" -newer pom.xml | wc[?25h[?25l -l)" >> production-build-report.txt[48;27H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Build completed: $(date)" >> production-build-report.txt[48;7H[?25h[?25l[1;48r[48;1H
[1;49r[48;17H'''[13C[?25h[?25l[1;48r[1;1H[2M[1;49r[48;17HarchiveArtifacts artifacts: 'production-build-report.txt', allowEmptyArchive: t[?25h[?25lrue[48;14H[?25h[?25l[1;48r[1;1H[6M[1;49r[43;13H}[44;9H}
    }[47;5Hpost {[48;9Halways {    [?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hecho 'ðŸ[47;22HProduction pipeline completed!'[48;13Hsh 'rm -rf target/*/target || true'[48;10H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;9H}[48;9Hsuccess {[36C[?25h[?25l[1;48r[48;1H
[1;49r[48;13Hecho "âœ…[48;22H${env.BUILD_TYPE} production build succeeded!"[48;28H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hscript {[48;17Hdef version = params.VERSION_TAG ?: params.RELEASE_BRANCH[48;17H[?25h[?25l[1;48r[48;1H
[1;49r[48;17Hdef moduleCount = env.CHANGED_MODULES.split(',').length[48;8H[?25h[?25l[1;48r[48;1H
[1;49r[48;17HcurrentBuild.description = "âœ…[48;48H${env.BUILD_TYPE} buil[?25h[?25ld (${moduleCount} modules) - ${version}"[48;9H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13H}[48;9H}[33C[?25h[?25l[1;48r[1;1H[2M[1;49r[47;9Hfailure {[48;13Hecho "âŒ[48;22H${env.BUILD_TYPE} production build failed!"[48;20H[?25h[?25l[1;48r[1;1H[2M[1;49r[47;13Hscript {[48;17HcurrentBuild.description = "âŒ[48;48H${env.BUILD_TYPE} build failed at [?25h[?25l${env.STAGE_NAME}"    [?25h[?25l[1;48r[1;1H[3M[1;49r[47;17Hsh '''[48;21Hecho "CRITICAL: Production build failure" > pro[?25h[?25ld-failure.txt[48;50H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Build Type: ${BUILD_TYPE}" >> prod-failure.txt[48;40H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Modules: ${CHANGED_MODULES}" >> prod-failure.txt[48;28H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Stage: ${STAGE_NAME}" >> prod-failure.txt[48;23H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Build: ${BUILD_NUMBER}" >> prod-failure.txt[48;16H[?25h[?25l[1;48r[48;1H
[1;49r[48;21Hecho "Time: $(date)" >> prod-failure.txt[48;18H[?25h[?25l[1;48r[48;1H
[1;49r[48;17H'''[41C[?25h[?25l[1;48r[48;1H
[1;49r[48;17HarchiveArtifacts artifacts: 'prod-failure.txt', allowEmptyArchive: true [?25h[?25l[49;1H[K[1;48r[1;1H[4M[1;49r[45;13H}[46;9H}
    }
}[49;172H520,1[9CBot[48;1H[?25h[?25l[49;162H:[48;1H[49;162H[K[49;1H:[?25hwq[?25l[?2004l[>4;m"Jenkinsfile" 520L, 24242B written[23;2t[23;1t
[?1004l[?2004l[?1l>[?25h[>4;m[?1049l[23;0;0t]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ ls
[?2004l'{'               [0m[01;32mbuild.sh[0m   [01;34mdocker[0m   Jenkinsfile                   lombok.config   [01;34mnetty-mqtt[0m   [01;32mpom.xml[0m                    [01;34mrest-client[0m   [01;34mtest.txt[0m   [01;34mtransport[0m
 [01;34mapplication[0m      [01;34mcommon[0m     [01;34medqs[0m     LICENSE                       [01;34mmonitoring[0m      [01;34mnew[0m          pull_request_template.md   [01;34mrule-engine[0m   text.txt   [01;34mui-ngx[0m
 [01;32mbuild_proto.sh[0m   [01;34mdao[0m        [01;34mimg[0m      license-header-template.txt   [01;34mmsa[0m             [01;34mpackaging[0m    README.md                  security.md   [01;34mtools[0m
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ ^C[?2004l[?2004h[?2004l
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ cd application/
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application[?2004h[nethmi@server1 application]$ ls
[?2004lpom.xml  [0m[01;34msrc[0m  [01;34mtarget[0m
]0;nethmi@server1:~/Projects/thingsboard/application[?2004h[nethmi@server1 application]$ cd src
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application/src[?2004h[nethmi@server1 src]$ ls
[?2004l[0m[01;34mmain[0m  [01;34mtest[0m
]0;nethmi@server1:~/Projects/thingsboard/application/src[?2004h[nethmi@server1 src]$ cd main
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application/src/main[?2004h[nethmi@server1 main]$ ls
[?2004l[0m[01;34mconf[0m  [01;34mdata[0m  [01;34mjava[0m  [01;34mresources[0m
]0;nethmi@server1:~/Projects/thingsboard/application/src/main[?2004h[nethmi@server1 main]$ cd [7mjava/org/thingsboard/server/[27m[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cjava/org/thingsboard/server/
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ ls
[?2004l[0m[01;34mactors[0m  [01;34mconfig[0m  [01;34mcontroller[0m  [01;34mexception[0m  [01;34minstall[0m  [01;34mservice[0m  ThingsboardInstallApplication.java  ThingsboardServerApplication.java  [01;34mutils[0m
]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ sudo vi t[KThingsboardInstallApplication.java 
[?2004l[?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;49r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[49;1H"ThingsboardInstallApplication.java" 64L, 2626B[2;1Hâ–½[6n[2;1H  [3;1HPzz\[0%m[6n[3;1H           [1;1H[>c]10;?]11;?[1;1H[34m/**
 *[m[35m Copyright Â© 2016-2025 The Thingsboard Authors[m[2;49H[K[3;1H[34m *[m[3;3H[K[4;1H[34m *[m[35m Licensed under the Apache License, Version 2.0 (the "License");[m
[34m *[m[35m you may not use this file except in compliance with the License.[m
[34m * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */[m
[35mpackage[m org.thingsboard.server;

[35mimport[m lombok.extern.slf4j.Slf4j;
[35mimport[m org.springframework.boot.SpringApplication;
[35mimport[m org.springframework.boot.SpringBootConfiguration;
[35mimport[m org.springframework.context.ConfigurableApplicationContext;
[35mimport[m org.springframework.context.annotation.ComponentScan;
[35mimport[m org.thingsboard.server.install.ThingsboardInstallService;

[35mimport[m java.util.Arrays;

[35m@Slf4j
@SpringBootConfiguration
@ComponentScan[m({[31m"org.thingsboard.server.install"[m,[30;9H[31m"org.thingsboard.server.service.component"[m,[31;9H[31m"org.thingsboard.server.service.install"[m,[32;9H[31m"org.thingsboard.server.service.security.auth.jwt.settings"[m,[33;9H[31m"org.thingsboard.server.dao"[m,[34;9H[31m"org.thingsboard.server.common.stats"[m,[35;9H[31m"org.thingsboard.server.common.transport.config.ssl"[m,[36;9H[31m"org.thingsboard.server.cache"[m
})
[32mpublic[m [32mclass[m ThingsboardInstallApplication {[40;5H[32mprivate[m [32mstatic[m [32mfinal[m String SPRING_CONFIG_NAME_KEY = [31m"--spring.config.name"[m;
    [32mprivate[m [32mstatic[m [32mfinal[m String DEFAULT_SPRING_CONFIG_PARAM = SPRING_CONFIG_NAME_KEY + [31m"="[m + [31m"thingsboard"[m;[43;5H[32mpublic[m [32mstatic[m [32mvoid[m main(String[] args) {[44;9H[33mtry[m {[45;13HSpringApplication application = [33mnew[m SpringApplication(ThingsboardInstallApplication.[32mclass[m);[46;13Happlication.setAdditionalProfiles([31m"install"[m);[47;13HConfigurableApplicationContext context = application.run(updateArguments(args));[48;13Hcontext.getBean(ThingsboardInstallService.[32mclass[m).performInstall();[49;172H1,1[11CTop[1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [2;1H[49;172H2[2;1H[?25h[?25l[49;162H~@k[2;1H[49;162H   [3;1H[49;172H3[3;1H[?25h[?25l[49;162H~@k[3;1H[49;162H   [4;1H[49;172H4[4;1H[?25h[?25l[49;162H~@k[4;1H[49;162H   [5;1H[49;172H5[5;1H[?25h[?25l[49;162H~@k[5;1H[49;162H   [6;1H[49;172H6[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [7;1H[49;172H7[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [8;1H[49;172H8[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [9;1H[49;172H9[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [10;1H[49;172H10,1[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [11;1H[49;173H1[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [12;1H[49;173H2[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [13;1H[49;173H3[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [14;1H[49;173H4[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [15;1H[49;173H5[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [16;1H[49;173H6[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [17;1H[49;173H7,0-1[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [18;1H[49;173H8,1  [18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [19;1H[49;173H9[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [20;1H[49;172H20[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [21;1H[49;173H1[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [22;1H[49;173H2[22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [23;1H[49;173H3[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [24;1H[49;173H4,0-1[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [25;1H[49;173H5,1  [25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [26;1H[49;173H6,0-1[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [27;1H[49;173H7,1  [27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [28;1H[49;173H8[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [29;1H[49;173H9[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [30;1H[49;172H30[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [31;1H[49;173H1[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [32;1H[49;173H2[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [33;1H[49;173H3[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [34;1H[49;173H4[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [35;1H[49;173H5[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [36;1H[49;173H6[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [37;1H[29;16H[46m{[37;1H}[m[49;173H7[37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [38;1H[29;16H{[37;1H}[49;173H8[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [39;1H[49;173H9,0-1[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [40;1H[49;172H40,1  [40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [41;1H[49;173H1[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [42;1H[49;173H2,0-1[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [43;1H[49;173H3,1  [43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H} [33mcatch[m (Exception e) {[49;1H[K[49;172H44,1[11C6%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13Hlog.error(e.getMessage());[49;172H[K[49;172H45,1[10C12%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13HSystem.exit([31m1[m);[49;172H[K[49;172H46,1[10C18%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H47,1[10C25%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;5H}[49;172H[K[49;172H48,1[10C31%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[49;172H[K[49;172H49,1[10C37%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;5H[32mprivate[m [32mstatic[m String[] updateArguments(String[] args) {[49;172H[K[49;172H50,1[10C43%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H[33mif[m (Arrays.stream(args).noneMatch(arg -> arg.startsWith(SPRING_CONFIG_NAME_KEY))) {[49;172H[K[49;172H51,1[10C50%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13HString[] modifiedArgs = [33mnew[m String[args.length + [31m1[m];[49;172H[K[49;172H52,1[10C56%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13HSystem.arraycopy(args, [31m0[m, modifiedArgs, [31m0[m, args.length);[49;172H[K[49;172H53,1[10C62%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13HmodifiedArgs[args.length] = DEFAULT_SPRING_CONFIG_PARAM;[49;172H[K[49;172H54,0-1[8C68%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;13H[33mreturn[m modifiedArgs;[49;172H[K[49;172H55,1[10C75%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H}[49;172H[K[49;172H56,1[10C81%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;9H[33mreturn[m args;[49;172H[K[49;172H57,1[10C87%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;5H}[49;172H[K[49;172H58,1[10C93%[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [43;1H[1;48r[48;1H
[1;49r[48;1H}[49;172H[K[49;172H59,1[10CBot[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [44;1H[49;172H60[44;1H[?25h[?25l[49;162H~@k[44;1H[49;162H   [45;1H[49;173H1[45;1H[?25h[?25l[49;162H~@k[45;1H[49;162H   [46;1H[49;173H2[46;1H[?25h[?25l[49;162H~@k[46;1H[49;162H   [47;1H[49;173H3[47;1H[?25h[?25l[49;162H~@k[47;1H[49;162H   [48;1H[22;44H[46m{[48;1H}[m[49;173H4[48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [47;1H[22;44H{[48;1H}[49;173H3[47;1H[?25h[?25l[49;162H~@k[47;1H[49;162H   [46;1H[49;173H2[46;1H[?25h[?25l[49;162H~@k[46;1H[49;162H   [45;1H[49;173H1[45;1H[?25h[?25l[49;162H~@k[45;1H[49;162H   [44;1H[49;173H0[44;1H[?25h[?25l[49;162H~@k[44;1H[49;162H   [43;1H[49;172H59[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [42;1H[49;173H8[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [41;1H[49;173H7[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [40;1H[49;173H6[40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [39;1H[49;173H5[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [38;1H[49;173H4,0-1[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [37;1H[49;173H3,1  [37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [36;1H[49;173H2[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [35;1H[49;173H1[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [34;1H[49;173H0[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [33;1H[49;172H49[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [32;1H[49;173H8[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [31;1H[49;173H7[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [30;1H[49;173H6[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [29;1H[49;173H5[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [28;1H[49;173H4[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [27;1H[49;173H3[27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [26;1H[49;173H2,0-1[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [25;1H[49;173H1,1  [25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [24;1H[49;173H0[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [23;1H[49;172H39,0-1[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [22;1H[49;173H8,1  [22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [21;1H[13;16H[46m{[21;1H}[m[49;173H7[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [20;1H[13;16H{[21;1H}[49;173H6[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [19;1H[49;173H5[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [18;1H[49;173H4[18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [17;1H[49;173H3[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [16;1H[49;173H2[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [15;1H[49;173H1[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [14;1H[49;173H0[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [13;1H[49;172H29[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [12;1H[49;173H8[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [11;1H[49;173H7[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [10;1H[49;173H6,0-1[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [9;1H[49;173H5,1  [9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [8;1H[49;173H4,0-1[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [7;1H[49;173H3,1  [7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [6;1H[49;173H2[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[35mpackage[m org.thingsboard.server;[49;172H[K[49;172H21,1[10C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m */[m[49;172H[K[49;172H20,1[10C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m * limitations under the License.[m[49;172H[K[49;172H19,1[10C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m * See the License for the specific language governing permissions and[m[49;172H[K[49;172H18,1[10C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.[m[49;172H[K[49;172H17,0-1[8C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m * distributed under the License is distributed on an "AS IS" BASIS,[m[49;172H[K[49;172H16,1[10C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m * Unless required by applicable law or agreed to in writing, software[m[49;172H[K[49;172H15,1[10C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m *[m[49;172H[K[49;172H14,1[10C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m *     http://www.apache.org/licenses/LICENSE-2.0[m[49;172H[K[49;172H13,1[10C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m *[m[49;172H[K[49;172H12,1[10C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m * You may obtain a copy of the License at[m[49;172H[K[49;172H11,1[10C31%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m *[m[35m you may not use this file except in compliance with the License.[m[49;172H[K[49;172H10,1[10C25%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m *[m[35m Licensed under the Apache License, Version 2.0 (the "License");[m[49;172H[K[49;172H9,1[11C18%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m *[m[49;172H[K[49;172H8,1[11C12%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m *[m[35m Copyright Â© 2016-2025 The Thingsboard Authors[m[49;172H[K[49;172H7,1[12C6%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;1H[34m/**[m[49;172H[K[49;172H6,1[11CTop[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [5;1H[49;172H5[5;1H[?25h[?25l[49;162H~@k[5;1H[49;162H   [4;1H[49;172H4[4;1H[?25h[?25l[49;162H~@k[4;1H[49;162H   [3;1H[49;172H3[3;1H[?25h[?25l[49;162H~@k[3;1H[49;162H   [2;1H[49;172H2[2;1H[?25h[?25l[49;162H~@k[2;1H[49;162H   [1;1H[49;172H1[1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [1;1H[?25h[?25l[49;162H~@k[1;1H[49;162H   [2;1H[49;172H2[2;1H[?25h[?25l[49;162H~@k[2;1H[49;162H   [3;1H[49;172H3[3;1H[?25h[?25l[49;162H~@k[3;1H[49;162H   [2;1H[49;172H2[2;1H[?25h[?25l[49;162H~@k[2;1H[49;162H   [3;1H[49;172H3[3;1H[?25h[?25l[49;162H~@k[3;1H[49;162H   [4;1H[49;172H4[4;1H[?25h[?25l[49;162H~@k[4;1H[49;162H   [5;1H[49;172H5[5;1H[?25h[?25l[49;162H~@k[5;1H[49;162H   [6;1H[49;172H6[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [7;1H[49;172H7[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [8;1H[49;172H8[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [9;1H[49;172H9[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [10;1H[49;172H10,1[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [11;1H[49;173H1[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [12;1H[49;173H2[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [13;1H[49;173H3[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [14;1H[49;173H4[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [15;1H[49;173H5[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [15;2H[49;175H2[15;2H[?25h[?25l[49;162H~@k[15;2H[49;162H   [15;3H[49;175H3[15;3H[?25h[?25l[49;162H~@k[15;3H[49;162H   [15;3H[?25h[?25l[49;162H^M[15;3H[49;162H  [16;1H[49;173H6,1[16;1H[?25h[?25l[49;162H-[16;1H[49;162H [15;2H[49;173H5,2[15;2H[?25h[?25l[49;162H~@k[15;2H[49;162H   [16;2H[49;173H6[16;2H[?25h[?25l[49;162H~@k[16;2H[49;162H   [16;1H[49;175H1[16;1H[?25h[?25l[49;162Hi[16;1H[49;162H [16;1H[49;1H[1m-- INSERT --[m[49;172H[K[49;172H16,1[10CTop[16;1H[?25h[?25l[17;48r[17;1H[L[1;49r[16;1H[K[17;1H[35mpackage[m org.thingsboard.server;[49;172H[K[49;172H17,1[10CTop[17;1H[?25h[?25l[49;173H6[16;1H[?25h[?25l[34m// Updated for incremental build test - 2025-06-2[?25h[?25l3[m[49;175H51[16;51H[?25h[49;1H[K[16;50H[?25l[49;162H^[[16;50H[49;162H  [16;51H[49;172H16,50[9CTop[16;50H[?25h[?25l[49;162H:[16;50H[49;162H[K[49;1H:[?25hwq[?25l[?2004l[>4;m"ThingsboardInstallApplication.java" 65L, 2677B written[23;2t[23;1t
[?1004l[?2004l[?1l>[?25h[>4;m[?1049l[23;0;0t]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ git diff
[?2004l[?1h=[1mdiff --git a/Jenkinsfile b/Jenkinsfile[m[m
[1mindex e927f183e6..8cf7cec224 100644[m[m
[1m--- a/Jenkinsfile[m[m
[1m+++ b/Jenkinsfile[m[m
[36m@@ -181,7 +181,24 @@[m [mpipeline {[m[m
                 sh 'git log --oneline -3'[m[m
             }[m[m
         }[m[m
[31m-       [m[m
[32m+[m[41m        [m[m
[32m+[m[32m        stage('Production Security Check') {[m[m
[32m+[m[32m            steps {[m[m
[32m+[m[32m                echo 'ðŸ” Running production security validations...'[m[m
[32m+[m[32m                script {[m[m
[32m+[m[32m                    def allowedBranches = ['master','release/*', 'main'][m[m
[32m+[m[32m                    def currentBranch = params.RELEASE_BRANCH[m[m
[32m+[m[41m                    [m[m
[32m+[m[32m                    if (params.VERSION_TAG) {[m[m
[32m+[m[32m                        echo "âœ… Building from version tag: ${params.VERSION_TAG}"[m[m
[32m+[m[32m                    } else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[m[m
[32m+[m[32m                        echo "âœ… Building from approved branch: ${currentBranch}"[m[m
[32m+[m[32m                    } else {[m[m
[32m+[m[32m                        error("âŒ Production builds only allowed from master, main, or release/* branches")[m[m
[32m+[m[32m                    }[m[m
[32m+[m[32m                }[m[m
[32m+[m[32m            }[m[m
[32m+[m[32m        }[m[m
         [m[m
         stage('Production Clean & Prepare') {[m[m
             steps {[m[m
[1mdiff --git a/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java b/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java[m[m
[1mindex 31b220569f..c0bdb7a328 100644[m[m
[1m--- a/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java[m[m
[1m+++ b/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java[m[m
[36m@@ -13,6 +13,7 @@[m[m
  * See the License for the specific language governing permissions and[m[m
  * limitations under the License.[m[m
  */[m[m
[32m+[m[32m// Updated for incremental build test - 2025-06-23[m[m
 package org.thingsboard.server;[m[m
 [m[m
 import lombok.extern.slf4j.Slf4j;[m[m
[1mdiff --git a/{ b/{[m[m
[1mindex 1f799148e9..174338fca3 100644[m[m
[1m--- a/{[m[m
[1m+++ b/{[m[m
[36m@@ -1031,4 +1031,353 @@[m [mWhile opening file "Jenkinsfile"[m[m
 echo 'ðŸ”Running production security validations...'-Dmaven.test.skip=true \187,71-69     37%0-6869-678-667-656-645-634-623-612-601-590-5859-578-567-556-545-534-523-512-501-490-4849-478-467[m :[K[K [KESCESC[KOO[KBB[K-456-445-434-423-412-401-390-3839-378-367-356-345-334-323-312-301-290-2829-278-267-253   210198765432109 87654321[m[m
:[K[K [KESCESC[KOO[KBB[K steps-Dmaven.javadoc.skip=true \186,1937%8765432109 87654321[m[m
:[K[K [KESCESC[KOO[KBB[K stage('Production Security Check') {-Dmaven.source.skip=true \185,4537%4[46m()[m3(2103987654321029876543210198765432109 87654321[m[m
:[K[K [KESCESC[KOO[KBB[K[31m--Dcheckstyle.skip=false \184,937%8321079876steps {175,837%stage('Production Build Info') {174,836%173,836%}172,836%}171,836%}170,836%env.BUILD_TYPE = changedModules.size() == allModules.si[m :[K[K [KESCESC[KOO[KBB[K[31mze() ? 'FULL' : 'INCREMENTAL'169,835%env.ALL_MODULES = allModules.join(',')168,835%env.CHANGED_MODULES = changedModules.join(',')167,835%// Store in environment for later stages166,835%165,[m :[K[K [KESCESC[KOO[KBB[K[31m834%echo "ðŸ“ŠTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"164,834%echo "ðŸ“‹Modules to build: ${changedModules.join(', ')}"163,834%162,834%}161,834%changedMod[m :[K[K [KESCESC[KOO[KBB[K[31mules = allModules160,833%echo "ðŸ”„Full build requested or no specific changes detected"159,833%if (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {158,833%// Force full build if reques[m :[K[K [KESCESC[KOO[KBB[K[31mted or if no changes detected157,833%156,832%}155,832%changedModules = affectedModules.toList()154,832%153,832%}152,832%}151,831%break150,831%affectedModules.addAll(allModules)149,831%echo [m :[K[K [KESCESC[KOO[KBB[K[31m"Core file changed: ${file} - will trigger full build"148,831%file.contains('config')) {147,830%file.contains('parent') ||146,830%file.startsWith('shared/') ||145,830%file.startsWith('commo[m :[K[K [KESCESC[KOO[KBB[K[31mn/') ||144,830%if (file.equals('pom.xml') ||143,830%// Also check for common files that affect all modules142,829%141,829%}140,829%}139,829%affectedModules.add(module)138,829%file.contains([m :[K[K [KESCESC[KOO[KBB[K[31m"\\${module}\\")) {137,828%file.contains("/${module}/") ||136,828%file.startsWith("${module}\\") ||135,828%if (file.startsWith("${module}/") ||134,828%for (module in allModules) {133,827%//[m :[K[K [KESCESC[KOO[KBB[K[31m Check if file belongs to a module132,827%for (file in files) {131,827%130,827%def affectedModules = [] as Set129,827%def files = changedFiles.split('\n')128,826%if (changedFiles) {127,826%[m :[K[K [KESCESC[KOO[KBB[K[31m// Determine which modules are affected126,826%125,826%echo "Changed files: ${changedFiles}"124,825%123,825%}122,825%).trim()121,825%returnStdout: true120,825%script: "git diff --name-only [m :[K[K [KESCESC[KOO[KBB[K[31mHEAD~1 HEAD",119,824%changedFiles = sh(118,824%} else {117,824%).trim()116,824%returnStdout: true115,823%script: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1[m :[K[K [KESCESC[KOO[KBB[K[31m HEAD",114,823%changedFiles = sh(113,823%if (lastBuildCommit) {112,823%def changedFiles = ""111,823%// Get changed files110,822%109,822%}108,822%).trim()107,822%returnStdout: true106,821%sc[m :[K[K [KESCESC[KOO[KBB[K[31mript: "git log --format='%H' -n 1 HEAD~5",105,821%lastBuildCommit = sh(104,821%if (!lastBuildCommit) {103,821%// If no previous build, check recent commits102,821%101,820%}100,820%echo "No [m :[K[K [KESCESC[KOO[KBB[K[31mprevious successful build found, will check last 5 commits"99,820%} catch (Exception e) {98,820%}97,820%).trim()96,819%returnStdout: true95,819%script: "git log --format='%H' -n 1 --before=[m :[K[K [KESCESC[KOO[KBB[K[31m'${lastBuild.getTime()}'",94,819%lastBuildCommit = sh(93,819%if (lastBuild) {92,818%def lastBuild = currentBuild.getPreviousSuccessfulBuild()91,818%// Try to get last successful build commi[m :[K[K [KESCESC[KOO[KBB[K[31mt90,818%try {89,818%def lastBuildCommit = ""88,818%// Get changed files since last successful build87,817%86,817%}85,817%}84,817%allModules.add(moduleName)83,816%def moduleName = pomFile.re[m :[K[K [KESCESC[KOO[KBB[K[31mplaceAll('./([^/]+)/pom.xml', '$1')82,816%if (pomFile != './pom.xml') {81,816%for (pomFile in pomFiles) {80,816%// Extract module names from pom files79,816%78,815%).trim().split('\n')77,81[m :[K[K [KESCESC[KOO[KBB[K[31m5%returnStdout: true76,815%script: "find . -name 'pom.xml' -not -path './target/*' | head -20",75,815%def pomFiles = sh(74,814%// Get all Maven modules73,814%72,814%def allModules = []71,81[m :[K[K [KESCESC[KOO[KBB[K[31m4%def changedModules = []70,814%script {69,813%echo 'ðŸ”Detecting changed modules since last build...'68,813%steps {67,813%stage('Detect Changed Modules') {66,813%65,812%}64,812%}}62,812%}61[m :[K[K [KESCESC[KOO[KBB[K[31m,812%userRemoteConfigs: scm.userRemoteConfigs])60,811%branches: [[name: "*/${params.RELEASE_BRANCH}"]],59,811%checkout([$class: 'GitSCM',58,811%} else {57,811%userRemoteConfigs: scm.userRem[m :[K[K [KESCESC[KOO[KBB[K[31moteConfigs])56,810%branches: [[name: "refs/tags/${params.VERSION_TAG}"]],55,810%checkout([$class: 'GitSCM',54,810%if (params.VERSION_TAG) {53,810%script {52,810%echo "ðŸ”’Checking out source [m :[K[K [KESCESC[KOO[KBB[K[31mcode for PRODUCTION build..."51,89%steps {50,89%stage('Production Checkout') {49,89%stages {48,89%47,89%}46,88%)45,88%description: 'Deploy to production? (Requires approval)'44,88%defaultVa[m :[K[K [KESCESC[KOO[KBB[K[31mlue: false,43,88%name: 'DEPLOY_TO_PROD',42,57%booleanParam(41,67%name: 'CREATE_BACKUP',defaultValue: true,description: 'Create backup before production deployment?')37,86%booleanParam(36,86[m :[K[K [KESCESC[KOO[KBB[K[31m%)35,86%description: 'Force full build instead of incremental?'34,86%defaultValue: false,33,85%name: 'FORCE_FULL_BUILD',32,85%booleanParam(31,85%)30,85%description: 'Version tag for this pr[m :[K[K [KESCESC[KOO[KBB[K[31moduction release (e.g., v1.2.3)'29,85%defaultValue: '',28,84%name: 'VERSION_TAG',27,84%string(26,84%)25,84%description: 'Select release branch for production build'24,83%choices: ['master',[m :[K[K [KESCESC[KOO[KBB[K[31m 'release/*'],23,83%[m[m
:[K[K [KESCESC[KOO[KBB[K\ No newline at end of file[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m-Dcheckstyle.skip=false \184,937%8321079876steps {175,837%stage('Production Build Info') {174,836%173,836%}172,836%}171,836%}170,836%env.BUILD_TYPE = changedModules.size() == allModules.si[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mze() ? 'FULL' : 'INCREMENTAL'169,835%env.ALL_MODULES = allModules.join(',')168,835%env.CHANGED_MODULES = changedModules.join(',')167,835%// Store in environment for later stages166,835%165,[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m834%echo "ðŸ“ŠTotal modules: ${allModules.size()}, Changed modules: ${changedModules.size()}"164,834%echo "ðŸ“‹Modules to build: ${changedModules.join(', ')}"163,834%162,834%}161,834%changedMod[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mules = allModules160,833%echo "ðŸ”„Full build requested or no specific changes detected"159,833%if (params.FORCE_FULL_BUILD || changedModules.isEmpty()) {158,833%// Force full build if reques[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mted or if no changes detected157,833%156,832%}155,832%changedModules = affectedModules.toList()154,832%153,832%}152,832%}151,831%break150,831%affectedModules.addAll(allModules)149,831%echo [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m"Core file changed: ${file} - will trigger full build"148,831%file.contains('config')) {147,830%file.contains('parent') ||146,830%file.startsWith('shared/') ||145,830%file.startsWith('commo[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mn/') ||144,830%if (file.equals('pom.xml') ||143,830%// Also check for common files that affect all modules142,829%141,829%}140,829%}139,829%affectedModules.add(module)138,829%file.contains([m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m"\\${module}\\")) {137,828%file.contains("/${module}/") ||136,828%file.startsWith("${module}\\") ||135,828%if (file.startsWith("${module}/") ||134,828%for (module in allModules) {133,827%//[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m Check if file belongs to a module132,827%for (file in files) {131,827%130,827%def affectedModules = [] as Set129,827%def files = changedFiles.split('\n')128,826%if (changedFiles) {127,826%[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m// Determine which modules are affected126,826%125,826%echo "Changed files: ${changedFiles}"124,825%123,825%}122,825%).trim()121,825%returnStdout: true120,825%script: "git diff --name-only [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mHEAD~1 HEAD",119,824%changedFiles = sh(118,824%} else {117,824%).trim()116,824%returnStdout: true115,823%script: "git diff --name-only ${lastBuildCommit} HEAD || git diff --name-only HEAD~1[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m HEAD",114,823%changedFiles = sh(113,823%if (lastBuildCommit) {112,823%def changedFiles = ""111,823%// Get changed files110,822%109,822%}108,822%).trim()107,822%returnStdout: true106,821%sc[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mript: "git log --format='%H' -n 1 HEAD~5",105,821%lastBuildCommit = sh(104,821%if (!lastBuildCommit) {103,821%// If no previous build, check recent commits102,821%101,820%}100,820%echo "No [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mprevious successful build found, will check last 5 commits"99,820%} catch (Exception e) {98,820%}97,820%).trim()96,819%returnStdout: true95,819%script: "git log --format='%H' -n 1 --before=[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m'${lastBuild.getTime()}'",94,819%lastBuildCommit = sh(93,819%if (lastBuild) {92,818%def lastBuild = currentBuild.getPreviousSuccessfulBuild()91,818%// Try to get last successful build commi[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mt90,818%try {89,818%def lastBuildCommit = ""88,818%// Get changed files since last successful build87,817%86,817%}85,817%}84,817%allModules.add(moduleName)83,816%def moduleName = pomFile.re[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mplaceAll('./([^/]+)/pom.xml', '$1')82,816%if (pomFile != './pom.xml') {81,816%for (pomFile in pomFiles) {80,816%// Extract module names from pom files79,816%78,815%).trim().split('\n')77,81[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m5%returnStdout: true76,815%script: "find . -name 'pom.xml' -not -path './target/*' | head -20",75,815%def pomFiles = sh(74,814%// Get all Maven modules73,814%72,814%def allModules = []71,81[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m4%def changedModules = []70,814%script {69,813%echo 'ðŸ”Detecting changed modules since last build...'68,813%steps {67,813%stage('Detect Changed Modules') {66,813%65,812%}64,812%}}62,812%}61[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m,812%userRemoteConfigs: scm.userRemoteConfigs])60,811%branches: [[name: "*/${params.RELEASE_BRANCH}"]],59,811%checkout([$class: 'GitSCM',58,811%} else {57,811%userRemoteConfigs: scm.userRem[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32moteConfigs])56,810%branches: [[name: "refs/tags/${params.VERSION_TAG}"]],55,810%checkout([$class: 'GitSCM',54,810%if (params.VERSION_TAG) {53,810%script {52,810%echo "ðŸ”’Checking out source [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mcode for PRODUCTION build..."51,89%steps {50,89%stage('Production Checkout') {49,89%stages {48,89%47,89%}46,88%)45,88%description: 'Deploy to production? (Requires approval)'44,88%defaultVa[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mlue: false,43,88%name: 'DEPLOY_TO_PROD',42,57%booleanParam(41,67%name: 'CREATE_BACKUP',defaultValue: true,description: 'Create backup before production deployment?')37,86%booleanParam(36,86[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m%)35,86%description: 'Force full build instead of incremental?'34,86%defaultValue: false,33,85%name: 'FORCE_FULL_BUILD',32,85%booleanParam(31,85%)30,85%description: 'Version tag for this pr[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32moduction release (e.g., v1.2.3)'29,85%defaultValue: '',28,84%name: 'VERSION_TAG',27,84%string(26,84%)25,84%description: 'Select release branch for production build'24,83%choices: ['master',[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m 'release/*'],23,83%name: 'RELEASE_BRANCH',22,83%choice(21,83%parameters {20,83%19,82%}18,82%BUILD_PROFILE = 'prod'17,82%DEPLOY_TARGET = 'prod-server'16,82%ENV_NAME = 'PRODUCTION'15,81%14,5[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m1%PATH = "${env.PATH}:/usr/bin"13,61%M2_HOME = '/usr/share/maven'12,81%JAVA_HOME = '/usr/lib/jvm/java-17-openjdk-17.0.15.0.6-2.el9.x86_64'11,81%MAVEN_OPTS = '-Xmx3072m -XX:+UseG1GC'10,80%en[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mvironment {9,80%8,80%agent any7,80%pipeline {6,8Top543,52,81[7m^G[27m^[  1,7Top::wq[7m^M[27m4;m"Jenkinsfile" 503L, 23395B written[7m^M[27m[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m4;methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$ git add .[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$ git commit -m "Edit[7m^G^G^G^G^G^G^G^G^G^G^G^G[27m[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27m[production aa2a916aac] Edit Jenkins file[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m 2 files changed, 523 insertions(+), 19 deletions(-)[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$ git push origin production[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27mUsername for 'https://github.com': Nethnissanka[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mPassword for 'https://Nethnissanka@github.com':[m[41m [7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mEnumerating objects: 7, done.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mCounting objects:  14% (1/7)[7m^M[27mCounting objects:  28% (2/7)[7m^M[27mCounting objects:  42% (3/7)[7m^M[27mCounting objects:  57% (4/7)[7m^M[27mCounting objects:  71% (5/7)[7m^M[27mCounting objects:  85% (6/7)[7m^M[27mCounting[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m objects: 100% (7/7)[7m^M[27mCounting objects: 100% (7/7), done.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mDelta compression using up to 4 threads[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mCompressing objects:  25% (1/4)[7m^M[27mCompressing objects:  50% (2/4)[7m^M[27mCompressing objects:  75% (3/4)[7m^M[27mCompressing objects: 100% (4/4)[7m^M[27mCompressing objects: 100% (4/4), done.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mWriting objects:  25% (1/4)[7m^M[27mWriting objects:  50% (2/4)[7m^M[27mWriting objects:  75% (3/4)[7m^M[27mWriting objects: 100% (4/4)[7m^M[27mWriting objects: 100% (4/4), 30.89 KiB | 2.57 MiB/s, done.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mTotal 4 (delta 2), reused 0 (delta 0), pack-reused 0 (from 0)[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mremote: Resolving deltas:   0% (0/2)[7m^M[27mremote: Resolving deltas:  50% (1/2)[7m^M[27mremote: Resolving deltas: 100% (2/2)[7m^M[27mremote: Resolving deltas: 100% (2/2), completed with 2 local objects.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mTo https://github.com/Nethnissanka/thingsboard.git[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m   950374dde9..aa2a916aac  production -> production[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$[m[41m [7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$[m[41m [7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$[m[41m [7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$[m[41m [7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27methmi@server1:~/Projects/thingsboard[7m^G[27m[nethmi@server1 thingsboard]$ sudo vi Jenkinsfile[m[41m [7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[7m^M[27m4;2m[27m[23m[29m[m[1m[37m[41mE325: ATTENTION[m[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mFound a swap file by the name ".Jenkinsfile.swp"[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mowned by: nethmi   dated: Fri Jun 20 05:58:35 2025[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mfile name: /home/nethmi/Projects/thingsboard/Jenkinsfile[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mmodified: YES[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32muser name: root   host name: server1[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mprocess ID: 111376[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mWhile opening file "Jenkinsfile"[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32mdated: Mon Jun 23 04:15:06 2025[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m      NEWER than swap file![m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m(1) Another program may be editing the same file.  If this is the case,[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    be careful not to end up with two different instances of the same[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    file when making changes.  Quit, or continue with caution.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m(2) An edit session for this file crashed.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    If this is the case, use ":recover" or "vim -r Jenkinsfile"[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    to recover the changes (see ":help recovery").[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    If you did this already, delete the swap file ".Jenkinsfile.swp"[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    to avoid this message.[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[32mSwap file ".Jenkinsfile.swp" already exists![m[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m[32m[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: [m"Jenkinsfile" 503L, 23395Bâ–½  zz[0%m           cpipeline {[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    agent any    environment {MAVEN_OPTS = '-Xmx3072m -XX:+UseG1GC'JAVA_HOME = '/usr/lib/jvm/java-17-openjdk-17.0.15.0.6-2.el9.x86_64'M2_HOME = '/usr/share/maven'PATH = "${env.PATH}:/usr/b[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32min"ENV_NAME = 'PRODUCTION'DEPLOY_TARGET = 'prod-server'BUILD_PROFILE = 'prod'[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m    }parameters {choice(name: 'RELEASE_BRANCH',choices: ['master', 'release/*'],description: 'Select release branch for production build')string(name: 'VERSION_TAG',defaultValue: '',descri[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mption: 'Version tag for this production release (e.g., v1.2.3)')booleanParam(name: 'FORCE_FULL_BUILD',[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            defaultValue: false,[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            description: 'Force full build instead of incremental?')booleanParam(  name: 'CREATE_BACKUP',   defaultValue: true,    description: 'Create backup before production deployment?[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m'[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m        )booleanParam(      name: 'DEPLOY_TO_PROD',defaultValue: false,[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m            description: 'Deploy to production? (Requires approval)'    )}   stages {    stage('Production Checkout') {        steps {            echo "ðŸ”’ Checking out source code for PROD[m :[K[K [KESCESC[KOO[KBB[K[32m[m[32mUCTION build..."script {[m[41m[7m^M[27m[m[m
:[K[K [KESCESC[KOO[KBB[K[32m+[m[32m                    if (params.VERSION_TAG) {1,7Top::%d[7m^M[27m[1m[34m~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          ~                                                                                                                                  [m :[K[K [KESCESC[KOO[KBB[K[32m[m[32m[1m[34m                                                          [m0,0-1All[7m^M[27m--No lines in buffer--0,0-1All[1m-- INSERT --[m0,1Allpipeline {[m[41m[7m^M[27m[m[m
:[K[K[?1l>]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ pwd
[?2004l/home/nethmi/Projects/thingsboard/application/src/main/java/org/thingsboard/server
]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ ls
[?2004l[0m[01;34mactors[0m  [01;34mconfig[0m  [01;34mcontroller[0m  [01;34mexception[0m  [01;34minstall[0m  [01;34mservice[0m  ThingsboardInstallApplication.java  ThingsboardServerApplication.java  [01;34mutils[0m
]0;nethmi@server1:~/Projects/thingsboard/application/src/main/java/org/thingsboard/server[?2004h[nethmi@server1 server]$ cd /[K~P[K
[?2004l]0;nethmi@server1:~[?2004h[nethmi@server1 ~]$ p[Kls
[?2004l[0m[01;32mmt_intercept.py[0m  [01;34mnew_thingsboard[0m  [01;34mProjects[0m  [01;34mthingsboard[0m
]0;nethmi@server1:~[?2004h[nethmi@server1 ~]$ cd Projects/thingsboard/
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ sudo vi j[KJenkinsfile 
[?2004l[?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;49r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[49;1H[1m[37m[41mE325: ATTENTION[m
Found a swap file by the name ".Jenkinsfile.swp"
[10Cowned by: nethmi   dated: Fri Jun 20 05:58:35 2025
[9Cfile name: /home/nethmi/Projects/thingsboard/Jenkinsfile
[10Cmodified: YES
[9Cuser name: root   host name: server1
[8Cprocess ID: 111376
While opening file "Jenkinsfile"
[13Cdated: Mon Jun 23 04:33:11 2025
      NEWER than swap file!

(1) Another program may be editing the same file.  If this is the case,
    be careful not to end up with two different instances of the same
    file when making changes.  Quit, or continue with caution.
(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r Jenkinsfile"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file ".Jenkinsfile.swp"
    to avoid this message.

[32mSwap file ".Jenkinsfile.swp" already exists![m
[32m[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: [?25h[m[49;1H[K[?25l[49;1H"Jenkinsfile" 520L, 24242B[2;1Hâ–½[6n[2;1H  [3;1HPzz\[0%m[6n[3;1H           [1;1H[>c]10;?]11;?[1;21Hgit log --oneline -5 >> production-build-report.txt
                    echo "" >> production-build-report.txt[2;59H[K[3;1H                    [3;21H[K[4;21Hecho "=== Packages Created ===" >> production-build-report.txt[5;21Hfind . -name "*.jar" -newer pom.xml -exec ls -lh {} \\; >> production-build-report.txt 2>/dev/null || echo "No packages found" >> production-build-report.txt[6;21Hecho "" >> production-build-report.txt[8;21Hecho "=== Build Statistics ===" >> production-build-report.txt[9;21Hecho "Total packages: $(find . -name "*.jar" -newer pom.xml | wc -l)" >> production-build-report.txt[10;21Hecho "Build completed: $(date)" >> production-build-report.txt[11;17H'''[13;17HarchiveArtifacts artifacts: 'production-build-report.txt', allowEmptyArchive: true[14;13H}[15;9H}
    }[18;5Hpost {[19;9Halways {[20;13Hecho 'ðŸ[20;22HProduction pipeline completed!'[21;13Hsh 'rm -rf target/*/target || true'[22;9H}[23;9Hsuccess {[24;13Hecho "âœ…[24;22H${env.BUILD_TYPE} production build succeeded!"[25;13Hscript {[26;17Hdef version = params.VERSION_TAG ?: params.RELEASE_BRANCH[27;17Hdef moduleCount = env.CHANGED_MODULES.split(',').length
                currentBuild.description = "âœ…[28;48H${env.BUILD_TYPE} build (${moduleCount} modules) - ${version}"
            }[29;14H[K[30;9H}[30;11H[K[31;9Hfailure {[31;18H[K[32;11H  echo "âŒ[32;21H ${env.BUILD_TYPE} production build failed!"[33;10H   script {[33;21H[K[34;9H        currentBuild.description = "âŒ[34;48H${env.BUILD_TYPE} build failed at ${env.STAGE_NAME}"
                [35;17H[K[36;14H   sh '''[36;23H[K[37;7H              echo "CRITICAL: Production build failure" > prod-failure.txt[38;21Hecho "Build Type: ${BUILD_TYPE}" >> prod-failure.txt
                    echo "Modules: ${CHANGED_MODULES}" >> prod-failure.txt
                    echo "Stage: ${STAGE_NAME}" >> prod-failure.txt[40;68H[K[41;5H                echo "Build: ${BUILD_NUMBER}" >> prod-failure.txt
                    echo "Time: $(date)" >> prod-failure.txt
                '''[43;20H[K[44;5H            archiveArtifacts artifacts: 'prod-failure.txt', allowEmptyArchive: true
            }[45;14H[K[46;5H    }[46;10H[K[47;5H}
}[48;2H[K[49;172H520,1[9CBot[48;1H[?25h[?25l[49;162H^M[48;1H[49;162H  [48;1H[?25h[?25l[49;162H~@k[48;1H[49;162H   [47;1H[49;173H19[47;1H[?25h[?25l[49;162H~@k[47;1H[49;162H   [46;1H[49;174H8[46;1H[?25h[?25l[49;162H~@k[46;1H[49;162H   [45;1H[49;174H7[45;1H[?25h[?25l[49;162H~@k[45;1H[49;162H   [44;1H[49;174H6[44;1H[?25h[?25l[49;162H~@k[44;1H[49;162H   [43;1H[49;174H5[43;1H[?25h[?25l[49;162H~@k[43;1H[49;162H   [42;1H[49;174H4[42;1H[?25h[?25l[49;162H~@k[42;1H[49;162H   [41;1H[49;174H3[41;1H[?25h[?25l[49;162H~@k[41;1H[49;162H   [40;1H[49;174H2[40;1H[?25h[?25l[49;162H~@k[40;1H[49;162H   [39;1H[49;174H1[39;1H[?25h[?25l[49;162H~@k[39;1H[49;162H   [38;1H[49;174H0[38;1H[?25h[?25l[49;162H~@k[38;1H[49;162H   [37;1H[49;173H09[37;1H[?25h[?25l[49;162H~@k[37;1H[49;162H   [36;1H[49;174H8[36;1H[?25h[?25l[49;162H~@k[36;1H[49;162H   [35;1H[49;174H7[35;1H[?25h[?25l[49;162H~@k[35;1H[49;162H   [34;1H[49;174H6[34;1H[?25h[?25l[49;162H~@k[34;1H[49;162H   [33;1H[49;174H5[33;1H[?25h[?25l[49;162H~@k[33;1H[49;162H   [32;1H[49;174H4[32;1H[?25h[?25l[49;162H~@k[32;1H[49;162H   [31;1H[49;174H3[31;1H[?25h[?25l[49;162H~@k[31;1H[49;162H   [30;1H[49;174H2[30;1H[?25h[?25l[49;162H~@k[30;1H[49;162H   [29;1H[49;174H1[29;1H[?25h[?25l[49;162H~@k[29;1H[49;162H   [28;1H[49;174H0[28;1H[?25h[?25l[49;162H~@k[28;1H[49;162H   [27;1H[49;172H499[27;1H[?25h[?25l[49;162H~@k[27;1H[49;162H   [26;1H[49;174H8[26;1H[?25h[?25l[49;162H~@k[26;1H[49;162H   [25;1H[49;174H7[25;1H[?25h[?25l[49;162H~@k[25;1H[49;162H   [24;1H[49;174H6[24;1H[?25h[?25l[49;162H~@k[24;1H[49;162H   [23;1H[49;174H5[23;1H[?25h[?25l[49;162H~@k[23;1H[49;162H   [22;1H[49;174H4[22;1H[?25h[?25l[49;162H~@k[22;1H[49;162H   [21;1H[49;174H3[21;1H[?25h[?25l[49;162H~@k[21;1H[49;162H   [20;1H[49;174H2[20;1H[?25h[?25l[49;162H~@k[20;1H[49;162H   [19;1H[49;174H1[19;1H[?25h[?25l[49;162H~@k[19;1H[49;162H   [18;1H[49;174H0[18;1H[?25h[?25l[49;162H~@k[18;1H[49;162H   [17;1H[49;173H89[17;1H[?25h[?25l[49;162H~@k[17;1H[49;162H   [16;1H[49;174H8[16;1H[?25h[?25l[49;162H~@k[16;1H[49;162H   [15;1H[49;174H7[15;1H[?25h[?25l[49;162H~@k[15;1H[49;162H   [14;1H[49;174H6[14;1H[?25h[?25l[49;162H~@k[14;1H[49;162H   [13;1H[49;174H5[13;1H[?25h[?25l[49;162H~@k[13;1H[49;162H   [12;1H[49;174H4[12;1H[?25h[?25l[49;162H~@k[12;1H[49;162H   [11;1H[49;174H3[11;1H[?25h[?25l[49;162H~@k[11;1H[49;162H   [10;1H[49;174H2[10;1H[?25h[?25l[49;162H~@k[10;1H[49;162H   [9;1H[49;174H1[9;1H[?25h[?25l[49;162H~@k[9;1H[49;162H   [8;1H[49;174H0[8;1H[?25h[?25l[49;162H~@k[8;1H[49;162H   [7;1H[49;173H79[7;1H[?25h[?25l[49;162H~@k[7;1H[49;162H   [6;1H[49;174H8[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "=== Git Information ===" >> production-build-report.txt[49;1H[K[49;172H477,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H476,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "" >> production-build-report.txt[49;172H[K[49;172H475,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Deployed: ${DEPLOY_TO_PROD}" >> production-build-report.txt[49;172H[K[49;172H474,1[9C99%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Backup Created: ${CREATE_BACKUP}" >> production-build-report.txt[49;172H[K[49;172H473,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Build Date: $(date)" >> production-build-report.txt[49;172H[K[49;172H472,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Modules Built: ${CHANGED_MODULES}" >> production-build-report.txt[49;172H[K[49;172H471,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Branch/Tag: ${VERSION_TAG:-$RELEASE_BRANCH}" >> production-build-report.txt[49;172H[K[49;172H470,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Build Type: ${BUILD_TYPE}" >> production-build-report.txt[49;172H[K[49;172H469,1[9C98%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Build: ${BUILD_NUMBER}" >> production-build-report.txt[49;172H[K[49;172H468,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Environment: PRODUCTION" >> production-build-report.txt[49;172H[K[49;172H467,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "=== ThingsBoard PRODUCTION Build Report ===" > production-build-report.txt[49;172H[K[49;172H466,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh '''[49;172H[K[49;172H465,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ“Š[1;26HGenerating production build report...'[49;172H[K[49;172H464,1[9C97%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H463,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Build Report') {[49;172H[K[49;172H462,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H461,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H460,1[9C96%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H459,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H458,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H'''[49;172H[K[49;172H457,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HPRODUCTION deployment completed successfully"[49;172H[K[49;172H456,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H455,1[9C95%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfi[49;172H[K[49;172H454,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# scp thingsboard-full-*.tar.gz prod-server:/opt/thingsboard/releases/[49;172H[K[49;172H453,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Example: Deploy full release[49;172H[K[49;172H452,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Deploying full build..."[49;172H[K[49;172H451,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Helse[49;172H[K[49;172H450,1[9C94%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# done[49;172H[K[49;172H449,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H#     scp $module/target/*.jar prod-server:/opt/thingsboard/modules/$module/[49;172H[K[49;172H448,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H#     echo "Deploying module: $module"[49;172H[K[49;172H447,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# for module in ${CHANGED_MODULES//,/ }; do[49;172H[K[49;172H446,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Example: Deploy only changed services[49;172H[K[49;172H445,1[9C93%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Deploying incremental changes..."[49;172H[K[49;172H444,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif [ "${BUILD_TYPE}" = "INCREMENTAL" ]; then[49;172H[K[49;172H443,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H# Deploy only changed modules (customize as needed)[49;172H[K[49;172H442,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H441,1[9C92%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Build: ${BUILD_NUMBER}"[49;172H[K[49;172H440,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Modules: ${CHANGED_MODULES}"[49;172H[K[49;172H439,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Build Type: ${BUILD_TYPE}"[49;172H[K[49;172H438,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Target: ${DEPLOY_TARGET}"[49;172H[K[49;172H437,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "=== PRODUCTION DEPLOYMENT ==="[49;172H[K[49;172H436,1[9C91%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hsh '''[49;172H[K[49;172H435,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H434,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸš€[1;26HDeploying ${env.BUILD_TYPE} build to PRODUCTION..."[49;172H[K[49;172H433,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H432,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H431,1[9C90%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hexpression { params.DEPLOY_TO_PROD == true }[49;172H[K[49;172H430,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hwhen {[49;172H[K[49;172H429,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Deploy to Production') {[49;172H[K[49;172H428,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H427,1[9C89%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H426,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H425,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H424,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H423,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Herror('Production deployment aborted by [30m[43muser[m')[49;172H[K[49;172H422,1[9C88%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (approval == 'ABORT') {[49;172H[K[49;172H421,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H420,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H)[49;172H[K[49;172H419,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H][49;172H[K[49;172H418,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;36Hdescription: 'Confirm production deployment')[49;172H[K[49;172H417,1[9C87%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;36Hchoices: ['ABORT', 'DEPLOY'],[49;172H[K[49;172H416,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hchoice(name: 'DEPLOY_DECISION',[49;172H[K[49;172H415,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hparameters: [[49;172H[K[49;172H414,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hmessage: "ðŸš¨[1;38HDeploy ${env.BUILD_TYPE} build to PRODUCTION?",[49;172H[K[49;172H413,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef approval = input([49;172H[K[49;172H412,1[9C86%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H411,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H410,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H409,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hexpression { params.DEPLOY_TO_PROD == true }[49;172H[K[49;172H408,1[9C85%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hwhen {[49;172H[K[49;172H407,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Deployment Approval') {[49;172H[K[49;172H406,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H405,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H404,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H403,1[9C84%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H402,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H401,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HarchiveArtifacts artifacts: 'thingsboard-*-*.tar.gz', allowEmptyArchive: true[49;172H[K[49;172H400,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H399,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H'''[49;172H[K[49;172H398,1[9C83%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hrm -rf "$RELEASE_DIR"[49;172H[K[49;172H397,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H396,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfi[49;172H[K[49;172H395,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "â„¹ï¸[1;41HNo main application JARs to package"[49;172H[K[49;172H394,1[9C82%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Helse[49;172H[K[49;172H393,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "âœ…[1;42HRelease package created: ${RELEASE_DIR}.tar.gz"[49;172H[K[49;172H392,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Htar -czf "${RELEASE_DIR}.tar.gz" "$RELEASE_DIR"[49;172H[K[49;172H391,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif [ -n "$(ls -A $RELEASE_DIR/*.jar 2>/dev/null)" ]; then[49;172H[K[49;172H390,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H389,1[9C81%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Date: $(date)" >> "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H388,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Build: ${BUILD_NUMBER}" >> "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H387,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Modules: ${CHANGED_MODULES}" >> "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H386,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Build Type: ${BUILD_TYPE}" > "$RELEASE_DIR/build-info.txt"[49;172H[K[49;172H385,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Create release info[49;172H[K[49;172H384,1[9C80%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H383,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdone[49;172H[K[49;172H382,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hcp "$jar" "$RELEASE_DIR/" 2>/dev/null || true[49;172H[K[49;172H381,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfind . -name "thingsboard*.jar" -o -name "application*.jar" | grep -v test | while read jar; do[49;172H[K[49;172H380,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H# Copy main application JARs[49;172H[K[49;172H379,1[9C79%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H378,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hmkdir -p "$RELEASE_DIR"[49;172H[K[49;172H377,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HRELEASE_DIR="thingsboard-${BUILD_TYPE,,}-${BUILD_NUMBER}"[49;172H[K[49;172H376,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hsh '''[49;172H[K[49;172H375,1[9C78%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Create a release package for changed modules[49;172H[K[49;172H374,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H373,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;40Hfingerprint: true[49;172H[K[49;172H372,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;40HallowEmptyArchive: true,[49;172H[K[49;172H371,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;40Hexcludes: '**/target/*-tests.jar,**/target/*-sources.jar',[49;172H[K[49;172H370,1[9C77%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HarchiveArtifacts artifacts: '**/target/*.jar',[49;172H[K[49;172H369,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Archive all built packages[49;172H[K[49;172H368,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H367,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "Archiving ${env.BUILD_TYPE.toLowerCase()} build packages"[49;172H[K[49;172H366,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (prodJars) {[49;172H[K[49;172H365,1[9C76%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H364,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H).trim()[49;172H[K[49;172H363,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25HreturnStdout: true[49;172H[K[49;172H362,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hscript: "find . -name '*.jar' -newer pom.xml | grep -v test",[49;172H[K[49;172H361,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef prodJars = sh([49;172H[K[49;172H360,1[9C75%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H359,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ“[1;26HArchiving production packages...'[49;172H[K[49;172H358,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H357,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Archive Production Packages') {[49;172H[K[49;172H356,1[9C74%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H355,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H354,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H353,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17HarchiveArtifacts artifacts: 'production-backup-*.tar.gz', allowEmptyArchive: true[49;172H[K[49;172H352,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H351,1[9C73%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H'''[49;172H[K[49;172H350,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hrm -rf "$BACKUP_DIR"[49;172H[K[49;172H349,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H348,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H347,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "â„¹ï¸[1;33HNo packages to backup"[49;172H[K[49;172H346,1[9C72%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Helse[49;172H[K[49;172H345,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hls -lh "${BACKUP_DIR}.tar.gz"[49;172H[K[49;172H344,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HProduction backup created: ${BACKUP_DIR}.tar.gz"[49;172H[K[49;172H343,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Htar -czf "${BACKUP_DIR}.tar.gz" "$BACKUP_DIR"[49;172H[K[49;172H342,1[9C71%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ -n "$(ls -A $BACKUP_DIR 2>/dev/null)" ]; then[49;172H[K[49;172H341,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Create backup archive[49;172H[K[49;172H340,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H339,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H338,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdone[49;172H[K[49;172H337,1[9C70%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfi[49;172H[K[49;172H336,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfind "$module/target" -name "*.jar" -exec cp {} "$BACKUP_DIR/$module/" \\; 2>/dev/null || true[49;172H[K[49;172H335,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hmkdir -p "$BACKUP_DIR/$module"[49;172H[K[49;172H334,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif [ -d "$module/target" ]; then[49;172H[K[49;172H333,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor module in ${CHANGED_MODULES//,/ }; do[49;172H[K[49;172H332,1[9C69%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ -n "${CHANGED_MODULES}" ]; then[49;172H[K[49;172H331,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Copy packages for changed modules[49;172H[K[49;172H330,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H329,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hmkdir -p "$BACKUP_DIR"[49;172H[K[49;172H328,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21HBACKUP_DIR="production-backup-${BUILD_NUMBER}-$(date +%Y%m%d_%H%M%S)"[49;172H[K[49;172H327,1[9C68%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh '''[49;172H[K[49;172H326,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ’¾[1;26HCreating production backup...'[49;172H[K[49;172H325,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H324,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H323,1[9C67%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hexpression { params.CREATE_BACKUP == true }[49;172H[K[49;172H322,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hwhen {[49;172H[K[49;172H321,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Create Production Backup') {[49;172H[K[49;172H320,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H319,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H318,1[9C66%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H317,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H'''[49;172H[K[49;172H316,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H315,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HPackage validation completed"[49;172H[K[49;172H314,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Helse[49;172H[K[49;172H313,1[9C65%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "This might be normal for parent modules or configuration changes"[49;172H[K[49;172H312,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âŒ[1;34HWARNING: No packages found!"[49;172H[K[49;172H311,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ "$TOTAL_JARS" -eq 0 ]; then[49;172H[K[49;172H310,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H309,1[9C64%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "Total packages created: $TOTAL_JARS"[49;172H[K[49;172H308,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21HTOTAL_JARS=$(find . -name "*.jar" -newer pom.xml 2>/dev/null | wc -l)[49;172H[K[49;172H307,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Overall validation[49;172H[K[49;172H306,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H305,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hfi[49;172H[K[49;172H304,1[9C63%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdone[49;172H[K[49;172H303,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfi[49;172H[K[49;172H302,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "  âš ï¸[1;43H$module: No packages found (might be parent module)"[49;172H[K[49;172H301,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Helse[49;172H[K[49;172H300,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hfind "$module" -name "*.jar" -exec ls -lh {} \\; 2>/dev/null | head -3[49;172H[K[49;172H299,1[9C62%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "  âœ…[1;44H$module: $MODULE_JARS packages found"[49;172H[K[49;172H298,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hif [ "$MODULE_JARS" -gt 0 ]; then[49;172H[K[49;172H297,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29HMODULE_JARS=$(find "$module" -name "*.jar" 2>/dev/null | wc -l)[49;172H[K[49;172H296,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Checking module: $module"[49;172H[K[49;172H295,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor module in ${CHANGED_MODULES//,/ }; do[49;172H[K[49;172H294,1[9C61%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif [ -n "$CHANGED_MODULES" ]; then[49;172H[K[49;172H293,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21HCHANGED_MODULES="${CHANGED_MODULES}"[49;172H[K[49;172H292,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H# Check if packages exist for changed modules[49;172H[K[49;172H291,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H290,1[9C60%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hecho "=== Production Package Validation ==="[49;172H[K[49;172H289,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh '''[49;172H[K[49;172H288,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'âœ…[1;26HValidating built packages...'[49;172H[K[49;172H287,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H286,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Package Validation') {[49;172H[K[49;172H285,1[9C59%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H284,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H283,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H282,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H281,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H280,1[9C58%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H'''[49;172H[K[49;172H279,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hfind . -name "*.jar" -newer pom.xml 2>/dev/null | head -15[49;172H[K[49;172H278,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "Packages created:"[49;172H[K[49;172H277,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "=== Build Process Completed ==="[49;172H[K[49;172H276,1[9C57%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hsh '''[49;172H[K[49;172H275,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H274,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H273,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H"""[49;172H[K[49;172H272,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-T 2C[49;172H[K[49;172H271,1[9C56%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.debug=false \[49;172H[K[49;172H270,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.optimize=true \[49;172H[K[49;172H269,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Denforcer.skip=false \[49;172H[K[49;172H268,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dspotbugs.skip=false \[49;172H[K[49;172H267,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dcheckstyle.skip=false \[49;172H[K[49;172H266,1[9C55%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.source.skip=true \[49;172H[K[49;172H265,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.javadoc.skip=true \[49;172H[K[49;172H264,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.test.skip=true \[49;172H[K[49;172H263,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-DskipTests \[49;172H[K[49;172H262,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-am \[49;172H[K[49;172H261,1[9C54%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-pl ${moduleList} \[49;172H[K[49;172H260,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-P${BUILD_PROFILE} \[49;172H[K[49;172H259,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hmvn package \[49;172H[K[49;172H258,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33H# Build changed modules and their dependents[49;172H[K[49;172H257,1[9C53%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H256,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "Building modules: ${moduleList}"[49;172H[K[49;172H255,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hsh """[49;172H[K[49;172H254,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdef moduleList = modules.join(',')[49;172H[K[49;172H253,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Build modules with dependencies[49;172H[K[49;172H252,1[9C52%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H251,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H250,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hecho "=== INCREMENTAL PRODUCTION Build ==="[49;172H[K[49;172H249,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Incremental build[49;172H[K[49;172H248,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H} else {[49;172H[K[49;172H247,1[9C51%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H'''[49;172H[K[49;172H246,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-T 2C[49;172H[K[49;172H245,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.debug=false \[49;172H[K[49;172H244,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.compiler.optimize=true \[49;172H[K[49;172H243,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Denforcer.skip=false \[49;172H[K[49;172H242,1[9C50%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dspotbugs.skip=false \[49;172H[K[49;172H241,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dcheckstyle.skip=false \[49;172H[K[49;172H240,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.source.skip=true \[49;172H[K[49;172H239,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.javadoc.skip=true \[49;172H[K[49;172H238,1[9C49%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-Dmaven.test.skip=true \[49;172H[K[49;172H237,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-DskipTests \[49;172H[K[49;172H236,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;37H-P${BUILD_PROFILE} \[49;172H[K[49;172H235,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hmvn package \[49;172H[K[49;172H234,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;33Hecho "=== FULL PRODUCTION Build ==="[49;172H[K[49;172H233,1[9C48%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hsh '''[49;172H[K[49;172H232,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29H// Full build[49;172H[K[49;172H231,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H230,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hscript {[49;172H[K[49;172H229,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Htimeout(time: 60, unit: 'MINUTES') {[49;172H[K[49;172H228,1[9C47%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ“¦[1;26HBuilding ${env.BUILD_TYPE} - ${env.CHANGED_MODULES.split(',').length} modules..."[49;172H[K[49;172H227,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H226,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Incremental Production Build') {[49;172H[K[49;172H225,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H224,1[9C46%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H223,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H222,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H221,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H220,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H}[49;172H[K[49;172H219,1[9C45%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;29Hsh "mvn clean -q -f ${module}/pom.xml || true"[49;172H[K[49;172H218,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hfor (module in modules) {[49;172H[K[49;172H217,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hdef modules = env.CHANGED_MODULES.split(',')[49;172H[K[49;172H216,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25H// Clean only changed modules[49;172H[K[49;172H215,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H214,1[9C44%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hsh 'mvn clean -q -T 2C'[49;172H[K[49;172H213,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (env.BUILD_TYPE == 'FULL') {[49;172H[K[49;172H212,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H211,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ§¹[1;26HCleaning workspace for production build...'[49;172H[K[49;172H210,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H209,1[9C43%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Clean & Prepare') {[49;172H[K[49;172H208,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H207,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H206,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H205,1[9C42%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H204,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H}[49;172H[K[49;172H203,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Herror("âŒ[1;35HProduction builds only allowed from master, main, or release/* branches")[49;172H[K[49;172H202,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else {[49;172H[K[49;172H201,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HBuilding from approved branch: ${currentBranch}"[49;172H[K[49;172H200,1[9C41%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H} else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[49;172H[K[49;172H199,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;25Hecho "âœ…[1;34HBuilding from version tag: ${params.VERSION_TAG}"[49;172H[K[49;172H198,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hif (params.VERSION_TAG) {[49;172H[K[49;172H197,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H196,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef currentBranch = params.RELEASE_BRANCH[49;172H[K[49;172H195,1[9C40%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Hdef allowedBranches = ['master','release/*', 'main'][49;172H[K[49;172H194,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hscript {[49;172H[K[49;172H193,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho 'ðŸ”[1;26HRunning production security validations...'[49;172H[K[49;172H192,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H191,1[9C39%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Security Check') {[49;172H[K[49;172H190,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H189,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H188,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H187,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'git log --oneline -3'[49;172H[K[49;172H186,1[9C38%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'mvn -version'[49;172H[K[49;172H185,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hsh 'java -version'[49;172H[K[49;172H184,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Deploy to prod: ${params.DEPLOY_TO_PROD}"[49;172H[K[49;172H183,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Create backup: ${params.CREATE_BACKUP}"[49;172H[K[49;172H182,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Modules to build: ${env.CHANGED_MODULES}"[49;172H[K[49;172H181,1[9C37%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Build Type: ${env.BUILD_TYPE}"[49;172H[K[49;172H180,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Build number: ${env.BUILD_NUMBER}"[49;172H[K[49;172H179,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Branch/Tag: ${params.VERSION_TAG ?: params.RELEASE_BRANCH}"[49;172H[K[49;172H178,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "Environment: ${ENV_NAME}"[49;172H[K[49;172H177,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17Hecho "ðŸ­[1;26HPRODUCTION Build Information:"[49;172H[K[49;172H176,1[9C36%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13Hsteps {[49;172H[K[49;172H175,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9Hstage('Production Build Info') {[49;172H[K[49;172H174,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H173,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;9H}[49;172H[K[49;172H172,1[9C35%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;13H}[49;172H[K[49;172H171,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;17H}[49;172H[K[49;172H170,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.BUILD_TYPE = changedModules.size() == allModules.size() ? 'FULL' : 'INCREMENTAL'[49;172H[K[49;172H169,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.ALL_MODULES = allModules.join(',')[49;172H[K[49;172H168,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21Henv.CHANGED_MODULES = changedModules.join(',')[49;172H[K[49;172H167,1[9C34%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[1;21H// Store in environment for later stages[49;172H[K[49;172H166,1[9C33%[6;1H[?25h[?25l[49;162H~@k[6;1H[49;162H   [6;1H[1;48r[1;1H[L[1;49r[49;172H[K[49;172H165,1[9C33%[6;1H[?25h[?25l[49;162H`[6;1H[?25h[?25l[49;163H:[6;1H[49;1H[1m[37m[41mE78: Unknown mark[m[49;162H[K[6;1H[49;172H165,1[9C33%[6;1H[?25h[?25l[49;162H^[[6;1H[49;162H  [6;1H[49;162H^[[6;1H[49;162H  [6;1H[?25h[?25l[49;162H:[6;1H[49;1H[K[49;1H:[?25hq[?25l[?2004l[>4;m[23;2t[23;1t[49;1H[K[49;1H[?1004l[?2004l[?1l>[?25h[>4;m[?1049l[23;0;0t]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git diff
[?2004l[?1h=[1mdiff --git a/Jenkinsfile b/Jenkinsfile[m[m
[1mindex e927f183e6..8cf7cec224 100644[m[m
[1m--- a/Jenkinsfile[m[m
[1m+++ b/Jenkinsfile[m[m
[36m@@ -181,7 +181,24 @@[m [mpipeline {[m[m
                 sh 'git log --oneline -3'[m[m
             }[m[m
         }[m[m
[31m-       [m[m
[32m+[m[41m        [m[m
[32m+[m[32m        stage('Production Security Check') {[m[m
[32m+[m[32m            steps {[m[m
[32m+[m[32m                echo 'ðŸ” Running production security validations...'[m[m
[32m+[m[32m                script {[m[m
[32m+[m[32m                    def allowedBranches = ['master','release/*', 'main'][m[m
[32m+[m[32m                    def currentBranch = params.RELEASE_BRANCH[m[m
[32m+[m[41m                    [m[m
[32m+[m[32m                    if (params.VERSION_TAG) {[m[m
[32m+[m[32m                        echo "âœ… Building from version tag: ${params.VERSION_TAG}"[m[m
[32m+[m[32m                    } else if (currentBranch.startsWith('release/') || allowedBranches.contains(currentBranch)) {[m[m
[32m+[m[32m                        echo "âœ… Building from approved branch: ${currentBranch}"[m[m
[32m+[m[32m                    } else {[m[m
[32m+[m[32m                        error("âŒ Production builds only allowed from master, main, or release/* branches")[m[m
[32m+[m[32m                    }[m[m
[32m+[m[32m                }[m[m
[32m+[m[32m            }[m[m
[32m+[m[32m        }[m[m
         [m[m
         stage('Production Clean & Prepare') {[m[m
             steps {[m[m
[1mdiff --git a/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java b/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java[m[m
[1mindex 31b220569f..c0bdb7a328 100644[m[m
[1m--- a/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java[m[m
[1m+++ b/application/src/main/java/org/thingsboard/server/ThingsboardInstallApplication.java[m[m
[36m@@ -13,6 +13,7 @@[m[m
  * See the License for the specific language governing permissions and[m[m
  * limitations under the License.[m[m
  */[m[m
[32m+[m[32m// Updated for incremental build test - 2025-06-23[m[m
 package org.thingsboard.server;[m[m
 [m[m
 import lombok.extern.slf4j.Slf4j;[m[m
[1mdiff --git a/{ b/{[m[m
[1mindex 1f799148e9..487abf2718 100644[m[m
[1m--- a/{[m[m
[1m+++ b/{[m[m
[36m@@ -1031,4 +1031,503 @@[m [mWhile opening file "Jenkinsfile"[m[m
 echo 'ðŸ”Running production security validations...'-Dmaven.test.skip=true \187,71-69     37%0-6869-678-667-656-645-634-623-612-601-590-5859-578-567-556-545-534-523-512-501-490-4849-478-467[m :[K[K[?1l>]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ 
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ git add .
[?2004l]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ [7mgit commit -m "Test incremental build - update application module"[27m
[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cgit commit -m "Test incremental build - update application module"
[A
[?2004l[production b85a3106c2] Test incremental build - update application module
 3 files changed, 565 insertions(+), 2 deletions(-)
]0;nethmi@server1:~/Projects/thingsboard[?2004h[nethmi@server1 thingsboard]$ [7mgit push origin master[27m
[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cgit push origin master
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K[K[K[K[K[Kproduction
[?2004lUsername for 'https://github.com': Nethnissanka
Password for 'https://Nethn